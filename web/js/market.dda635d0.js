(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["market"],{"0be9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["list"===e.noTitleKey?a("List-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],c=a("2af9"),u=a("63b6"),d={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"guang"},columns:[{title:"用户",dataIndex:"member_name",render:function(e,t){return e("div",[e("strong",t.row.member.user_name)])}},{title:"积分",dataIndex:"points",width:100},{title:"时间",dataIndex:"created_at",width:100}],loadData:function(t){return Object(u["b"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},m=d,p=a("2877"),f=Object(p["a"])(m,o,l,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.guang.status,callback:function(t){e.$set(e.page.guang,"status",t)},expression:"page.guang.status"}})],1),a("a-form-item",{attrs:{label:"积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["points",{rules:[{required:!1,message:""}]}],expression:"['points', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每次奖励积分")])])],1),a("a-form-item",{attrs:{label:"每日次数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["day_times",{rules:[{required:!1,message:""}]}],expression:"['day_times', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每天最大奖励次数")])])],1),a("a-form-item",{attrs:{label:"中奖几率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["views",{rules:[{required:!1,message:""}]}],expression:"['views', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每次浏览"+e._s(e.page.guang.views)+"个产品，获取一次中奖机会，0代表无法中奖")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},b=[],v=a("5530"),y=(a("b0c0"),a("88bc")),w=a.n(y),_=a("ac0d"),C=a("5880"),x={mixins:[_["b"],_["c"]],components:{},computed:Object(v["a"])({},Object(C["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{guang:{status:!1,views:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(u["d"])({type:"guang"}).then((function(a){a.data.item&&e.$nextTick((function(){var r=w()(a.data.item,["points","views","day_times"]);t(r),e.page.guang.status=1===a.data.item.status,e.page.guang.views=a.data.item.views}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(u["f"])(Object.assign(a,{type:"guang",status:t.page.guang.status})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"views"===r&&(this.page.guang.views=a)}}},k=x,q=Object(p["a"])(k,g,b,!1,null,null,null),P=q.exports,S={name:"Page",components:{ListPage:h,DataPage:P},data:function(){return{noTitleKey:"list",tabListNoTitle:[{key:"list",tab:"逛记录"},{key:"data",tab:"设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},j=S,O=Object(p["a"])(j,r,n,!1,null,null,null);t["default"]=O.exports},2934:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o}));var r=a("b775"),n={list:"/api/common/channel/items",getGoodsItems:"/api/common/goods/list",getGoodsView:"/api/common/goods/view"};function s(e){return Object(r["b"])({url:n.getGoodsView,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.getGoodsItems,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.list,method:"post",data:e})}},"48a8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["share"===e.noTitleKey?a("Share-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],c=a("2af9"),u=a("b775"),d={list:"/api/user/market/share/list",view:"/api/user/market/share/view",update:"/api/user/market/share/update"};function m(e){return Object(u["b"])({url:d.list,method:"post",data:e})}function p(e){return Object(u["b"])({url:d.view,method:"post",data:e})}function f(e){return Object(u["b"])({url:d.update,method:"post",data:e})}var h={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"平台",width:150,dataIndex:"platform",scopedSlots:{customRender:"platformName"}},{title:"分享人",width:100,dataIndex:"member.user_name"},{title:"时间",width:160,dataIndex:"created_at"}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},g=h,b=a("2877"),v=Object(b["a"])(g,o,l,!1,null,null,null),y=v.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"分享奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.share.share_status,callback:function(t){e.$set(e.page.share,"share_status",t)},expression:"page.share.share_status"}})],1),a("a-form-item",{attrs:{label:"奖励范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["share_range",{rules:[{required:!1}]}],expression:"[ 'share_range',{rules: [{ required : false }]} ]"}],staticStyle:{width:"400px"}},[a("a-select-option",{attrs:{value:0}},[e._v("朋友圈分享奖励")]),a("a-select-option",{attrs:{value:1}},[e._v("微信群分享奖励")]),a("a-select-option",{attrs:{value:3}},[e._v("朋友圈、微信群分享奖励")])],1)],1),a("a-form-item",{attrs:{label:"现金奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("元")])])],1),a("a-form-item",{attrs:{label:"积分奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["point",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['point', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("积分")])])],1),a("a-form-item",{attrs:{label:"奖励浏览条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["views",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['views', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("次(每个用户每天分享能得"+e._s(e.form.day_times)+"次奖励，超过后分享没有奖励了)")])])],1),a("a-form-item",{attrs:{label:"每日奖励限制",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["day_times",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['day_times', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"800px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("次(每个用户每天分享能得"+e._s(e.form.day_times)+"次奖励，超过后分享没有奖励了)")])])],1),a("a-form-item",{attrs:{label:"分享独立域名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["invite_url",{rules:[{required:!1,message:""}]}],expression:"['invite_url', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"800px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("不填写使用官方默认，如果填写域名需要先cname解析到 share.youdanhui.cn")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},_=[],C=a("5530"),x=(a("b0c0"),a("88bc")),k=a.n(x),q=a("ac0d"),P=a("5880"),S={mixins:[q["b"],q["c"]],components:{},computed:Object(C["a"])({},Object(P["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{share:{share_status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;p({type:"share"}).then((function(a){a.data.item&&e.$nextTick((function(){var r=k()(a.data.item,["share_range","money","point","views","day_times","invite_url"]);t(r),e.page.share.share_status=1===a.data.item.share_status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||f(Object.assign(a,{type:"share",share_status:t.page.share.share_status})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},j=S,O=Object(b["a"])(j,w,_,!1,null,null,null),$=O.exports,T={name:"Page",components:{SharePage:y,DataPage:$},data:function(){return{noTitleKey:"share",tabListNoTitle:[{key:"share",tab:"分享明细"},{key:"data",tab:"分享设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},I=T,A=Object(b["a"])(I,r,n,!1,null,null,null);t["default"]=A.exports},"4ad9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["topic"===e.noTitleKey?a("Topic-page"):"items"===e.noTitleKey?a("Items-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],c=a("2af9"),u=a("b775"),d={getItems:"/api/user/market/topic/list",getView:"/api/user/market/topic/view",updateItem:"/api/user/market/topic/update",getItemsGoods:"/api/user/market/topic/topic_items",updateGoods:"/api/user/market/topic/update_goods",updateStatus:"/api/user/market/topic/updateStatus"};function m(e){return Object(u["b"])({url:d.updateGoods,method:"post",data:e})}function p(e){return Object(u["b"])({url:d.getItemsGoods,method:"post",data:e})}function f(e){return Object(u["b"])({url:d.getItems,method:"post",data:e})}function h(e){return Object(u["b"])({url:d.updateItem,method:"post",data:e})}var g={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"所属专题",dataIndex:"topic.name",width:100}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},b=g,v=a("2877"),y=Object(v["a"])(b,o,l,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布专题")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"actionTopic",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleGoodsManage(r)}}},[e._v("商品管理")]):e._e()]],2)}},{key:"action",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleTopicEdit(r)}}},[e._v("编辑")]):e._e()]],2)}}])}),a("topic-modal",{ref:"modal",on:{ok:e.query}}),a("goods-modal",{ref:"modalGoods",on:{ok:e.query}})],1)},C=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布专题",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["classes",{rules:[{required:!1}]}],expression:"['classes', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"专题名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""}]}],expression:"['name', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0}]}],expression:"['content', {rules: [{required: true}]}]"}],attrs:{rows:4}})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传 ")],1)],1)],1)],1)])],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit()}}},[e._v("保存")])],1)],2)},k=[],q=a("5530"),P=(a("b0c0"),a("88bc")),S=a.n(P),j=a("5880"),O={name:"EditModal",components:{},computed:Object(q["a"])(Object(q["a"])({},Object(j["mapGetters"])(["token"])),{},{uploadUrl:function(){return"https://www.haopintui.net/api/common/upload/upload"}}),data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",page:{classes:""}}},methods:{edit:function(e){this.visible=!0;var t=this.form.setFieldsValue;this.$nextTick((function(){var a=S()(e,["id","name","content","pic_url"]);t(a)}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:h(a).then((function(t){var r=t||{},n=r.code;0===n&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$emit("ok",a),e.visible=!1}))}))},handleCancel:function(){this.visible=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},$=O,T=Object(v["a"])($,x,k,!1,null,null,null),I=T.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"专题商品管理",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!1}]}],expression:"['num_iid', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"不能为空"}]}],expression:"['title', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"原价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"不能为空"}]}],expression:"['price', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,data:{hpt_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传 ")],1)],1),e.previewImg?a("img",{staticClass:"previewImg",attrs:{src:e.previewImg}}):e._e(),e.pList&&e.pList.length>0?a("div",{staticClass:"pics"},[a("p",[e._v("主图参考")]),a("ul",e._l(e.pList,(function(t,r){return a("li",{key:r,on:{click:function(a){return e.setPic(t)}}},[a("img",{attrs:{src:t}})])})),0)]):e._e()],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("保存")])],1)],1)],1),a("template",{slot:"footer"},[a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleGoodsEdit(r)}}},[e._v("编辑")]):e._e()]],2)}}])})],1)],2)},K=[],V=a("c104"),R={name:"EditModal",components:{STable:c["o"],Ellipsis:c["f"]},computed:Object(q["a"])(Object(q["a"])({},Object(j["mapGetters"])(["token"])),{},{uploadUrl:function(){return"https://www.haopintui.net/api/common/upload/upload"}}),data:function(){var e=this;return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",pList:[],previewImg:"",queryParam:{topic_id:0},page:{classes:""},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"操作",dataIndex:"",width:150,scopedSlots:{customRender:"action"}}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))}}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},methods:{edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.form.resetFields(),t.queryParam.topic_id=e.id,t.$refs.table.refresh(!0)}))},handleGoodsEdit:function(e){var t=this,a=this.form.setFieldsValue;this.$nextTick((function(){if(e.id){e.num_iid&&(e.href="https://detail.tmall.com/item.htm?id="+e.num_iid);var r=S()(e,["id","href","num_iid","title","price","pic_url"]);a(r)}else t.form.resetFields();t.pList=[],t.fetchGoodsInfoPreview()}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:m(Object.assign(a,{topic_id:e.queryParam.topic_id})).then((function(t){var a=t||{},r=a.code;0===r&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$refs.table.refresh(!0),e.handleGoodsEdit({})}))}))},handleCancel:function(){this.visible=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(V["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&(e.$nextTick((function(){t(S()(a.data.goods,["href","num_iid","title","price","pic_url"]))})),e.wenItems=a.data.goods.wenItems||[],e.pList=a.data.goods.p_list||[]),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this;this.form.getFieldsValue().href&&Object(V["d"])({href:this.form.getFieldsValue().href}).then((function(t){t.data.goods&&(e.pList=t.data.goods.p_list||[])}))},changeValue:function(e){var t=e.target,a=t.value,r=t.id;"href"===r&&(this.href=a)},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeImg:function(e){var t=e.target.value;this.previewImg=t}}},F=R,L=(a("5a69"),Object(v["a"])(F,A,K,!1,null,"1288eb4b",null)),D=L.exports,N={name:"Brand",components:{STable:c["o"],TopicModal:I,GoodsModal:D,Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"name",width:200},{title:"内容",dataIndex:"content"},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"商品数量",dataIndex:"count",width:100},{title:"商品管理",dataIndex:"",width:80,align:"center",scopedSlots:{customRender:"actionTopic"}},{title:"操作",width:150,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return f(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleGoodsManage:function(e){this.$refs.modalGoods.edit(e)},handleTopicEdit:function(e){this.$refs.modal.edit(e)}}},E=N,G=Object(v["a"])(E,_,C,!1,null,null,null),M=G.exports,Y={name:"Page",components:{ItemsPage:w,TopicPage:M},data:function(){return{noTitleKey:"topic",tabListNoTitle:[{key:"topic",tab:"专题"},{key:"items",tab:"专题商品明细"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},B=Y,z=Object(v["a"])(B,r,n,!1,null,null,null);t["default"]=z.exports},"5a69":function(e,t,a){"use strict";a("d096")},"63b6":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("b775"),n={getList:"/api/user/market/market/list",getView:"/api/user/market/market/view",getItems:"/api/user/market/market/items",update:"/api/user/market/market/update",shares:"/api/user/market/market/shares",updateItem:"/api/user/market/market/updateItem",viewItem:"/api/user/market/market/viewItem"};function s(e){return Object(r["b"])({url:n.getList,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.getItems,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.getView,method:"post",data:e})}function l(e){return Object(r["b"])({url:n.update,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.shares,method:"post",data:e})}function u(e){return Object(r["b"])({url:n.updateItem,method:"post",data:e})}},"64d7":function(e,t,a){"use strict";a("c47c")},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",s="[object Function]",i="[object GeneratorFunction]",o="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")();function d(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function p(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var f=Object.prototype,h=f.hasOwnProperty,g=f.toString,b=u.Symbol,v=f.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function _(e,t,a,r,n){var s=-1,i=e.length;a||(a=q),n||(n=[]);while(++s<i){var o=e[s];t>0&&a(o)?t>1?_(o,t-1,a,r,n):p(n,o):r||(n[n.length]=o)}return n}function C(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var r=-1,n=t.length,s={};while(++r<n){var i=t[r],o=e[i];a(o,i)&&(s[i]=o)}return s}function k(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=w(a.length-t,0),s=Array(n);while(++r<n)s[r]=a[t+r];r=-1;var i=Array(t+1);while(++r<t)i[r]=a[r];return i[t]=s,d(e,this,i)}}function q(e){return j(e)||S(e)||!!(y&&e&&e[y])}function P(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function S(e){return $(e)&&h.call(e,"callee")&&(!v.call(e,"callee")||g.call(e)==n)}var j=Array.isArray;function O(e){return null!=e&&I(e.length)&&!T(e)}function $(e){return K(e)&&O(e)}function T(e){var t=A(e)?g.call(e):"";return t==s||t==i}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function K(e){return!!e&&"object"==typeof e}function V(e){return"symbol"==typeof e||K(e)&&g.call(e)==o}var R=k((function(e,t){return null==e?{}:C(e,m(_(t,1),P))}));e.exports=R}).call(this,a("c8ba"))},"9b93":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["list"===e.noTitleKey?a("List-page"):"share"===e.noTitleKey?a("Share-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,a){return[e._v(" "+e._s(a.member.user_name)+" ")]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],c=a("2af9"),u=a("63b6"),d={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"hongbao"},columns:[{title:"分享人",dataIndex:"member_name",width:120,scopedSlots:{customRender:"name"}},{title:"连接",dataIndex:"url"},{title:"时间",dataIndex:"created_at",width:100}],loadData:function(t){return Object(u["c"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},m=d,p=a("2877"),f=Object(p["a"])(m,o,l,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},b=[],v={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"hongbao"},columns:[{title:"用户",dataIndex:"member.user_name"},{title:"领取金额",dataIndex:"money",width:100},{title:"分享人",dataIndex:"from_member.user_name"},{title:"时间",dataIndex:"created_at",width:160}],loadData:function(t){return Object(u["b"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},y=v,w=Object(p["a"])(y,g,b,!1,null,null,null),_=w.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.hongbao.status,callback:function(t){e.$set(e.page.hongbao,"status",t)},expression:"page.hongbao.status"}})],1),a("a-form-item",{attrs:{label:"最小奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_money",{rules:[{required:!1,message:""}]}],expression:"['min_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("最小随机奖励")])])],1),a("a-form-item",{attrs:{label:"最大奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_money",{rules:[{required:!1,message:""}]}],expression:"['max_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("最大随机奖励")])])],1),a("a-form-item",{attrs:{label:"中奖次数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["allow_times",{rules:[{required:!1,message:""}]}],expression:"['allow_times', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每个用户允许"+e._s(e.page.hongbao.allow_times)+"次领奖")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},x=[],k=a("5530"),q=(a("b0c0"),a("88bc")),P=a.n(q),S=a("ac0d"),j=a("5880"),O={mixins:[S["b"],S["c"]],components:{},computed:Object(k["a"])({},Object(j["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{hongbao:{allow_times:0,status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(u["d"])({type:"hongbao"}).then((function(a){a.data.item&&e.$nextTick((function(){var r=P()(a.data.item,["min_money","max_money","allow_times"]);t(r),e.page.hongbao.allow_times=a.data.item.allow_times,e.page.hongbao.status=1===a.data.item.status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(u["f"])(Object.assign(a,{type:"hongbao",status:t.page.hongbao.status})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"allow_times"===r&&(this.page.hongbao.allow_times=a)}}},$=O,T=Object(p["a"])($,C,x,!1,null,null,null),I=T.exports,A={name:"Page",components:{SharePage:h,ListPage:_,DataPage:I},data:function(){return{noTitleKey:"list",tabListNoTitle:[{key:"list",tab:"领取记录"},{key:"share",tab:"分享记录"},{key:"data",tab:"设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},K=A,V=Object(p["a"])(K,r,n,!1,null,null,null);t["default"]=V.exports},c104:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"h",(function(){return m}));var r=a("b775"),n={list:"/api/user/business/goods/list",getReport:"/api/user/business/goods/report",view:"/api/user/business/goods/view",fetchGoodsInfo:"/api/user/business/goods/fetchGoodsInfo",fetchGoodsInfoEx:"/api/user/business/goods/fetchGoodsInfoEx",fetchGoodsCoupon:"/api/user/business/goods/fetchGoodsCoupon",fetchContent:"/api/user/business/goods/fetchContent",update:"/api/user/business/goods/update",updateStatus:"/api/user/business/goods/status"};function s(e){return Object(r["b"])({url:n.getReport,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.fetchContent,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.fetchGoodsCoupon,method:"post",data:e})}function l(e){return Object(r["b"])({url:n.list,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.update,method:"post",data:e})}function u(e){return Object(r["b"])({url:n.fetchGoodsInfo,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.fetchGoodsInfoEx,method:"post",data:e})}function m(e){return Object(r["b"])({url:n.updateStatus,method:"post",data:e})}},c47c:function(e,t,a){},d096:function(e,t,a){},d357:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"lingqu"===e.noTitleKey?a("Lingqu-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"statusName",fn:function(t,r){return[1===r.status?a("span",{staticStyle:{color:"#0e932e"}},[e._v("上架")]):a("span",[e._v("下架")])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handleUpdate(r,1)}}},[e._v("上架")]):a("a",{on:{click:function(t){return e.handleUpdate(r,0)}}},[e._v("下架")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("goods-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],c=a("2af9"),u=a("63b6"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布商品",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{attrs:{type:"error",message:"注意提示： 成交价百分比优先于佣金百分比，例：设置了成交百分比，佣金比例就无效，（固定返利金额优先级别最高）"}}),a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["inventory",{initialValue:0,rules:[{required:!1}]}],expression:"['inventory', {initialValue: 0,rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"详情",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v("原价:"+e._s(e.page.vip.ori_price))]),a("span",[e._v("券后价:"+e._s(e.page.vip.coupon_price))]),a("span",[e._v("购买成本价:"+e._s(e.page.vip.buy_base_price))]),e.page.vip.price>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price-e.page.vip.price).toFixed(2)))]):e.page.vip.price_rate>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price*(100-e.page.vip.price_rate)/100).toFixed(2)))]):e.page.vip.commission_rate>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price-e.page.vip.commission*e.page.vip.commission_rate/100).toFixed(2)))]):e._e()]),a("a-form-item",{attrs:{label:"开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time",{rules:[{required:!0,message:""}]}],expression:"['start_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time",{rules:[{required:!0,message:""}]}],expression:"['end_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['num_iid', {rules: [{required: true, message: '请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"佣金百分比",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{initialValue:0,rules:[{required:!0,message:"请输入标题"}]}],expression:"['commission_rate', {initialValue: 0,rules: [{required: true, message: '请输入标题'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"成交价百分比",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_rate",{initialValue:0,rules:[{required:!0,message:"请输入短标题"}]}],expression:"['price_rate', {initialValue: 0,rules: [{required: true, message: '请输入短标题'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"返利固定金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:0,rules:[{required:!1,message:"请输入原价格"}]}],expression:"['price', {initialValue: 0,rules: [{required: false, message: '请输入原价格'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"商品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{rules:[{required:!1,message:""}]}],expression:"[ 'recommend',{rules: [{ required : false , message: ''}]} ]"}],staticStyle:{width:"120px"}},[a("a-select-option",{attrs:{value:0}},[e._v("默认")]),a("a-select-option",{attrs:{value:2}},[e._v("优质商品")]),a("a-select-option",{attrs:{value:1}},[e._v("便宜实用")]),a("a-select-option",{attrs:{value:3}},[e._v("0元领取")]),a("a-select-option",{attrs:{value:4}},[e._v("1元购物")])],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("div",[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit(1)}}},[e._v("提交发布")])],1)])],2)},m=[],p=a("5530"),f=(a("b0c0"),a("88bc")),h=a.n(f),g=a("c104"),b=a("2934"),v=a("5880"),y={name:"EditModal",components:{},computed:Object(p["a"])({},Object(v["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",cats:[],wenItems:[],pList:[],previewImg:"",page:{vip:{ori_price:0,coupon_price:0,buy_base_price:0,price:0,price_rate:0,commission_rate:0,commission:0}}}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},created:function(){this.init()},methods:{init:function(){var e=this;Object(b["c"])().then((function(t){t.data.items&&(e.cats=t.data.items)}))},edit:function(e){var t=this;this.visible=!0;var a=this.form.setFieldsValue;this.$nextTick((function(){if(e.id){var r=h()(e,["id","recommend","inventory","href","num_iid","start_time","end_time","commission_rate","price_rate","price"]);r.start_time=i()(e.start_time),r.end_time=i()(e.end_time),a(r)}else t.form.resetFields();t.fetchGoodsInfo(),t.fetchGoodsInfoPreview()}))},handleSubmit:function(e){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,r){a?t.confirmLoading=!1:(r.start_time&&(r.start_time=i()(r.start_time).format("YYYY-MM-DD HH:mm:ss")),r.end_time&&(r.end_time=i()(r.end_time).format("YYYY-MM-DD HH:mm:ss")),Object(u["e"])(Object.assign(r,{type:"vip",submitStatus:e})).then((function(a){0===a.code&&(1===e?t.$message.success("提交成功"):t.$message.success("保存成功"),t.$emit("ok",r),t.visible=!1),t.confirmLoading=!1})))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(g["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&(e.$nextTick((function(){var e=h()(a.data.goods,["id","href","num_iid"]);e.start_time=i()(a.data.goods.start_time),e.end_time=i()(a.data.goods.end_time),t(e)})),e.page.vip.ori_price=a.data.goods.ori_price,e.page.vip.coupon_price=a.data.goods.coupon_price,e.page.vip.buy_base_price=a.data.goods.buy_base_price,e.page.vip.commission=a.data.goods.commission,e.wenItems=a.data.goods.wenItems||[],e.pList=a.data.goods.p_list||[]),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this;Object(g["d"])({href:this.form.getFieldsValue().href}).then((function(t){t.data.goods&&(e.wenItems=t.data.goods.wenItems||[],e.pList=t.data.goods.p_list||[])}))},handleCancel:function(){this.visible=!1},setContent:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({comment:e.content})}))},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeValue:function(e){var t=e.target.value;this.href=t},changeImg:function(e){var t=e.target.value;this.previewImg=t},change:function(){this.page.vip.price=this.form.getFieldValue("price"),this.page.vip.price_rate=this.form.getFieldValue("price_rate"),this.page.vip.commission_rate=this.form.getFieldValue("commission_rate")}}},w=y,_=(a("64d7"),a("2877")),C=Object(_["a"])(w,d,m,!1,null,"19ed4e15",null),x=C.exports,k={name:"Brand",components:{STable:c["o"],GoodsModal:x,Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"vip"},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"领取量",dataIndex:"draws",width:60},{title:"库存限制",dataIndex:"inventory",width:60},{title:"是否营销库",dataIndex:"marketTypeName",width:60,customRender:function(e,t){return"1"===t.goods.material_lib_type?"是":"否"}},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"销量",dataIndex:"goods.volume",width:60},{title:"佣金比例",dataIndex:"commission_rate",width:60},{title:"成交价比例",dataIndex:"price_rate",width:60},{title:"状态",dataIndex:"",width:60,scopedSlots:{customRender:"statusName"}},{title:"活动开始时间",dataIndex:"start_time",width:120,align:"center"},{title:"活动结束时间",dataIndex:"end_time",width:120,align:"center"},{title:"操作",dataIndex:"",width:120,scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(u["a"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleUpdate:function(e,t){var a=this;Object(u["f"])({num_iid:e.num_iid,status:t}).then((function(e){a.$refs.table.refresh(!0)}))},handleEdit:function(e){e.num_iid&&(e.href="https://detail.tmall.com/item.htm?id="+e.num_iid),this.$refs.modal.edit(e)}}},q=k,P=Object(_["a"])(q,o,l,!1,null,null,null),S=P.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},O=[],$={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"vip"},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:60},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"返利比例",dataIndex:"commission_rate",width:60},{title:"成交价比例",dataIndex:"price_rate",width:100,render:function(e,t){return e("div",[e("span",{},t.row.price_rate+"%")])}},{title:"购买人",dataIndex:"member.user_name",width:100},{title:"订单号",dataIndex:"trade_id",width:100},{title:"时间",dataIndex:"created_at",width:130}],loadData:function(t){return Object(u["b"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},T=$,I=Object(_["a"])(T,j,O,!1,null,null,null),A=I.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"全场活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits",{rules:[{required:!1,message:""}]}],expression:"['benefits', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"200px"}},[a("a-select-option",{attrs:{value:0}},[e._v("限定商品")]),a("a-select-option",{attrs:{value:1}},[e._v("全场限价")])],1)],1),a("a-form-item",{attrs:{label:"限定价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_money",{rules:[{required:!1,message:""}]}],expression:"['benefits_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("不超过这个价格")])])],1),a("a-form-item",{attrs:{label:"佣金筛选",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_commission",{rules:[{required:!1,message:""}]}],expression:"['benefits_commission', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("超过这个佣金")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},V=[],R=a("ac0d"),F={mixins:[R["b"],R["c"]],components:{},computed:Object(p["a"])({},Object(v["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},form:this.$form.createForm(this),page:{data:{benefits_invite_buyer_rate:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(u["d"])({type:"vip"}).then((function(a){a.data.item&&e.$nextTick((function(){t(h()(a.data.item,["benefits","benefits_money","benefits_commission","benefits_invite_price","benefits_invite_client_price","benefits_invite_buyer_rate"])),e.page.data.benefits_invite_buyer_rate=a.data.item.benefits_invite_buyer_rate}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(u["f"])(Object.assign(a,{type:"vip"})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"benefits_invite_buyer_rate"===r&&(this.page.data.benefits_invite_buyer_rate=a)}}},L=F,D=Object(_["a"])(L,K,V,!1,null,null,null),N=D.exports,E={name:"Page",components:{ItemsPage:S,LingquPage:A,DataPage:N},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"专享产品"},{key:"lingqu",tab:"购买记录"},{key:"data",tab:"新人专享设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},G=E,M=Object(_["a"])(G,r,n,!1,null,null,null);t["default"]=M.exports},e45a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["list"===e.noTitleKey?a("List-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],c=a("2af9"),u=a("63b6"),d={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"baoxiang"},columns:[{title:"用户",dataIndex:"member.user_name",width:300},{title:"积分",dataIndex:"points"},{title:"现金",dataIndex:"money"},{title:"时间",dataIndex:"created_at",width:150}],loadData:function(t){return Object(u["b"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},m=d,p=a("2877"),f=Object(p["a"])(m,o,l,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"宝箱积分活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.baoxiang.status,callback:function(t){e.$set(e.page.baoxiang,"status",t)},expression:"page.baoxiang.status"}})],1),a("a-form-item",{attrs:{label:"最小积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_points",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['min_points', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最小积分")])])],1),a("a-form-item",{attrs:{label:"最大积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_points",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['max_points', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最大积分")])])],1),a("a-form-item",{attrs:{label:"抽奖间隔时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["time",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['time', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每过"+e._s(e.page.baoxiang.time)+"秒可以重新抽奖)")])])],1),a("a-form-item",{attrs:{label:"宝箱红包活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.baoxiang.status_money,callback:function(t){e.$set(e.page.baoxiang,"status_money",t)},expression:"page.baoxiang.status_money"}})],1),a("a-form-item",{attrs:{label:"最小积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['min_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最小红包(最小值可以设置0.0001)")])])],1),a("a-form-item",{attrs:{label:"最大积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['max_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最大红包(红包最大值不限制)")])])],1),a("a-form-item",{attrs:{label:"抽奖间隔时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["time_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['time_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每过"+e._s(e.page.baoxiang.time_money)+"秒可以重新抽奖)")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},b=[],v=a("5530"),y=(a("b0c0"),a("88bc")),w=a.n(y),_=a("ac0d"),C=a("5880"),x={mixins:[_["b"],_["c"]],components:{},computed:Object(v["a"])({},Object(C["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{baoxiang:{status:!1,status_money:!1,time:0,time_money:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(u["d"])({type:"baoxiang"}).then((function(a){a.data.item&&e.$nextTick((function(){var r=w()(a.data.item,["min_points","max_points","time","min_money","max_money","time_money"]);t(r),e.page.baoxiang.status=1===a.data.item.status,e.page.baoxiang.status_money=1===a.data.item.status_money,e.page.baoxiang.time=a.data.item.time,e.page.baoxiang.time_money=a.data.item.time_money}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(u["f"])(Object.assign(a,{type:"baoxiang",status:t.page.baoxiang.status,status_money:t.page.baoxiang.status_money})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"time"===r?this.page.baoxiang.time=a:"time_money"===r&&(this.page.baoxiang.time_money=a)}}},k=x,q=Object(p["a"])(k,g,b,!1,null,null,null),P=q.exports,S={name:"Page",components:{ListPage:h,DataPage:P},data:function(){return{noTitleKey:"list",tabListNoTitle:[{key:"list",tab:"开奖记录"},{key:"data",tab:"宝箱设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},j=S,O=Object(p["a"])(j,r,n,!1,null,null,null);t["default"]=O.exports},fc51:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"kanjia"===e.noTitleKey?a("kanjia-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=(a("0d03"),a("c32d")),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布砍价商品")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.goods.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"images",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.goods.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"times",fn:function(t,r){return[a("p",[e._v(e._s(r.start_time))]),a("p",[e._v(e._s(r.end_time))])]}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],c=a("2af9"),u=a("63b6"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布商品",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{attrs:{message:"",description:"注意提示： 用户获取的总砍价=佣金*单次砍价佣金比例*砍价次数",type:"info"}}),a("div",[a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:""}]}],expression:"['num_iid', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"单次砍价佣金比例",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{rules:[{required:!0,message:""}]}],expression:"['commission_rate', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"砍价人数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["members",{rules:[{required:!0,message:"不能为空"}]}],expression:"['members', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time",{rules:[{required:!0,message:""}]}],expression:"['start_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time",{rules:[{required:!0,message:""}]}],expression:"['end_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("提交发布")])],1)],2)},m=[],p=a("88bc"),f=a.n(p),h={name:"EditModal",components:{},data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:""}},methods:{edit:function(e){this.visible=!0;var t=this.form.setFieldsValue;this.$nextTick((function(){var a=f()(e,["num_iid","commission_rate","members","start_time","end_time"]);e.start_time&&(a.start_time=i()(e.start_time),a.end_time=i()(e.end_time)),t(a)}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.start_time&&(a.start_time=i()(a.start_time).format("YYYY-MM-DD HH:mm:ss")),a.end_time&&(a.end_time=i()(a.end_time).format("YYYY-MM-DD HH:mm:ss")),Object(u["e"])(Object.assign(a,{type:"kanjia"})).then((function(t){var r=t||{},n=r.code;0===n&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$emit("ok",a),e.visible=!1})))}))},handleCancel:function(){this.visible=!1}}},g=h,b=a("2877"),v=Object(b["a"])(g,d,m,!1,null,null,null),y=v.exports,w={name:"Brand",components:{STable:c["o"],EditModal:y,Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"kanjia"},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:50},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"images"}},{title:"销量",dataIndex:"goods.volume",width:50},{title:"单次砍比例",dataIndex:"commission_rate",width:100},{title:"砍价人数",dataIndex:"members",width:80},{title:"时间",dataIndex:"",width:180,scopedSlots:{customRender:"times"}},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(u["a"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){this.$refs.modal.edit(e)}}},_=w,C=Object(b["a"])(_,o,l,!1,null,null,null),x=C.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.goods.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"images",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.goods.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},q=[],P={name:"Brand",components:{STable:c["o"],Ellipsis:c["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{type:"kanjia"},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"images"}},{title:"分享人",dataIndex:"member.user_name",width:100},{title:"参与人次",dataIndex:"invites",width:100},{title:"时间",dataIndex:"created_at",width:160}],loadData:function(t){return Object(u["c"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},S=P,j=Object(b["a"])(S,k,q,!1,null,null,null),O=j.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"全场活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.kanjia.status,callback:function(t){e.$set(e.page.kanjia,"status",t)},expression:"page.kanjia.status"}})],1),a("a-form-item",{attrs:{label:"客服微信",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weixin",{rules:[{required:!1,message:""}]}],expression:"['weixin', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("方便用户联系的微信客服帐号")])])],1),a("a-form-item",{attrs:{label:"砍价人数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["members",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['members', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每个商品需要砍价人数")])])],1),a("a-form-item",{attrs:{label:"砍一次金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['commission_rate', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的佣金百分比")])])],1),a("a-form-item",{attrs:{label:"免单模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money1",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money1', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的最小金额")])])],1),a("a-form-item",{attrs:{label:"免单模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money2",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money2', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的最大金额")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},T=[],I=a("5530"),A=(a("b0c0"),a("ac0d")),K=a("5880"),V={mixins:[A["b"],A["c"]],components:{},computed:Object(I["a"])({},Object(K["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{kanjia:{status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(u["d"])({type:"kanjia"}).then((function(a){a.data.item&&e.$nextTick((function(){var r=f()(a.data.item,["weixin","members","commission_rate","money1","money2"]);t(r),e.page.kanjia.status=1===a.data.item.status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(u["f"])(Object.assign(a,{type:"kanjia",status:t.page.kanjia.status})).then((function(e){var a=e||{},r=a.code;0===r&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logo_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},R=V,F=Object(b["a"])(R,$,T,!1,null,null,null),L=F.exports,D={name:"Page",components:{ItemsPage:x,KanjiaPage:O,DataPage:L},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"推荐产品"},{key:"kanjia",tab:"发起砍价记录"},{key:"data",tab:"砍价设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},N=D,E=Object(b["a"])(N,r,n,!1,null,null,null);t["default"]=E.exports}}]);