(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["market"],{"0be9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/guang/list",getView:"/api/user/market/guang/view",updateItem:"/api/user/market/guang/update"};function m(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getView,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var h={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"用户",dataIndex:"member_name",render:function(e,t){return e("div",[e("strong",t.row.member.user_name)])}},{title:"积分",dataIndex:"points",width:100},{title:"时间",dataIndex:"create_date",width:100}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},g=h,b=a("2877"),v=Object(b["a"])(g,o,l,!1,null,null,null),y=v.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.guang.status,callback:function(t){e.$set(e.page.guang,"status",t)},expression:"page.guang.status"}})],1),a("a-form-item",{attrs:{label:"积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["points",{rules:[{required:!1,message:""}]}],expression:"['points', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每次奖励积分")])])],1),a("a-form-item",{attrs:{label:"每日次数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["day_times",{rules:[{required:!1,message:""}]}],expression:"['day_times', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每天最大奖励次数")])])],1),a("a-form-item",{attrs:{label:"中奖几率",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["views",{rules:[{required:!1,message:""}]}],expression:"['views', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每次浏览"+e._s(e.page.guang.views)+"个产品，获取一次中奖机会，0代表无法中奖")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},_=[],k=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),C=a("88bc"),x=a.n(C),O=a("ac0d"),q=a("5880");function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(k["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={mixins:[O["b"],O["c"]],components:{},computed:j({},Object(q["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{guang:{status:!1,views:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;p().then((function(a){a.data.item&&e.$nextTick((function(){var r=x()(a.data.item,["points","views","day_times"]);t(r),e.page.guang.status=1===a.data.item.status,e.page.guang.views=a.data.item.views}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||f(Object.assign(a,{status:t.page.guang.status})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"views"===r&&(this.page.guang.views=a)}}},I=S,$=Object(b["a"])(I,w,_,!1,null,null,null),D=$.exports,T={name:"Page",components:{ItemsPage:y,DataPage:D},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"逛记录"},{key:"data",tab:"设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},A=T,V=Object(b["a"])(A,r,n,!1,null,null,null);t["default"]=V.exports},1336:function(e,t,a){"use strict";a.d(t,"m",(function(){return s})),a.d(t,"h",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"j",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return m})),a.d(t,"k",(function(){return p})),a.d(t,"l",(function(){return f})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"d",(function(){return b}));var r=a("b775"),n={updateCms:"/api/user/cms/site/update",getCmsView:"/api/user/cms/site/view",updateCmsData:"/api/user/cms/data/update",getCmsDataView:"/api/user/cms/data/view",getCmsGenerate:"/api/user/cms/domain/generate",getDomainItems:"/api/user/cms/domain/list",getDomainItems2:"/api/user/cms/domain/list2",updateDomain:"/api/user/cms/domain/update_sub",updateDomain2:"/api/user/cms/domain/update_self",delDomainItems:"/api/user/cms/domain/deleteSub",delDomainItems2:"/api/user/cms/domain/deleteSelf",updatePid:"/api/user/cms/pid/update",getPidView:"/api/user/cms/pid/view"};function s(e){return Object(r["b"])({url:n.updatePid,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.getPidView,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.updateCms,method:"post",data:e})}function l(e){return Object(r["b"])({url:n.getCmsView,method:"post",data:e})}function u(e){return Object(r["b"])({url:n.updateCmsData,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.getCmsDataView,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.getDomainItems,method:"post",data:e})}function m(e){return Object(r["b"])({url:n.getDomainItems2,method:"post",data:e})}function p(e){return Object(r["b"])({url:n.updateDomain,method:"post",data:e})}function f(e){return Object(r["b"])({url:n.updateDomain2,method:"post",data:e})}function h(e){return Object(r["b"])({url:n.delDomainItems,method:"post",data:e})}function g(e){return Object(r["b"])({url:n.delDomainItems2,method:"post",data:e})}function b(e){return Object(r["b"])({url:n.getCmsGenerate,method:"post",data:e})}},2181:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1,title:"单品分享"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布商品")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"price",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/?coupon=1&q="+encodeURIComponent("https://detail.tmall.com/item.htm?id="+r.num_iid)}},[e._v(e._s(t))])]}},{key:"status",fn:function(t){return a("span",{},[a("a-badge",{attrs:{status:e._f("statusTypeFilter")(t),text:e._f("statusFilter")(t)}})],1)}},{key:"income",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:4,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},n=[],s=a("c32d"),i=a.n(s),o=a("2af9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布商品",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['num_iid', {rules: [{required: true, message: '请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:""},on:{change:e.changeImg}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.haopintui.net/api/common/upload/upload",data:{member_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传\n            ")],1)],1),e.previewImg?a("img",{staticClass:"previewImg",attrs:{src:e.previewImg}}):e._e(),e.picList&&e.picList.length>0?a("div",{staticClass:"pics"},[a("p",[e._v("主图参考")]),a("ul",e._l(e.picList,(function(t,r){return a("li",{key:r,on:{click:function(a){return e.setPic(t)}}},[a("img",{attrs:{src:t}})])})),0)]):e._e()],1),a("a-form-item",{attrs:{label:"文案",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入文案"}]}],expression:"['content', {rules: [{required: true, message: '请输入文案'}]}]"}],attrs:{rows:4}}),e.wenItems&&e.wenItems.length>0?a("div",{staticClass:"wenan"},[a("p",[e._v("备选文案")]),a("ul",e._l(e.wenItems,(function(t,r){return a("li",{key:r,on:{click:function(a){return e.setContent(t)}}},[e._v(e._s(r+1)+"."+e._s(t.content))])})),0)]):e._e()],1)],1)])],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit()}}},[e._v("提交发布")])],1)],2)},u=[],d=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),c=a("88bc"),m=a.n(c),p=a("c104"),f=a("b775"),h={getItems:"/api/user/market/zhuan/list",getView:"/api/user/market/zhuan/view",updateItem:"/api/user/market/zhuan/update",updateItemStatus:"/api/user/market/zhuan/updateStatus"};function g(e){return Object(f["b"])({url:h.getItems,method:"post",data:e})}function b(e){return Object(f["b"])({url:h.updateItem,method:"post",data:e})}var v=a("2934"),y=a("5880");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(d["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={name:"EditModal",components:{},computed:_({},Object(y["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",cats:[],wenItems:[],picList:[],previewImg:""}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},created:function(){this.init()},methods:{init:function(){var e=this;Object(v["c"])().then((function(t){t.data.items&&(e.cats=t.data.items)}))},edit:function(e){var t=this;this.visible=!0;var a=this.form.setFieldsValue;this.$nextTick((function(){e.id?a(m()(e,["id","href","num_iid","pic_url","content"])):(t.form.resetFields(),t.wenItems=[],t.picList=[]),t.fetchGoodsInfoPreview()}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:b(Object.assign(a,{})).then((function(t){0===t.info.status&&(1===status?e.$message.success("提交成功"):e.$message.success("保存成功"),e.$emit("ok",a),e.visible=!1),e.confirmLoading=!1}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(p["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&(e.$nextTick((function(){t(m()(a.data.goods,["id","href","num_iid","pic_url","content"]))})),e.wenItems=a.data.goods.wenItems||[],e.picList=a.data.goods.picList||[]),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this;Object(p["d"])({href:this.form.getFieldsValue().href}).then((function(t){t.data.goods&&(e.wenItems=t.data.goods.wenItems||[],e.picList=t.data.goods.picList||[])}))},handleCancel:function(){this.visible=!1},setContent:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({content:e.content})}))},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeValue:function(e){var t=e.target.value;this.href=t},changeImg:function(e){var t=e.target.value;this.previewImg=t}}},C=k,x=(a("3df9"),a("2877")),O=Object(x["a"])(C,l,u,!1,null,"09475f68",null),q=O.exports,P={name:"Page",components:{STable:o["o"],Ellipsis:o["f"],EditModal:q},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",width:200,scopedSlots:{customRender:"name"}},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"介绍",dataIndex:"content"},{title:"销量",dataIndex:"goods.volume",width:80},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],loadData:function(t){return g(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){e.num_iid&&(e.href="https://detail.tmall.com/item.htm?id="+e.num_iid),this.$refs.modal.edit(e)}}},j=P,S=Object(x["a"])(j,r,n,!1,null,null,null);t["default"]=S.exports},2934:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o}));var r=a("b775"),n={list:"/api/common/channel/items",getGoodsItems:"/api/common/goods/list",getGoodsView:"/api/common/goods/view"};function s(e){return Object(r["b"])({url:n.getGoodsView,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.getGoodsItems,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.list,method:"post",data:e})}},"2b00":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["business"===e.noTitleKey?a("Business-page"):"material"===e.noTitleKey?a("Material-page"):"course"===e.noTitleKey?a("Course-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({classes:"business"})}}},[e._v("发布")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/quan/list",getView:"/api/user/market/quan/view",updateItem:"/api/user/market/quan/update",updateGoods:"/api/user/market/quan/update_goods",updateStatus:"/api/user/market/quan/updateStatus"};function m(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"编辑",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["classes",{rules:[{required:!1}]}],expression:"['classes', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{style:{display:"material"==e.page.quan.classes?"":"none"},attrs:{label:"分类",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:1,rules:[{required:!1}]}],expression:"[ 'type',{initialValue: 1,rules: [{ required : false }]} ]"}],staticStyle:{width:"120px"}},[a("a-select-option",{attrs:{value:1}},[e._v("招商素材")]),a("a-select-option",{attrs:{value:2}},[e._v("地摊素材")]),a("a-select-option",{attrs:{value:3}},[e._v("心灵鸡汤")]),a("a-select-option",{attrs:{value:4}},[e._v("朋友圈互动")])],1)],1),a("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"不能为空"}]}],expression:"['title', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"不能为空"}]}],expression:"['content', {rules: [{required: true, message: '不能为空'}]}]"}],attrs:{rows:4}})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.haopintui.net/api/common/upload/upload",data:{member_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传\n            ")],1)],1)],1),a("a-form-item",{attrs:{label:"视频",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["video_url",{rules:[{required:!0,message:""}]}],expression:"['video_url', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"定时发布时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["show_time",{rules:[{required:!0,message:"不能为空"}]}],expression:"['show_time', {rules: [{required: true, message: '不能为空'}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("当前时间之后才会显示")])])],1)],1)])],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("保存")])],1)],2)},h=[],g=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),b=a("88bc"),v=a.n(b),y=a("5880");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(g["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={name:"EditModal",components:{},computed:_({},Object(y["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",page:{quan:{classes:""}}}},methods:{edit:function(e){var t=this;this.visible=!0;var a=this.form.setFieldsValue;this.$nextTick((function(){if(e.id){var r=v()(e,["id","classes","type","title","content","pic_url","video_url","show_time"]);e.show_time&&(r.show_time=i()(e.show_time)),a(r)}else{t.form.resetFields();var n=v()(e,["classes"]);a(n)}t.page.quan.classes=e.classes}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.show_time&&(a.show_time=i()(a.show_time).format("YYYY-MM-DD HH:mm:ss")),p(a).then((function(t){var r=t||{},n=r.info;0===(n||{}).status&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$emit("ok",a),e.visible=!1})))}))},handleCancel:function(){this.visible=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},C=k,x=a("2877"),O=Object(x["a"])(C,f,h,!1,null,null,null),q=O.exports,P={name:"Brand",components:{STable:u["o"],EditModal:q,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{classes:"business"},columns:[{title:"显示时间",dataIndex:"show_time"},{title:"标题",dataIndex:"title",width:200},{title:"内容",dataIndex:"content"},{title:"图片",width:150,dataIndex:"pic_url",scopedSlots:{customRender:"image"}},{title:"操作",width:150,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){this.$refs.modal.edit(e)}}},j=P,S=Object(x["a"])(j,o,l,!1,null,null,null),I=S.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({classes:"new"})}}},[e._v("发布")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},D=[],T={name:"Brand",components:{STable:u["o"],EditModal:q,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{classes:"new"},columns:[{title:"显示时间",dataIndex:"show_time"},{title:"标题",dataIndex:"title",width:200},{title:"内容",dataIndex:"content"},{title:"图片",width:150,dataIndex:"pic_url",scopedSlots:{customRender:"image"}},{title:"操作",width:150,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){this.$refs.modal.edit(e)}}},A=T,V=Object(x["a"])(A,$,D,!1,null,null,null),L=V.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({classes:"material"})}}},[e._v("发布")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},R=[],F={name:"Brand",components:{STable:u["o"],EditModal:q,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{classes:"material"},columns:[{title:"显示时间",dataIndex:"show_time"},{title:"标题",dataIndex:"title",width:200},{title:"内容",dataIndex:"content"},{title:"图片",width:150,dataIndex:"pic_url",scopedSlots:{customRender:"image"}},{title:"操作",width:150,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){this.$refs.modal.edit(e)}}},N=F,E=Object(x["a"])(N,K,R,!1,null,null,null),M=E.exports,G={name:"Page",components:{BusinessPage:I,MaterialPage:M,CoursePage:L},data:function(){return{noTitleKey:"material",tabListNoTitle:[{key:"material",tab:"营销素材"},{key:"course",tab:"新手教程"},{key:"business",tab:"商学院"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},Y=G,z=Object(x["a"])(Y,r,n,!1,null,null,null);t["default"]=z.exports},"3df9":function(e,t,a){"use strict";var r=a("8cff"),n=a.n(r);n.a},"48a8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["share"===e.noTitleKey?a("Share-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={list:"/api/user/market/share/list",view:"/api/user/market/share/view",update:"/api/user/market/share/update"};function m(e){return Object(d["b"])({url:c.list,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.view,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.update,method:"post",data:e})}var h={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"平台",width:150,dataIndex:"platform",scopedSlots:{customRender:"platformName"}},{title:"分享人",width:100,dataIndex:"member.user_name"},{title:"时间",width:160,dataIndex:"create_date"}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},g=h,b=a("2877"),v=Object(b["a"])(g,o,l,!1,null,null,null),y=v.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"分享奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.share.share_status,callback:function(t){e.$set(e.page.share,"share_status",t)},expression:"page.share.share_status"}})],1),a("a-form-item",{attrs:{label:"奖励范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["share_range",{rules:[{required:!1}]}],expression:"[ 'share_range',{rules: [{ required : false }]} ]"}],staticStyle:{width:"400px"}},[a("a-select-option",{attrs:{value:0}},[e._v("朋友圈分享奖励")]),a("a-select-option",{attrs:{value:1}},[e._v("微信群分享奖励")]),a("a-select-option",{attrs:{value:3}},[e._v("朋友圈、微信群分享奖励")])],1)],1),a("a-form-item",{attrs:{label:"现金奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("元")])])],1),a("a-form-item",{attrs:{label:"积分奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["point",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['point', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("积分")])])],1),a("a-form-item",{attrs:{label:"奖励浏览条件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["views",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['views', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("次(每个用户每天分享能得"+e._s(e.form.day_times)+"次奖励，超过后分享没有奖励了)")])])],1),a("a-form-item",{attrs:{label:"每日奖励限制",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["day_times",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['day_times', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"800px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("次(每个用户每天分享能得"+e._s(e.form.day_times)+"次奖励，超过后分享没有奖励了)")])])],1),a("a-form-item",{attrs:{label:"分享独立域名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["invite_url",{rules:[{required:!1,message:""}]}],expression:"['invite_url', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"800px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("不填写使用官方默认，如果填写域名需要先cname解析到 share.youdanhui.com")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},_=[],k=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),C=a("88bc"),x=a.n(C),O=a("ac0d"),q=a("5880");function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(k["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={mixins:[O["b"],O["c"]],components:{},computed:j({},Object(q["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{share:{share_status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;p().then((function(a){a.data.item&&e.$nextTick((function(){var r=x()(a.data.item,["share_range","money","point","views","day_times","invite_url"]);t(r),e.page.share.share_status=1===a.data.item.share_status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||f(Object.assign(a,{share_status:t.page.share.share_status})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},I=S,$=Object(b["a"])(I,w,_,!1,null,null,null),D=$.exports,T={name:"Page",components:{SharePage:y,DataPage:D},data:function(){return{noTitleKey:"share",tabListNoTitle:[{key:"share",tab:"分享明细"},{key:"data",tab:"分享设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},A=T,V=Object(b["a"])(A,r,n,!1,null,null,null);t["default"]=V.exports},"4ad9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["topic"===e.noTitleKey?a("Topic-page"):"items"===e.noTitleKey?a("Items-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/topic/list",getView:"/api/user/market/topic/view",updateItem:"/api/user/market/topic/update",getItemsGoods:"/api/user/market/topic/topic_items",updateGoods:"/api/user/market/topic/update_goods",updateStatus:"/api/user/market/topic/updateStatus"};function m(e){return Object(d["b"])({url:c.updateGoods,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getItemsGoods,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function h(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var g={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"所属专题",dataIndex:"topic.name",width:100}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},b=g,v=a("2877"),y=Object(v["a"])(b,o,l,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布专题")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"actionTopic",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleGoodsManage(r)}}},[e._v("商品管理")]):e._e()]],2)}},{key:"action",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleTopicEdit(r)}}},[e._v("编辑")]):e._e()]],2)}}])}),a("topic-modal",{ref:"modal",on:{ok:e.query}}),a("goods-modal",{ref:"modalGoods",on:{ok:e.query}})],1)},k=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布专题",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["classes",{rules:[{required:!1}]}],expression:"['classes', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"专题名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""}]}],expression:"['name', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"内容",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0}]}],expression:"['content', {rules: [{required: true}]}]"}],attrs:{rows:4}})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.haopintui.net/api/common/upload/upload",data:{member_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传\n            ")],1)],1)],1)],1)])],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit()}}},[e._v("保存")])],1)],2)},x=[],O=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),q=a("88bc"),P=a.n(q),j=a("5880");function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){Object(O["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={name:"EditModal",components:{},computed:I({},Object(j["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",page:{classes:""}}},methods:{edit:function(e){this.visible=!0;var t=this.form.setFieldsValue;this.$nextTick((function(){var a=P()(e,["id","name","content","pic_url"]);t(a)}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:h(a).then((function(t){var r=t||{},n=r.info;0===(n||{}).status&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$emit("ok",a),e.visible=!1}))}))},handleCancel:function(){this.visible=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},D=$,T=Object(v["a"])(D,C,x,!1,null,null,null),A=T.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"专题商品管理",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!1}]}],expression:"['num_iid', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"不能为空"}]}],expression:"['title', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"原价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"不能为空"}]}],expression:"['price', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pic_url",{rules:[{required:!1,message:""}]}],expression:"['pic_url', {rules: [{ required: false, message: '' }]} ]"}],attrs:{placeholder:"**"}}),a("a-upload",{attrs:{name:"file",multiple:!0,action:"https://www.haopintui.net/api/common/upload/upload",data:{member_token:e.token},beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传\n          ")],1)],1),e.previewImg?a("img",{staticClass:"previewImg",attrs:{src:e.previewImg}}):e._e(),e.picList&&e.picList.length>0?a("div",{staticClass:"pics"},[a("p",[e._v("主图参考")]),a("ul",e._l(e.picList,(function(t,r){return a("li",{key:r,on:{click:function(a){return e.setPic(t)}}},[a("img",{attrs:{src:t}})])})),0)]):e._e()],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("保存")])],1)],1)],1),a("template",{slot:"footer"},[a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[1!=r.status&&2!=r.status?a("a",{on:{click:function(t){return e.handleGoodsEdit(r)}}},[e._v("编辑")]):e._e()]],2)}}])})],1)],2)},L=[],K=a("c104");function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){Object(O["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={name:"EditModal",components:{STable:u["o"],Ellipsis:u["f"]},computed:F({},Object(j["mapGetters"])(["token"])),data:function(){var e=this;return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",picList:[],previewImg:"",queryParam:{topic_id:0},page:{classes:""},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"操作",dataIndex:"",width:150,scopedSlots:{customRender:"action"}}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))}}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},methods:{edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.form.resetFields(),t.queryParam.topic_id=e.id,t.$refs.table.refresh(!0)}))},handleGoodsEdit:function(e){var t=this,a=this.form.setFieldsValue;this.$nextTick((function(){if(e.id){e.num_iid&&(e.href="https://detail.tmall.com/item.htm?id="+e.num_iid);var r=P()(e,["id","href","num_iid","title","price","pic_url"]);a(r)}else t.form.resetFields();t.picList=[],t.fetchGoodsInfoPreview()}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:m(Object.assign(a,{topic_id:e.queryParam.topic_id})).then((function(t){var a=t||{},r=a.info;0===(r||{}).status&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$refs.table.refresh(!0),e.handleGoodsEdit({})}))}))},handleCancel:function(){this.visible=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(K["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&(e.$nextTick((function(){t(P()(a.data.goods,["href","num_iid","title","price","pic_url"]))})),e.wenItems=a.data.goods.wenItems||[],e.picList=a.data.goods.picList||[]),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this;this.form.getFieldsValue().href&&Object(K["d"])({href:this.form.getFieldsValue().href}).then((function(t){t.data.goods&&(e.picList=t.data.goods.picList||[])}))},changeValue:function(e){var t=e.target,a=t.value,r=t.id;"href"===r&&(this.href=a)},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeImg:function(e){var t=e.target.value;this.previewImg=t}}},E=N,M=(a("a844"),Object(v["a"])(E,V,L,!1,null,"7490c229",null)),G=M.exports,Y={name:"Brand",components:{STable:u["o"],TopicModal:A,GoodsModal:G,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"name",width:200},{title:"内容",dataIndex:"content"},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"商品数量",dataIndex:"count",width:100},{title:"商品管理",dataIndex:"",width:80,align:"center",scopedSlots:{customRender:"actionTopic"}},{title:"操作",width:150,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return f(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleGoodsManage:function(e){this.$refs.modalGoods.edit(e)},handleTopicEdit:function(e){this.$refs.modal.edit(e)}}},z=Y,B=Object(v["a"])(z,_,k,!1,null,null,null),U=B.exports,H={name:"Page",components:{ItemsPage:w,TopicPage:U},data:function(){return{noTitleKey:"topic",tabListNoTitle:[{key:"topic",tab:"专题"},{key:"items",tab:"专题商品明细"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},W=H,J=Object(v["a"])(W,r,n,!1,null,null,null);t["default"]=J.exports},"4d01":function(e,t,a){},"6dad":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1,title:"淘礼金管理"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"商品id"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.num_iid,callback:function(t){e.$set(e.queryParam,"num_iid",t)},expression:"queryParam.num_iid"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"创建时间"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-radio-group",{on:{change:e.query},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-radio-button",{attrs:{value:"all"}},[e._v("全部")]),a("a-radio-button",{attrs:{value:"1"}},[e._v("审核中")])],1),a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},on:{search:function(t){return e.$refs.table.refresh(!0)}},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"30px"}},[a("a-button",{attrs:{type:"primary",icon:"new"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("创建活动")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.app_id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"goodslink",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[e._v(e._s(t))])]}},{key:"money",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://uland.taobao.com/quan/detail?sellerId="+r.user_num_id+"&activityId="+r.activity_id}},[e._v("查看")])]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"status",fn:function(t){return a("span",{},[a("a-badge",{attrs:{status:e._f("statusTypeFilter")(t),text:e._f("statusFilter")(t)}})],1)}},{key:"income",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:4,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleDetail(r)}}},[e._v("领取详情")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}}),a("view-modal",{ref:"view"})],1)},n=[],s=a("c32d"),i=a.n(s),o=a("2af9"),l=a("b775"),u={getItems:"/api/user/market/tlj/list",getView:"/api/user/market/tlj/view",getReport:"/api/user/market/tlj/report",updateItem:"/api/user/market/tlj/update",getAppkeyItems:"/api/user/market/appkey/list",getAppkeyView:"/api/user/market/appkey/view",updateAppkeyItem:"/api/user/market/appkey/update"};function d(e){return Object(l["b"])({url:u.updateAppkeyItem,method:"post",data:e})}function c(e){return Object(l["b"])({url:u.getAppkeyItems,method:"post",data:e})}function m(e){return Object(l["b"])({url:u.getReport,method:"post",data:e})}function p(e){return Object(l["b"])({url:u.getItems,method:"post",data:e})}function f(e){return Object(l["b"])({url:u.updateItem,method:"post",data:e})}var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"创建活动",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("div",[e.page.appkey.create_err?a("div",[e._v(e._s(e.page.appkey.create_err))]):e._e(),a("a-form-item",{attrs:{label:"选择appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{staticStyle:{width:"320px"},on:{change:e.handleChange},model:{value:e.page.appkey.appkey,callback:function(t){e.$set(e.page.appkey,"appkey",t)},expression:"page.appkey.appkey"}},[a("a-select-option",{attrs:{value:""}},[e._v("选择")]),e._l(e.page.appkeyList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v("\n              "+e._s(t.app_key)+"\n            ")])}))],2),a("span",{staticStyle:{padding:"8px",cursor:"pointer"},on:{click:e.createAppkey}},[a("a-icon",{attrs:{type:"plus"},on:{click:e.createAppkey}}),e._v(" 创建一个\n          ")],1)],1),a("a-form-item",{attrs:{label:"AppKey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_key",{rules:[{required:!0,message:"不能为空"}]}],expression:"['app_key', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"420px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("查看获取方法")]),e._v(",应用App Key,必须是有权限的应用")])])],1),a("a-form-item",{attrs:{label:"AppSecret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_secret",{rules:[{required:!0,message:"不能为空"}]}],expression:"['app_secret', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"620px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("查看获取方法")]),e._v(",应用App Secret,必须是有权限的应用")])])],1),a("a-form-item",{attrs:{label:"推广位ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["adzone_id",{rules:[{required:!0,message:"不能为空"}]}],expression:"['adzone_id', {rules: [{required: true, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("查看获取方法")]),e._v(",appkey对应的网站推广位PID的最后一段,如红色部分:mm_00000_00000_"),a("font",{attrs:{color:"red"}},[e._v("00000")])],1)])],1),a("a-divider"),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:"不能为空"}]}],expression:"['num_iid', {rules: [{required: true, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("要生成淘礼金的商品ID,是一个组纯数字")])])],1),a("a-form-item",{attrs:{label:"淘礼金名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"不能为空"}]}],expression:"['name', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"620px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("淘礼金名称，最大10个字符")])])],1),a("a-form-item",{attrs:{label:"领取时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["send_start_time",{rules:[{type:"object",required:!0,message:"不能为空"}]}],expression:"['send_start_time', {rules: [{ type: 'object', required: true, message: '不能为空' }]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD 00:00:00"}}),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("淘礼金可以领取的开始时间")])],1),a("a-form-item",{attrs:{label:" ",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["send_end_time",{rules:[{type:"object",required:!0,message:"不能为空"}]}],expression:"['send_end_time', {rules: [{ type: 'object', required: true, message: '不能为空' }]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD 00:00:00"}}),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("淘礼金可以领取的结束时间, 不含当天")])],1),a("a-form-item",{attrs:{label:"结束日期的模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{staticStyle:{width:"320px"},model:{value:e.page.appkey.use_end_time_mode,callback:function(t){e.$set(e.page.appkey,"use_end_time_mode",t)},expression:"page.appkey.use_end_time_mode"}},[a("a-select-option",{attrs:{value:1}},[e._v("相对时间(从用户领取后开始计算可用时间)")]),a("a-select-option",{attrs:{value:2}},[e._v("绝对时间 (指定使用时间范围,结束时间含当天)")])],1)],1),a("a-form-item",{style:{display:1==e.page.appkey.use_end_time_mode?"none":""},attrs:{label:"使用日期",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["use_start_time",{rules:[{type:"object",required:!1,message:"不能为空"}]}],expression:"['use_start_time', {rules: [{ type: 'object', required: false, message: '不能为空' }]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD"}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("开始日期。格式 yyyy-MM-dd，例如，2019-01-29，表示从2019-01-29 00:00:00 开始")])],1),a("a-form-item",{style:{display:1==e.page.appkey.use_end_time_mode?"none":""},attrs:{label:" ",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["use_end_time",{rules:[{type:"object",required:!1,message:"不能为空"}]}],expression:"['use_end_time', {rules: [{ type: 'object', required: false, message: '不能为空' }]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD"}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("结束日期。格式为yyyy-MM-dd，例如，2019-01-29，表示到2019-01-29 23:59:59结束")])],1),a("a-form-item",{style:{display:2==e.page.appkey.use_end_time_mode?"none":""},attrs:{label:"领取后的使用天数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["use_days",{initialValue:1,rules:[{required:!1,message:"不能为空"}]}],expression:"['use_days', {initialValue: 1,rules: [{required: false, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("如果是结束时间模式为相对时间，时间格式为1-7直接的整数, 例如，1（相对领取时间1天）")])])],1),a("a-form-item",{attrs:{label:"面额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["per_face",{rules:[{required:!0,message:"不能为空"}]}],expression:"['per_face', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"380px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("单个淘礼金面额,支持小数后一位,单位元")])])],1),a("a-form-item",{attrs:{label:"个数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["total_num",{rules:[{required:!0,message:"不能为空"}]}],expression:"['total_num', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"380px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("淘礼金总个数")])])],1),a("a-form-item",{attrs:{label:"单用户可领个数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_total_win_num_limit",{initialValue:1,rules:[{required:!0,message:"不能为空"}]}],expression:"['user_total_win_num_limit', {initialValue: 1,rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"380px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("单用户最多可领个数,最小为1")])])],1),a("a-form-item",{attrs:{label:"佣金计划类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["campaign_type",{initialValue:"MKT",rules:[{required:!0,message:"不能为空"}]}],expression:"[ 'campaign_type', {initialValue:'MKT',rules: [{ required : true, message: '不能为空' }]} ]"}],staticStyle:{width:"120px"}},[a("a-select-option",{attrs:{value:"DX"}},[e._v("定向")]),a("a-select-option",{attrs:{value:"LINK_EVENT"}},[e._v("鹊桥")]),a("a-select-option",{attrs:{value:"MKT"}},[e._v("营销")])],1)],1)],1)])],1),a("template",{slot:"footer"},[a("div",[a("p",[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit(1)}}},[e._v("生成淘礼金")])],1)])]),a("a-modal",{attrs:{title:"Appkey管理",visible:e.page.appkey.visible,width:960},on:{cancel:e.handleAppkeyCancel}},[a("a-spin",{attrs:{spinning:e.page.appkey.confirmLoading}},[a("a-form",{ref:"formAppkey",attrs:{form:e.formAppkey}},[a("div",[a("a-form-item",{attrs:{label:"Appkey",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_key",{rules:[{required:!0,message:""}]}],expression:"['app_key', {rules: [{required: true, message: ''}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("点击查看获取方法")]),e._v("应用App Key,必须是有权限的应用\n              ")])])],1),a("a-form-item",{attrs:{label:"Appsecret",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_secret",{rules:[{required:!0,message:"不能为空"}]}],expression:"['app_secret', {rules: [{required: true, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("点击查看获取方法")]),e._v("应用App Key,必须是有权限的应用\n              ")])])],1),a("a-form-item",{attrs:{label:"推广位ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["adzone_id",{rules:[{required:!0,message:"不能为空"}]}],expression:"['adzone_id', {rules: [{required: true, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("查看获取方法")]),e._v("appkey对应的网站推广位PID的最后一段,如红色部分:mm_00000_00000_"),a("font",{attrs:{color:"red"}},[e._v("00000")])],1)])],1),a("a-form-item",{attrs:{label:"渠道关系ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["relation_id",{rules:[{required:!1,message:"不能为空"}]}],expression:"['relation_id', {rules: [{required: false, message: '不能为空'}]}]"}]},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[a("a",{attrs:{target:"_blank",href:"https://www.haopintui.net/article/6"}},[e._v("查看获取方法")]),e._v("使用渠道关系ID时推广位ID必须使用专属渠道PID的最后一段\n              ")])])],1),a("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["comment",{rules:[{required:!1,message:""}]}],expression:"[ 'comment', {rules: [{ required: false, message: '' }]} ]"}],attrs:{rows:"4",placeholder:""}})],1)],1)])],1),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:e.page.appkey.confirmLoading,block:""},on:{click:function(t){return e.handleAppkeySubmit()}}},[e._v("创建")])],1)],2)],2)},g=[],b=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),v=a("88bc"),y=a.n(v),w=a("c104"),_=a("5880");function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(b["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x,O,q={name:"EditModal",components:{VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},computed:C({},Object(_["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",wenItems:[],picList:[],previewImg:"",page:{appkeyList:[],appkey:{create_err:"",use_end_time_mode:1,appkey:"",visible:!1,confirmLoading:!1}},formAppkey:this.$form.createForm(this)}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},created:function(){this.init()},methods:{init:function(){this.queryAppkey()},queryAppkey:function(){var e=this;c().then((function(t){t.data.items&&(e.page.appkeyList=t.data.items)}))},edit:function(e){var t=this;this.visible=!0;var a=this.form.setFieldsValue;this.$nextTick((function(){e.id?a(y()(e,["href","num_iid"])):(t.form.resetFields(),e.href&&a(y()(e,["href"]))),t.fetchGoodsInfoPreview()}))},handleSubmit:function(e){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(e,a){e?t.confirmLoading=!1:(a.send_start_time&&(a.send_start_time=i()(a.send_start_time).format("YYYY-MM-DD 00:00:00")),a.send_end_time&&(a.send_end_time=i()(a.send_end_time).format("YYYY-MM-DD 00:00:00")),a.use_start_time&&(a.use_start_time=i()(a.use_start_time).format("YYYY-MM-DD")),a.use_end_time&&(a.use_end_time=i()(a.use_end_time).format("YYYY-MM-DD")),f(Object.assign(a,{use_end_time_mode:t.page.appkey.use_end_time_mode})).then((function(e){0===e.info.status&&(t.$message.success("创建成功"),t.$emit("ok",a),t.visible=!1),t.confirmLoading=!1})))}))},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(w["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&e.$nextTick((function(){t(y()(a.data.goods,["href","num_iid"]))})),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this,t=this.form.setFieldsValue;Object(w["d"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&e.$nextTick((function(){t(y()(a.data.goods,["href","num_iid"]))}))}))},handleCancel:function(){this.visible=!1},setContent:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({comment:e.content})}))},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeValue:function(e){var t=e.target.value;this.href=t},changeImg:function(e){var t=e.target.value;this.previewImg=t},handleChange:function(e){var t=this.form.setFieldsValue;if(""!==e){var a=this.page.appkeyList[parseInt(e)];t(y()(a,["app_key","app_secret","adzone_id"]))}},handleAppkeyCancel:function(){this.page.appkey.visible=!1},createAppkey:function(){this.page.appkey.visible=!0,this.formAppkey.resetFields()},handleAppkeySubmit:function(){var e=this,t=this.formAppkey.validateFields;this.page.appkey.confirmLoading=!0,t((function(t,a){t?e.page.appkey.confirmLoading=!1:d(Object.assign(a,{})).then((function(t){0===t.info.status?(e.$message.success("创建成功"),e.queryAppkey(),e.page.appkey.visible=!1):e.page.appkey.create_err=t.info.status_err,e.page.appkey.confirmLoading=!1}))}))}}},P=q,j=a("2877"),S=Object(j["a"])(P,h,g,!1,null,null,null),I=S.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"淘礼金详情",width:720,visible:e.visible,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:e.onClose}},[a("detail-list",{attrs:{col:2,title:"基础信息"}},[a("detail-list-item",{attrs:{term:"淘礼金名称"}},[e._v(e._s(e.page.data.name))]),a("detail-list-item",{attrs:{term:""}}),a("detail-list-item",{attrs:{term:"CPS佣金计划类型"}},["DX"==e.page.data.campaign_type?a("span",[e._v("定向")]):e._e(),"LINK_EVENT"==e.page.data.campaign_type?a("span",[e._v("鹊桥")]):e._e(),"MKT"==e.page.data.campaign_type?a("span",[e._v("营销")]):e._e()]),a("detail-list-item",{attrs:{term:"妈妈广告位Id"}},[e._v(e._s(e.page.data.adzone_id))]),a("detail-list-item",{attrs:{term:"宝贝id"}},[e._v(e._s(e.page.data.num_iid))]),a("detail-list-item",{attrs:{term:"淘礼金总个数"}},[e._v(e._s(e.page.data.total_num))]),a("detail-list-item",{attrs:{term:"单用户累计中奖次数上限"}},[e._v(e._s(e.page.data.user_total_win_num_limit))]),a("detail-list-item",{attrs:{term:"淘礼金面额"}},[e._v(e._s(e.page.data.per_face))]),a("detail-list-item",{attrs:{term:"发放开始时间"}},[e._v(e._s(e.page.data.send_start_time))]),a("detail-list-item",{attrs:{term:"发放截止时间"}},[e._v(e._s(e.page.data.send_end_time))]),a("detail-list-item",{attrs:{term:"结束日期的模式"}},[1==e.page.data.use_end_time_mode?a("span",[e._v("相对时间")]):e._e(),2==e.page.data.use_end_time_mode?a("span",[e._v("绝对时间")]):e._e()]),2==e.page.data.use_end_time_mode?a("detail-list-item",{attrs:{term:"使用开始日期"}},[e._v(e._s(e.page.data.use_start_time))]):e._e(),2==e.page.data.use_end_time_mode?a("detail-list-item",{attrs:{term:"使用结束日期"}},[e._v(e._s(e.page.data.use_end_time))]):e._e(),1==e.page.data.use_end_time_mode?a("detail-list-item",{attrs:{term:"可使用天数"}},[e._v(e._s(e.page.data.use_days))]):e._e(),a("detail-list-item",{attrs:{term:"淘礼金id"}},[e._v(e._s(e.page.data.send_id))]),a("detail-list-item",{attrs:{term:"淘礼金链接"}},[e._v(e._s(e.page.data.send_url))])],1),a("detail-list",{attrs:{title:"统计信息"}},[a("detail-list-item",{attrs:{term:"解冻金额"}},[e._v(e._s(e.page.data.model.unfreeze_amount))]),a("detail-list-item",{attrs:{term:"解冻红包个数"}},[e._v(e._s(e.page.data.model.unfreeze_num))]),a("detail-list-item",{attrs:{term:"失效回退金额"}},[e._v(e._s(e.page.data.model.refund_amount))]),a("detail-list-item",{attrs:{term:"失效回退红包个数"}},[e._v(e._s(e.page.data.model.refund_num))]),a("detail-list-item",{attrs:{term:"引导成交金额"}},[e._v(e._s(e.page.data.model.alipay_amount))]),a("detail-list-item",{attrs:{term:"红包核销金额"}},[e._v(e._s(e.page.data.model.use_amount))]),a("detail-list-item",{attrs:{term:"红包核销个数"}},[e._v(e._s(e.page.data.model.use_num))]),a("detail-list-item",{attrs:{term:"红包领取金额"}},[e._v(e._s(e.page.data.model.win_amount))]),a("detail-list-item",{attrs:{term:"红包领取个数"}},[e._v(e._s(e.page.data.model.win_num))]),a("detail-list-item",{attrs:{term:"引导预估佣金金额"}},[e._v(e._s(e.page.data.model.pre_commission_amount))]),a("detail-list-item",{attrs:{term:"退款红包金额"}},[e._v(e._s(e.page.data.model.fp_refund_amount))]),a("detail-list-item",{attrs:{term:"退款红包个数"}},[e._v(e._s(e.page.data.model.fp_refund_num))])],1)],1)},D=[],T=a("fa43"),A=T["a"],V=A,L=Object(j["a"])(V,x,O,!1,null,null,null),K=L.exports,R=K.Item,F={components:{DetailList:K,DetailListItem:R},data:function(){return{form:this.$form.createForm(this),visible:!1,page:{data:{model:{}}}}},methods:{showDrawer:function(){this.visible=!0},onClose:function(){this.visible=!1},view:function(e){this.visible=!0,this.page.data=e}}},N=F,E=Object(j["a"])(N,$,D,!1,null,null,null),M=E.exports,G={name:"Page",components:{STable:o["o"],EditModal:I,ViewModal:M,Ellipsis:o["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"名称",dataIndex:"name"},{title:"商品id",width:100,dataIndex:"num_iid"},{title:"CPS佣金计划类型",width:100,dataIndex:"campaign_type"},{title:"商品id",width:100,dataIndex:"单用户累计中奖次数上限"},{title:"面额",width:100,dataIndex:"per_face"},{title:"妈妈广告位Id",width:100,dataIndex:"adzone_id"},{title:"淘礼金Id",width:100,dataIndex:"send_id"},{title:"发放开始时间",width:100,dataIndex:"send_start_time"},{title:"发放截止时间",width:100,dataIndex:"send_end_time"},{title:"结束日期的模式",width:100,dataIndex:"use_end_time_mode"},{title:"使用开始日期",width:100,dataIndex:"use_start_time"},{title:"创建时间",width:160,dataIndex:"create_date"},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1,page:{query:{href:""}}}},mounted:function(){this.$route.query.href&&(this.page.query.href=this.$route.query.href,this.page.query.edit=!0),this.init()},methods:{moment:i.a,init:function(){this.page.query.edit&&this.$refs.modal.edit({href:this.page.query.href})},handleDetail:function(e){var t=this;m({id:e.id}).then((function(e){t.$refs.view.view(e.data.item)}))},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},Y=G,z=Object(j["a"])(Y,r,n,!1,null,null,null);t["default"]=z.exports},"88bc":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,n="[object Arguments]",s="[object Function]",i="[object GeneratorFunction]",o="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")();function c(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,r=e?e.length:0,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}function p(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var f=Object.prototype,h=f.hasOwnProperty,g=f.toString,b=d.Symbol,v=f.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function _(e,t,a,r,n){var s=-1,i=e.length;a||(a=O),n||(n=[]);while(++s<i){var o=e[s];t>0&&a(o)?t>1?_(o,t-1,a,r,n):p(n,o):r||(n[n.length]=o)}return n}function k(e,t){return e=Object(e),C(e,t,(function(t,a){return a in e}))}function C(e,t,a){var r=-1,n=t.length,s={};while(++r<n){var i=t[r],o=e[i];a(o,i)&&(s[i]=o)}return s}function x(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,n=w(a.length-t,0),s=Array(n);while(++r<n)s[r]=a[t+r];r=-1;var i=Array(t+1);while(++r<t)i[r]=a[r];return i[t]=s,c(e,this,i)}}function O(e){return j(e)||P(e)||!!(y&&e&&e[y])}function q(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function P(e){return I(e)&&h.call(e,"callee")&&(!v.call(e,"callee")||g.call(e)==n)}var j=Array.isArray;function S(e){return null!=e&&D(e.length)&&!$(e)}function I(e){return A(e)&&S(e)}function $(e){var t=T(e)?g.call(e):"";return t==s||t==i}function D(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}function V(e){return"symbol"==typeof e||A(e)&&g.call(e)==o}var L=x((function(e,t){return null==e?{}:k(e,m(_(t,1),q))}));e.exports=L}).call(this,a("c8ba"))},"8cff":function(e,t,a){},"91b7":function(e,t,a){"use strict";var r=a("4d01"),n=a.n(r);n.a},"9b93":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["lingqu"===e.noTitleKey?a("Lingqu-page"):"share"===e.noTitleKey?a("Share-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/hongbao/list",getView:"/api/user/market/hongbao/view",getItemsShare:"/api/user/market/hongbao/list_share",updateItem:"/api/user/market/hongbao/update"};function m(e){return Object(d["b"])({url:c.getItemsShare,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.getView,method:"post",data:e})}function h(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var g={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"分享人",dataIndex:"member_name",width:100,render:function(e,t){return e("div",[e("strong",t.row.from_member?t.row.member.user_name:"")])}},{title:"连接",dataIndex:"url"},{title:"时间",dataIndex:"create_date",width:100}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},b=g,v=a("2877"),y=Object(v["a"])(b,o,l,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},k=[],C={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"用户",dataIndex:"member.user_name"},{title:"领取金额",dataIndex:"money",width:100},{title:"分享人",dataIndex:"from_member.user_name"},{title:"时间",dataIndex:"create_date",width:160}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},x=C,O=Object(v["a"])(x,_,k,!1,null,null,null),q=O.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.hongbao.status,callback:function(t){e.$set(e.page.hongbao,"status",t)},expression:"page.hongbao.status"}})],1),a("a-form-item",{attrs:{label:"最小奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_money",{rules:[{required:!1,message:""}]}],expression:"['min_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("最小随机奖励")])])],1),a("a-form-item",{attrs:{label:"最大奖励",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_money",{rules:[{required:!1,message:""}]}],expression:"['max_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("最大随机奖励")])])],1),a("a-form-item",{attrs:{label:"中奖次数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["allow_times",{rules:[{required:!1,message:""}]}],expression:"['allow_times', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每个用户允许"+e._s(e.page.hongbao.allow_times)+"次领奖")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},j=[],S=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),I=a("88bc"),$=a.n(I),D=a("ac0d"),T=a("5880");function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(S["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={mixins:[D["b"],D["c"]],components:{},computed:V({},Object(T["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{hongbao:{allow_times:0,status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;f().then((function(a){a.data.item&&e.$nextTick((function(){var r=$()(a.data.item,["min_money","max_money","allow_times"]);t(r),e.page.hongbao.allow_times=a.data.item.allow_times,e.page.hongbao.status=1===a.data.item.status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||h(Object.assign(a,{status:t.page.hongbao.status})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"allow_times"===r&&(this.page.hongbao.allow_times=a)}}},K=L,R=Object(v["a"])(K,P,j,!1,null,null,null),F=R.exports,N={name:"Page",components:{SharePage:w,LingquPage:q,DataPage:F},data:function(){return{noTitleKey:"lingqu",tabListNoTitle:[{key:"lingqu",tab:"领取记录"},{key:"share",tab:"分享记录"},{key:"data",tab:"设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},E=N,M=Object(v["a"])(E,r,n,!1,null,null,null);t["default"]=M.exports},"9d2f":function(e,t,a){},a844:function(e,t,a){"use strict";var r=a("9d2f"),n=a.n(r);n.a},c104:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return m}));var r=a("b775"),n={list:"/api/user/business/goods/list",getReport:"/api/user/business/goods/report",view:"/api/user/business/goods/view",fetchGoodsInfo:"/api/user/business/goods/fetchGoodsInfo",fetchGoodsInfoEx:"/api/user/business/goods/fetchGoodsInfoEx",fetchGoodsCoupon:"/api/user/business/goods/fetchGoodsCoupon",fetchContent:"/api/user/business/goods/fetchContent",update:"/api/user/business/goods/update",updateStatus:"/api/user/business/goods/status"};function s(e){return Object(r["b"])({url:n.getReport,method:"post",data:e})}function i(e){return Object(r["b"])({url:n.fetchContent,method:"post",data:e})}function o(e){return Object(r["b"])({url:n.fetchGoodsCoupon,method:"post",data:e})}function l(e){return Object(r["b"])({url:n.list,method:"post",data:e})}function u(e){return Object(r["b"])({url:n.update,method:"post",data:e})}function d(e){return Object(r["b"])({url:n.fetchGoodsInfo,method:"post",data:e})}function c(e){return Object(r["b"])({url:n.fetchGoodsInfoEx,method:"post",data:e})}function m(e){return Object(r["b"])({url:n.updateStatus,method:"post",data:e})}},c8d6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["miandan"===e.noTitleKey?a("Miandan-page"):"data"===e.noTitleKey?a("Data-page"):"duihuan"===e.noTitleKey?a("Duihuan-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.pic_url}})])]}},{key:"actionTuijian",fn:function(t,r){return a("span",{},[[0===r.miandan_status?a("a",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleUpdate(r,1)}}},[e._v("设置推荐")]):a("a",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleUpdate(r,-1)}}},[e._v("取消推荐\n        ")])]],2)}},{key:"action",fn:function(t,r){return a("span",{},[[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/miandan/list",getItemsSale:"/api/user/market/miandan/list_sale",getItemsCode:"/api/user/market/miandan/list_code",getView:"/api/user/market/miandan/view",deleteGoods:"/api/user/market/miandan/deleteGoods",updateGoods:"/api/user/market/miandan/updateGoods",getViewTuijian:"/api/user/market/miandan/tuijianGoods",updateItem:"/api/user/market/miandan/update"};function m(e){return Object(d["b"])({url:c.updateGoods,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.deleteGoods,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.getItemsCode,method:"post",data:e})}function h(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function g(e){return Object(d["b"])({url:c.getView,method:"post",data:e})}function b(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var v={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title"},{title:"优惠券",dataIndex:"money",width:100},{title:"价格",dataIndex:"price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"销量",dataIndex:"volume",width:80},{title:"佣金",dataIndex:"commission",width:80},{title:"佣金比例",dataIndex:"commission_rate",width:100},{title:"预估成本",dataIndex:"",width:100,customRender:function(e,t){return(t.coupon_price-t.commission).toFixed(2)}},{title:"推荐",dataIndex:"",width:100,scopedSlots:{customRender:"actionTuijian"}},{title:"操作",dataIndex:"",width:80,scopedSlots:{customRender:"action"}}],loadData:function(t){return h(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleUpdate:function(e,t){var a=this;m({num_iid:e.num_iid,status:t}).then((function(e){a.$refs.table.refresh(!0)}))},handleDelete:function(e){var t=this;this.$confirm({title:"提示",content:"真的要删除么 ?",onOk:function(){p({num_iid:e.num_iid}).then((function(e){t.$refs.table.refresh(!0)}))},onCancel:function(){}})}}},y=v,w=a("2877"),_=Object(w["a"])(y,o,l,!1,null,null,null),k=_.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},x=[],O={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"兑换码",dataIndex:"code",width:200},{title:"时间",dataIndex:"create_date",width:200},{title:"操作",width:160,dataIndex:"",scopedSlots:{customRender:"action"}}],loadData:function(t){return f(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},q=O,P=Object(w["a"])(q,C,x,!1,null,null,null),j=P.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{staticStyle:{display:"none"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!1,message:""}]}],expression:"['pid', {rules: [{required: false, message: ''}]}]"}],staticStyle:{}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("用户拍免单商品，佣金记录pid广告位")])])],1),a("a-form-item",{staticStyle:{display:"none"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["visits",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['visits', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{}}),e._v(">\n    ")],1),a("a-form-item",{attrs:{label:"免单活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.miandan.status,callback:function(t){e.$set(e.page.miandan,"status",t)},expression:"page.miandan.status"}})],1),a("a-form-item",{attrs:{label:"客服微信",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weixin",{rules:[{required:!0,message:"不能为空"}]}],expression:"['weixin', {rules: [{required: true, message: '不能为空'}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("用于免单联系的微信客服帐号")])])],1),a("a-form-item",{attrs:{label:"新用户奖励次数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member_times",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['member_times', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("新注册的用户赠送的免单活动次数")])])],1),a("a-form-item",{attrs:{label:"积分兑换",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["points",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['points', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("个("+e._s(e.page.miandan.points)+"个积分兑换一次免单机会，0代表不开启兑换奖励)")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},I=[],$=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),D=a("88bc"),T=a.n(D),A=a("ac0d"),V=a("5880");function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object($["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={mixins:[A["b"],A["c"]],components:{},computed:K({},Object(V["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{miandan:{status:!0,points:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;g().then((function(a){a.data.item&&e.$nextTick((function(){var r=T()(a.data.item,["weixin","member_times","points","pid","visits"]);t(r),e.page.miandan.points=a.data.item.points,e.page.miandan.status=1===a.data.item.status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||b(Object.assign(a,{status:t.page.miandan.status})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"points"===r&&(this.page.miandan.points=a)}}},F=R,N=Object(w["a"])(F,S,I,!1,null,null,null),E=N.exports,M={name:"Page",components:{MiandanPage:k,DuihuanPage:j,DataPage:E},data:function(){return{noTitleKey:"miandan",tabListNoTitle:[{key:"miandan",tab:"免单商品"},{key:"data",tab:"免单设置"},{key:"duihuan",tab:"免单兑换"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},G=M,Y=Object(w["a"])(G,r,n,!1,null,null,null);t["default"]=Y.exports},d357:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"lingqu"===e.noTitleKey?a("Lingqu-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"statusName",fn:function(t,r){return[1===r.status?a("span",{staticStyle:{color:"#0e932e"}},[e._v("上架")]):a("span",[e._v("下架")])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handleUpdate(r,1)}}},[e._v("上架")]):a("a",{on:{click:function(t){return e.handleUpdate(r,0)}}},[e._v("下架")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("goods-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/vip/list",getView:"/api/user/market/vip/view",updateItem:"/api/user/market/vip/update",getItemsLog:"/api/user/market/vip/list_log",getItemsQuery:"/api/user/market/vip/list_query",updateItemStatus:"/api/user/market/vip/updateStatus"};function m(e){return Object(d["b"])({url:c.getItemsLog,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布商品",width:980,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{attrs:{type:"error",message:"注意提示： 成交价百分比优先于佣金百分比，例：设置了成交百分比，佣金比例就无效，（固定返利金额优先级别最高）"}}),a("div",[a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1}]}],expression:"['id', {rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{staticStyle:{display:"none"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["inventory",{initialValue:0,rules:[{required:!1}]}],expression:"['inventory', {initialValue: 0,rules: [{required: false}]}]"}],attrs:{type:"hidden"}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["href",{rules:[{required:!0,message:"请输入地址"}]}],expression:"['href', {rules: [{required: true, message: '请输入地址'}]}]"}],on:{change:e.changeValue}},[a("a-button",{attrs:{slot:"addonAfter",type:"link",icon:"search",size:"small"},on:{click:e.fetchGoodsInfo},slot:"addonAfter"},[e._v("获取")])],1)],1),a("a-form-item",{attrs:{label:"详情",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("span",[e._v("原价:"+e._s(e.page.vip.ori_price))]),a("span",[e._v("券后价:"+e._s(e.page.vip.coupon_price))]),a("span",[e._v("购买成本价:"+e._s(e.page.vip.buy_base_price))]),e.page.vip.price>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price-e.page.vip.price).toFixed(2)))]):e.page.vip.price_rate>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price*(100-e.page.vip.price_rate)/100).toFixed(2)))]):e.page.vip.commission_rate>0?a("span",{staticStyle:{color:"red"}},[e._v("用户最终价格:"+e._s((e.page.vip.coupon_price-e.page.vip.commission*e.page.vip.commission_rate/100).toFixed(2)))]):e._e()]),a("a-form-item",{attrs:{label:"开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time",{rules:[{required:!0,message:""}]}],expression:"['start_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time",{rules:[{required:!0,message:""}]}],expression:"['end_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['num_iid', {rules: [{required: true, message: '请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"佣金百分比",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{initialValue:0,rules:[{required:!0,message:"请输入标题"}]}],expression:"['commission_rate', {initialValue: 0,rules: [{required: true, message: '请输入标题'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"成交价百分比",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_rate",{initialValue:0,rules:[{required:!0,message:"请输入短标题"}]}],expression:"['price_rate', {initialValue: 0,rules: [{required: true, message: '请输入短标题'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"返利固定金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:0,rules:[{required:!1,message:"请输入原价格"}]}],expression:"['price', {initialValue: 0,rules: [{required: false, message: '请输入原价格'}]}]"}],on:{change:e.change}})],1),a("a-form-item",{attrs:{label:"商品类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{rules:[{required:!1,message:""}]}],expression:"[ 'recommend',{rules: [{ required : false , message: ''}]} ]"}],staticStyle:{width:"120px"}},[a("a-select-option",{attrs:{value:0}},[e._v("默认")]),a("a-select-option",{attrs:{value:2}},[e._v("优质商品")]),a("a-select-option",{attrs:{value:1}},[e._v("便宜实用")]),a("a-select-option",{attrs:{value:3}},[e._v("0元领取")]),a("a-select-option",{attrs:{value:4}},[e._v("1元购物")])],1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("div",[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary",block:""},on:{click:function(t){return e.handleSubmit(1)}}},[e._v("提交发布")])],1)])],2)},g=[],b=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),v=a("88bc"),y=a.n(v),w=a("c104"),_=a("2934"),k=a("5880");function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(b["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={name:"EditModal",components:{},computed:x({},Object(k["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:"",href:"",cats:[],wenItems:[],picList:[],previewImg:"",page:{vip:{ori_price:0,coupon_price:0,buy_base_price:0,price:0,price_rate:0,commission_rate:0,commission:0}}}},watch:{href:function(e){this.fetchGoodsInfoPreview()}},created:function(){this.init()},methods:{init:function(){var e=this;Object(_["c"])().then((function(t){t.data.items&&(e.cats=t.data.items)}))},edit:function(e){var t=this;this.visible=!0;var a=this.form.setFieldsValue;this.$nextTick((function(){if(e.id){var r=y()(e,["id","recommend","inventory","href","num_iid","start_time","end_time","commission_rate","price_rate","price"]);r.start_time=i()(e.start_time),r.end_time=i()(e.end_time),a(r)}else t.form.resetFields();t.fetchGoodsInfo(),t.fetchGoodsInfoPreview()}))},handleSubmit:function(e){var t=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,r){a?t.confirmLoading=!1:(r.start_time&&(r.start_time=i()(r.start_time).format("YYYY-MM-DD HH:mm:ss")),r.end_time&&(r.end_time=i()(r.end_time).format("YYYY-MM-DD HH:mm:ss")),f(Object.assign(r,{submitStatus:e})).then((function(a){0===a.info.status&&(1===e?t.$message.success("提交成功"):t.$message.success("保存成功"),t.$emit("ok",r),t.visible=!1),t.confirmLoading=!1})))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({pic_url:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},fetchGoodsInfo:function(){var e=this,t=this.form.setFieldsValue;Object(w["c"])({href:this.form.getFieldsValue().href}).then((function(a){a.data.goods&&(e.$nextTick((function(){var e=y()(a.data.goods,["id","href","num_iid"]);e.start_time=i()(a.data.goods.start_time),e.end_time=i()(a.data.goods.end_time),t(e)})),e.page.vip.ori_price=a.data.goods.ori_price,e.page.vip.coupon_price=a.data.goods.coupon_price,e.page.vip.buy_base_price=a.data.goods.buy_base_price,e.page.vip.commission=a.data.goods.commission,e.wenItems=a.data.goods.wenItems||[],e.picList=a.data.goods.picList||[]),e.confirmLoading=!1}))},fetchGoodsInfoPreview:function(){var e=this;Object(w["d"])({href:this.form.getFieldsValue().href}).then((function(t){t.data.goods&&(e.wenItems=t.data.goods.wenItems||[],e.picList=t.data.goods.picList||[])}))},handleCancel:function(){this.visible=!1},setContent:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({comment:e.content})}))},setPic:function(e){var t=this.form.setFieldsValue;this.$nextTick((function(){t({pic_url:e})})),this.previewImg=e},changeValue:function(e){var t=e.target.value;this.href=t},changeImg:function(e){var t=e.target.value;this.previewImg=t},change:function(){this.page.vip.price=this.form.getFieldValue("price"),this.page.vip.price_rate=this.form.getFieldValue("price_rate"),this.page.vip.commission_rate=this.form.getFieldValue("commission_rate")}}},q=O,P=(a("91b7"),a("2877")),j=Object(P["a"])(q,h,g,!1,null,"0ebf3a74",null),S=j.exports,I={name:"Brand",components:{STable:u["o"],GoodsModal:S,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"领取量",dataIndex:"draws",width:60},{title:"库存限制",dataIndex:"inventory",width:60},{title:"是否营销库",dataIndex:"marketTypeName",width:60,customRender:function(e,t){return"1"===t.goods.material_lib_type?"是":"否"}},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"销量",dataIndex:"goods.volume",width:60},{title:"佣金比例",dataIndex:"commission_rate",width:60},{title:"成交价比例",dataIndex:"price_rate",width:60},{title:"状态",dataIndex:"",width:60,scopedSlots:{customRender:"statusName"}},{title:"活动开始时间",dataIndex:"start_time",width:120,align:"center"},{title:"活动结束时间",dataIndex:"end_time",width:120,align:"center"},{title:"操作",dataIndex:"",width:120,scopedSlots:{customRender:"action"}}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleUpdate:function(e,t){var a=this;f({num_iid:e.num_iid,status:t}).then((function(e){a.$refs.table.refresh(!0)}))},handleEdit:function(e){e.num_iid&&(e.href="https://detail.tmall.com/item.htm?id="+e.num_iid),this.$refs.modal.edit(e)}}},$=I,D=Object(P["a"])($,o,l,!1,null,null,null),T=D.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(r.goods.title))])],1)]}},{key:"image",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},V=[],L={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:60},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"image"}},{title:"返利比例",dataIndex:"commission_rate",width:60},{title:"成交价比例",dataIndex:"price_rate",width:100,render:function(e,t){return e("div",[e("span",{},t.row.price_rate+"%")])}},{title:"购买人",dataIndex:"member.user_name",width:100},{title:"订单号",dataIndex:"trade_id",width:100},{title:"时间",dataIndex:"create_date",width:130}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},K=L,R=Object(P["a"])(K,A,V,!1,null,null,null),F=R.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"全场活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits",{rules:[{required:!1,message:""}]}],expression:"['benefits', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"200px"}},[a("a-select-option",{attrs:{value:0}},[e._v("限定商品")]),a("a-select-option",{attrs:{value:1}},[e._v("全场限价")])],1)],1),a("a-form-item",{attrs:{label:"限定价格",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_money",{rules:[{required:!1,message:""}]}],expression:"['benefits_money', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("不超过这个价格")])])],1),a("a-form-item",{attrs:{label:"佣金筛选",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_commission",{rules:[{required:!1,message:""}]}],expression:"['benefits_commission', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("超过这个佣金")])])],1),a("a-form-item",{attrs:{label:"邀请单用户抵消金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_invite_price",{rules:[{required:!1,message:""}]}],expression:"['benefits_invite_price', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("邀请一个用户能抵消的免单商品金额")])])],1),a("a-form-item",{attrs:{label:"邀请单app客户端用户抵消金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_invite_client_price",{rules:[{required:!1,message:""}]}],expression:"['benefits_invite_client_price', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("邀请一个app客户端用户能抵消的免单商品金额")])])],1),a("a-form-item",{attrs:{label:"有效用户",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["benefits_invite_buyer_rate",{rules:[{required:!1,message:""}]}],expression:"['benefits_invite_buyer_rate', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"600px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("邀请用户中，下单用户比例数,需要大于（"+e._s(e.page.data.benefits_invite_buyer_rate)+"%）")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},E=[],M=a("1336"),G=a("ac0d");function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){Object(b["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={mixins:[G["b"],G["c"]],components:{},computed:z({},Object(k["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},form:this.$form.createForm(this),page:{data:{benefits_invite_buyer_rate:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;Object(M["c"])().then((function(a){a.data.item&&e.$nextTick((function(){t(y()(a.data.item,["benefits","benefits_money","benefits_commission","benefits_invite_price","benefits_invite_client_price","benefits_invite_buyer_rate"])),e.page.data.benefits_invite_buyer_rate=a.data.item.benefits_invite_buyer_rate}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||Object(M["j"])(Object.assign(a,{page_view:"benefits"})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"benefits_invite_buyer_rate"===r&&(this.page.data.benefits_invite_buyer_rate=a)}}},U=B,H=Object(P["a"])(U,N,E,!1,null,null,null),W=H.exports,J={name:"Page",components:{ItemsPage:T,LingquPage:F,DataPage:W},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"专享产品"},{key:"lingqu",tab:"购买记录"},{key:"data",tab:"新人专享设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},X=J,Q=Object(P["a"])(X,r,n,!1,null,null,null);t["default"]=Q.exports},e45a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:r.url}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"platformName",fn:function(t,r){return["WechatTimeLine"==r.platform?a("span",[e._v("朋友圈")]):e._e(),"WechatSession"==r.platform?a("span",[e._v("群好友")]):e._e()]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/baoxiang/list",getView:"/api/user/market/baoxiang/view",updateItem:"/api/user/market/baoxiang/update"};function m(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getView,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var h={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"用户",dataIndex:"member.user_name",width:300},{title:"积分",dataIndex:"points"},{title:"现金",dataIndex:"money"},{title:"时间",dataIndex:"create_date",width:150}],loadData:function(t){return m(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},g=h,b=a("2877"),v=Object(b["a"])(g,o,l,!1,null,null,null),y=v.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"宝箱积分活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.baoxiang.status,callback:function(t){e.$set(e.page.baoxiang,"status",t)},expression:"page.baoxiang.status"}})],1),a("a-form-item",{attrs:{label:"最小积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_points",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['min_points', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最小积分")])])],1),a("a-form-item",{attrs:{label:"最大积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_points",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['max_points', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最大积分")])])],1),a("a-form-item",{attrs:{label:"抽奖间隔时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["time",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['time', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每过"+e._s(e.page.baoxiang.time)+"秒可以重新抽奖)")])])],1),a("a-form-item",{attrs:{label:"宝箱红包活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.baoxiang.status_money,callback:function(t){e.$set(e.page.baoxiang,"status_money",t)},expression:"page.baoxiang.status_money"}})],1),a("a-form-item",{attrs:{label:"最小积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["min_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['min_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最小红包(最小值可以设置0.0001)")])])],1),a("a-form-item",{attrs:{label:"最大积分",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["max_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['max_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("抽中最大红包(红包最大值不限制)")])])],1),a("a-form-item",{attrs:{label:"抽奖间隔时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["time_money",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['time_money', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"},on:{change:e.changgeValue}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每过"+e._s(e.page.baoxiang.time_money)+"秒可以重新抽奖)")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},_=[],k=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),C=a("88bc"),x=a.n(C),O=a("ac0d"),q=a("5880");function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(k["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={mixins:[O["b"],O["c"]],components:{},computed:j({},Object(q["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{baoxiang:{status:!1,status_money:!1,time:0,time_money:0}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;p().then((function(a){a.data.item&&e.$nextTick((function(){var r=x()(a.data.item,["min_points","max_points","time","min_money","max_money","time_money"]);t(r),e.page.baoxiang.status=1===a.data.item.status,e.page.baoxiang.status_money=1===a.data.item.status_money,e.page.baoxiang.time=a.data.item.time,e.page.baoxiang.time_money=a.data.item.time_money}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||f(Object.assign(a,{status:t.page.baoxiang.status,status_money:t.page.baoxiang.status_money})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a},changgeValue:function(e){var t=e.target,a=t.value,r=t.id;"time"===r?this.page.baoxiang.time=a:"time_money"===r&&(this.page.baoxiang.time_money=a)}}},I=S,$=Object(b["a"])(I,w,_,!1,null,null,null),D=$.exports,T={name:"Page",components:{ItemsPage:y,DataPage:D},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"开奖记录"},{key:"data",tab:"宝箱设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},A=T,V=Object(b["a"])(A,r,n,!1,null,null,null);t["default"]=V.exports},fc51:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"30px 0px"},bordered:!1,tabList:e.tabListNoTitle,activeTabKey:e.noTitleKey},on:{tabChange:function(t){return e.handleTabChange(t,"noTitleKey")}}},["items"===e.noTitleKey?a("Items-page"):"kanjia"===e.noTitleKey?a("kanjia-page"):"data"===e.noTitleKey?a("Data-page"):e._e()],1)},n=[],s=a("c32d"),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"20px"}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.modal.edit({})}}},[e._v("发布砍价商品")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.goods.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"images",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.goods.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"times",fn:function(t,r){return[a("p",[e._v(e._s(r.start_time))]),a("p",[e._v(e._s(r.end_time))])]}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]],2)}}])}),a("edit-modal",{ref:"modal",on:{ok:e.query}})],1)},l=[],u=a("2af9"),d=a("b775"),c={getItems:"/api/user/market/kanjia/list",getItemsShare:"/api/user/market/kanjia/list_share",getView:"/api/user/market/kanjia/view",getViewGoods:"/api/user/market/kanjia/viewGoods",updateItemGoods:"/api/user/market/kanjia/updateGoods",updateItemStatus:"/api/user/market/kanjia/updateStatus",updateItem:"/api/user/market/kanjia/update"};function m(e){return Object(d["b"])({url:c.updateItemGoods,method:"post",data:e})}function p(e){return Object(d["b"])({url:c.getItemsShare,method:"post",data:e})}function f(e){return Object(d["b"])({url:c.getItems,method:"post",data:e})}function h(e){return Object(d["b"])({url:c.getView,method:"post",data:e})}function g(e){return Object(d["b"])({url:c.updateItem,method:"post",data:e})}var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"发布商品",width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{attrs:{message:"",description:"注意提示： 用户获取的总砍价=佣金*单次砍价佣金比例*砍价次数",type:"info"}}),a("div",[a("a-form-item",{attrs:{label:"商品id",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num_iid",{rules:[{required:!0,message:""}]}],expression:"['num_iid', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"单次砍价佣金比例",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{rules:[{required:!0,message:""}]}],expression:"['commission_rate', {rules: [{required: true, message: ''}]}]"}]})],1),a("a-form-item",{attrs:{label:"砍价人数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["members",{rules:[{required:!0,message:"不能为空"}]}],expression:"['members', {rules: [{required: true, message: '不能为空'}]}]"}]})],1),a("a-form-item",{attrs:{label:"开始时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time",{rules:[{required:!0,message:""}]}],expression:"['start_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1),a("a-form-item",{attrs:{label:"结束时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time",{rules:[{required:!0,message:""}]}],expression:"['end_time', {rules: [{required: true, message: ''}]}]"}],attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1)],1)],1)],1),a("template",{slot:"footer"},[a("a-button",{key:"forward",attrs:{loading:e.confirmLoading,type:"primary"},on:{click:function(t){return e.handleSubmit()}}},[e._v("提交发布")])],1)],2)},v=[],y=a("88bc"),w=a.n(y),_={name:"EditModal",components:{},data:function(){return{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},visible:!1,confirmLoading:!1,mdl:{},form:this.$form.createForm(this),content:""}},methods:{edit:function(e){this.visible=!0;var t=this.form.setFieldsValue;this.$nextTick((function(){var a=w()(e,["num_iid","commission_rate","members","start_time","end_time"]);e.start_time&&(a.start_time=i()(e.start_time),a.end_time=i()(e.end_time)),t(a)}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(a.start_time&&(a.start_time=i()(a.start_time).format("YYYY-MM-DD HH:mm:ss")),a.end_time&&(a.end_time=i()(a.end_time).format("YYYY-MM-DD HH:mm:ss")),m(a).then((function(t){var r=t||{},n=r.info;0===(n||{}).status&&e.$message.success("保存成功"),e.confirmLoading=!1,e.$emit("ok",a),e.visible=!1})))}))},handleCancel:function(){this.visible=!1}}},k=_,C=a("2877"),x=Object(C["a"])(k,b,v,!1,null,null,null),O=x.exports,q={name:"Brand",components:{STable:u["o"],EditModal:O,Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:50},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"images"}},{title:"销量",dataIndex:"goods.volume",width:50},{title:"单次砍比例",dataIndex:"commission_rate",width:100},{title:"砍价人数",dataIndex:"members",width:80},{title:"时间",dataIndex:"",width:180,scopedSlots:{customRender:"times"}},{title:"操作",dataIndex:"action",width:"120px",scopedSlots:{customRender:"action"}}],loadData:function(t){return f(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},handleEdit:function(e){this.$refs.modal.edit(e)}}},P=q,j=Object(C["a"])(P,o,l,!1,null,null,null),S=j.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"提现日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{ranges:{"今日":[e.moment(),e.moment()],"本周":[e.moment().startOf("week"),e.moment().endOf("week")],"当月":[e.moment().startOf("month"),e.moment().endOf("month")]}},model:{value:e.queryParam.rangePicker,callback:function(t){e.$set(e.queryParam,"rangePicker",t)},expression:"queryParam.rangePicker"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:{overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")])],1)])],1)],1)],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,showPagination:"auto",bordered:""},scopedSlots:e._u([{key:"name",fn:function(t,r){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+r.goods.num_iid}},[a("ellipsis",{attrs:{length:30,tooltip:""}},[e._v(e._s(t))])],1)]}},{key:"images",fn:function(e,t){return[a("a",{attrs:{target:"_blank",href:"https://detail.tmall.com/item.htm?id="+t.goods.num_iid}},[a("img",{staticStyle:{"max-width":"80px"},attrs:{src:t.goods.pic_url}})])]}},{key:"action",fn:function(t,r){return a("span",{},[[0===r.status?a("a",{on:{click:function(t){return e.handlePass(r)}}},[e._v("通过")]):e._e()]],2)}}])})],1)},$=[],D={name:"Brand",components:{STable:u["o"],Ellipsis:u["f"]},data:function(){var e=this;return{mdl:{},advanced:!1,queryParam:{},columns:[{title:"标题",dataIndex:"goods.title",scopedSlots:{customRender:"name"}},{title:"价格",dataIndex:"goods.price",width:100},{title:"图片",dataIndex:"pic_url",width:100,scopedSlots:{customRender:"images"}},{title:"分享人",dataIndex:"member.user_name",width:100},{title:"参与人次",dataIndex:"invites",width:100},{title:"时间",dataIndex:"create_date",width:160}],loadData:function(t){return p(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],optionAlertShow:!1}},created:function(){},methods:{moment:i.a,query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},T=D,A=Object(C["a"])(T,I,$,!1,null,null,null),V=A.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"全场活动",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:e.page.kanjia.status,callback:function(t){e.$set(e.page.kanjia,"status",t)},expression:"page.kanjia.status"}})],1),a("a-form-item",{attrs:{label:"客服微信",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weixin",{rules:[{required:!1,message:""}]}],expression:"['weixin', {rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("方便用户联系的微信客服帐号")])])],1),a("a-form-item",{attrs:{label:"砍价人数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["members",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['members', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每个商品需要砍价人数")])])],1),a("a-form-item",{attrs:{label:"砍一次金额",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission_rate",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['commission_rate', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的佣金百分比")])])],1),a("a-form-item",{attrs:{label:"免单模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money1",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money1', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的最小金额")])])],1),a("a-form-item",{attrs:{label:"免单模式",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money2",{initialValue:0,rules:[{required:!1,message:""}]}],expression:"['money2', {initialValue: 0,rules: [{required: false, message: ''}]}]"}],staticStyle:{width:"400px"}},[a("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("每砍一次砍掉的最大金额")])])],1),a("a-form-item",{attrs:{wrapperCol:{span:12}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("保存")])],1)],1)],1)},K=[],R=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),F=a("ac0d"),N=a("5880");function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(R["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G={mixins:[F["b"],F["c"]],components:{},computed:M({},Object(N["mapGetters"])(["token"])),data:function(){return{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:22}},form:this.$form.createForm(this),page:{kanjia:{status:!1}}}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.query()},query:function(){var e=this,t=this.form.setFieldsValue;h().then((function(a){a.data.item&&e.$nextTick((function(){var r=w()(a.data.item,["weixin","members","commission_rate","money1","money2"]);t(r),e.page.kanjia.status=1===a.data.item.status}))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||g(Object.assign(a,{status:t.page.kanjia.status})).then((function(e){var a=e||{},r=a.info;0===(r||{}).status&&t.$message.success("保存成功")}))}))},handleChange:function(e){e.file.status,"done"===e.file.status?this.form.setFieldsValue({logoTxt:e.file.response.data.item.img}):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传文件失败."))},beforeUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("上传图片只能是jpg/png/gif格式!");var a=e.size/1024/1024<2;return a||this.$message.error("文件大小不能超过 2MB!"),t&&a}}},Y=G,z=Object(C["a"])(Y,L,K,!1,null,null,null),B=z.exports,U={name:"Page",components:{ItemsPage:S,KanjiaPage:V,DataPage:B},data:function(){return{noTitleKey:"items",tabListNoTitle:[{key:"items",tab:"推荐产品"},{key:"kanjia",tab:"发起砍价记录"},{key:"data",tab:"砍价设置"}]}},created:function(){},methods:{handleTabChange:function(e,t){this[t]=e},query:function(){this.$refs.table.refresh(!0)},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:i()(new Date)}}}},H=U,W=Object(C["a"])(H,r,n,!1,null,null,null);t["default"]=W.exports}}]);