import{d as j,a7 as z,G as P,a8 as R,l as v,C as D,n as _,b as M,e as q,w as o,h as r,u as n,g as s,B as E,j as $,ae as U,ab as S,k as Y,o as N,p as m,ad as O,F as V,a as c,ak as W}from"./index.df60e08c.js";import{c as G}from"./market.d36314f3.js";import{a as I,b as H}from"./miandan.9f33e848.js";import{g as J}from"./user.e44ae75b.js";const K={class:"mt-2 xl:mt-0"},Q=j({__name:"report",setup(T,{expose:h}){const x=z(),b=P(()=>`${x.urlPrefix}${x.apiUrl}${G.getOrders}`),y=R({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u8BA2\u5355\u53F7",field:"ext.params.order_no"},{title:"\u4E0B\u5355\u65F6\u95F4",field:"ext.params.order_time",width:160,formatter(i){var l;return U((l=i.getData().ext.params.order_time)!=null?l:0)}},{title:"\u8BA2\u5355\u72B6\u6001",field:"ext.params.order_status_name",width:160},{title:"\u540C\u6B65\u65F6\u95F4",field:"ext.params.created_at",width:120,hozAlign:"center"}],u=v({market_code:"miandan",market_item_id:0,rangePicker:"",name:"",startTime:"",endTime:""}),a=v({visible:!1,confirmLoading:!1}),p=D(),g=()=>{p.value.reload(!0)};D();const w=()=>{a.visible=!1};return h({show:i=>{u.market_item_id=i.market_item_id,a.visible=!0}}),(i,l)=>{const k=_("Litepicker"),t=_("h-form-item"),e=_("h-form"),d=S,B=_("h-drawer");return M(),q(B,{title:"\u63A8\u5E7F\u62A5\u8868",size:"xl",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:w},{header:o(()=>[]),default:o(()=>[r(d,{ref_key:"tableRef",ref:p,columns:F,ajaxUrl:n(b),config:n(y),queryParam:u},{search:o(()=>[r(e,{layout:"inline"},{default:o(()=>[r(t,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:o(()=>[r(k,{modelValue:u.rangePicker,"onUpdate:modelValue":l[0]||(l[0]=A=>u.rangePicker=A),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),s("div",K,[r(n(E),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:g},{default:o(()=>[$(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),X=Y(Q,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/report.vue"]]),Z={class:"flex p-2 py-5 box"},tt={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},et=s("span",null,"\u8D26\u53F7\u4F59\u989D",-1),at={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},st=s("span",null,"\u9501\u5B9A\u91D1\u989D",-1),ot={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},rt=s("span",null,"\u5BA1\u6838\u5546\u54C1",-1),ut=s("option",{value:""},"\u5168\u90E8",-1),nt={value:"2"},it={value:"1"},lt={value:"0"},dt={value:"-1"},mt={value:"-2"},ct={class:"mt-2 xl:mt-0"},_t=j({__name:"miandan",setup(T){const h=z(),x=P(()=>`${h.urlPrefix}${h.apiUrl}${H.list}`),b=W(),y=R({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(t){const e=c(`
          <div class="flex items-center">
            <div class="w-9 h-9 image-fit zoom-in">
              <img class="border-white rounded-lg shadow-md w-9 h-9" src="${t.getData().pic_url}" />
            </div>
            <div class="ml-4 ">
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().d_title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().platform_type_name||""}
              </div>
            </div>
          </div>
          `);return c(e).on("click",function(d){g(t.getData())}),e[0]},download:!0},{title:"\u4EF7\u683C",width:120,field:"price",sorter:!0,formatter(t){return c(`
          <div class="flex flex-col items-start">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5238\u540E\u4EF7:${t.getData().coupon_price}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u91D1:${t.getData().rebate_amount}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5230\u624B\u4EF7:${(t.getData().coupon_price-t.getData().rebate_amount).toFixed(2)}
            </div>
          </div>
          `)[0]}},{title:"\u6D3B\u52A8\u65F6\u95F4",field:"",width:120,formatter(t){return c(`
          <div class="flex flex-col items-center">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
            ${U(t.getData().activity_start_time)}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${U(t.getData().activity_end_time)}
            </div>
          </div>
          `)[0]}},{title:"\u8FD4\u91D1\u989D",hozAlign:"center",width:90,field:"rebate_amount"},{title:"\u653E\u5355\u91CF",hozAlign:"center",width:90,field:"rebate_orders"},{title:"\u8DD1\u91CF",hozAlign:"center",width:80,field:"promotion_orders"},{title:"\u72B6\u6001",width:90,field:"",sorter:!0,formatter(t){return t.getData().status===0?"\u8349\u7A3F":t.getData().status===1?"\u5BA1\u6838\u4E2D":t.getData().status===2?"\u63A8\u5E7F\u4E2D":t.getData().status===3?"\u63A8\u5E7F\u5B8C\u6210":t.getData().status===-1?"\u5DF2\u62D2\u7EDD":t.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(t){if(t.getData().status===0){const e=c('<a class="flex items-center hover:text-rose-600" href="javascript:;">\u7F16\u8F91</a>');return c(e).on("click",function(d){w(t.getData())}),e[0]}if(t.getData().status!=0){const e=c('<a class="flex items-center hover:text-rose-600" href="javascript:;">\u62A5\u8868</a>');return c(e).on("click",function(d){g(t.getData())}),e[0]}return""}}],u=v({item_id:"",status:"",url:""}),a=v({report:{status0:0,status1:0,status2:0,status01:0,status02:0},user_data:{money:0,locking_money:0,goods_review:0}});N(()=>{l(),k()});const p=D(),g=t=>{p.value.show(t)},w=t=>{var e;b.push({name:"miandan-miandan-goods",query:{id:(e=t.id)!=null?e:""}},!0)},C=D(),i=t=>{C.value.reload(t),l()},l=()=>{I({}).then(t=>{t.data.item&&(a.report.status0=t.data.item[0]?t.data.item[0]:0,a.report.status1=t.data.item[1]?t.data.item[1]:0,a.report.status2=t.data.item[2]?t.data.item[2]:0,a.report.status01=t.data.item[-1]?t.data.item[-1]:0,a.report.status02=t.data.item[-2]?t.data.item[-2]:0)})},k=()=>{J({}).then(t=>{t.data.user_data&&(a.user_data=t.data.user_data)})};return(t,e)=>{const d=_("h-form-item"),B=_("h-form"),A=S,L=_("h-card");return M(),q(L,{bordered:!1,title:"\u514D\u5355\u5546\u54C1"},{header:o(()=>[r(n(E),{variant:"primary",class:"mr-2 shadow-md",onClick:e[0]||(e[0]=f=>w({}))},{default:o(()=>[$("\u53D1\u5E03\u514D\u5355\u5546\u54C1 ")]),_:1})]),extra:o(()=>[s("div",Z,[s("div",tt,[et,s("span",null,m(a.user_data.money),1)]),s("div",at,[st,s("span",null,m(a.user_data.locking_money),1)]),s("div",ot,[rt,s("span",null,m(a.user_data.goods_review),1)])])]),default:o(()=>[r(A,{ref_key:"tableRef",ref:C,columns:F,ajaxUrl:n(x),config:n(y),queryParam:u},{search:o(()=>[r(B,{layout:"inline"},{default:o(()=>[r(d,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:o(()=>[r(n(O),{modelValue:u.status,"onUpdate:modelValue":e[1]||(e[1]=f=>u.status=f),class:"w-full mt-2 sm:mt-0 sm:w-auto",onChange:i},{default:o(()=>[ut,s("option",nt,"\u901A\u8FC7 ("+m(a.report.status2)+")",1),s("option",it,"\u5BA1\u6838\u4E2D ("+m(a.report.status1)+")",1),s("option",lt,"\u8349\u7A3F ("+m(a.report.status0)+")",1),s("option",dt,"\u62D2\u7EDD ("+m(a.report.status01)+")",1),s("option",mt,"\u4E0B\u67B6 ("+m(a.report.status02)+")",1)]),_:1},8,["modelValue"])]),_:1}),r(d,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:o(()=>[r(n(V),{modelValue:u.item_id,"onUpdate:modelValue":e[2]||(e[2]=f=>u.item_id=f),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),r(d,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:o(()=>[r(n(V),{modelValue:u.url,"onUpdate:modelValue":e[3]||(e[3]=f=>u.url=f),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),s("div",ct,[r(n(E),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:i},{default:o(()=>[$(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),r(X,{ref_key:"reportModal",ref:p,onOk:i},null,512)]),_:1})}}}),gt=Y(_t,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan.vue"]]);export{gt as default};
