import{h as x,j as B,o as V,k as U,t as M,v as T,a as D,b as Y,w as s,l as e,p as u,x as f,z as A,y as v,m as $,u as k,q as w,s as i,Y as j,D as P,Z as S,C as E,c as L,F as O}from"./index.9c437169.js";import{g as q,u as R,b as z}from"./market.4bfb2255.js";import{f as N}from"./dateUtil.cd140771.js";import{p as H}from"./pick.40b27695.js";const W={class:"form-check form-switch"},G=e("label",{class:"form-check-label"},"\u662F\u5426\u5F00\u542F\u901B\u79EF\u5206\u529F\u80FD",-1),I={class:"input-group"},Z=e("div",{class:"input-group-text"},"\u4E2A",-1),J=e("div",{class:"form-help"},"\u6BCF\u6B21\u5956\u52B1\u79EF\u5206",-1),K={class:"input-group"},Q=e("div",{class:"input-group-text"},"\u6B21",-1),X=e("div",{class:"form-help"},"\u6BCF\u5929\u6700\u5927\u5956\u52B1\u6B21\u6570",-1),ee={class:"form-help"},te=x({__name:"data",setup(C,{expose:p}){const t=B({points:0,day_times:0,views:0,status:!1}),F={},c=B({visible:!1,confirmLoading:!1});V(()=>{_()});const n=U(F,M(t)),_=()=>{b()},b=()=>{q({market_code:"guang"}).then(l=>{l.data.item&&T(()=>{const o=H(l.data.item,["points","views","day_times"]);Object.assign(t,o),o.status=l.data.item.status===1})})},g=l=>{if(l.preventDefault(),n.value.$touch(),n.value.$invalid)n.value.$errors;else{const o=k(t);R(Object.assign(o,{market_code:"guang",status:t.status?1:0})).then(r=>{const{code:d}=r||{};d===0?w.success("\u4FDD\u5B58\u6210\u529F"):w.error(r.message)})}},h=()=>{c.visible=!1};return p({edit:()=>{c.visible=!0}}),(l,o)=>{const r=i("h-form-item"),d=i("h-form"),y=i("h-drawer");return D(),Y(y,{title:"\u8BBE\u7F6E",visible:c.visible,"confirm-loading":c.confirmLoading,onCancel:h},{footer:s(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:g},"\u4FDD\u5B58")]),default:s(()=>[u(d,{layout:"small"},{default:s(()=>[u(r,{label:"",content:"",layout:"small"},{default:s(()=>[e("div",W,[f(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=a=>t.status=a)},null,512),[[A,t.status]]),G])]),_:1}),u(r,{label:"\u79EF\u5206",content:"",layout:"small"},{default:s(()=>[e("div",I,[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=a=>t.points=a)},null,512),[[v,t.points]]),Z]),J]),_:1}),u(r,{label:"\u6BCF\u65E5\u6B21\u6570",content:"",layout:"small"},{default:s(()=>[e("div",K,[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=a=>t.day_times=a)},null,512),[[v,t.day_times]]),Q]),X]),_:1}),u(r,{label:"\u4E2D\u5956\u51E0\u7387",content:"",layout:"small"},{default:s(()=>[f(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=a=>t.views=a)},null,512),[[v,t.views]]),e("div",ee,"\u6BCF\u6B21\u6D4F\u89C8"+$(t.views)+"\u4E2A\u4EA7\u54C1\uFF0C\u83B7\u53D6\u4E00\u6B21\u4E2D\u5956\u673A\u4F1A\uFF0C0\u4EE3\u8868\u65E0\u6CD5\u4E2D\u5956",1)]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ne=x({__name:"guang",setup(C){const p=j(),t=P(()=>`${p.urlPrefix}${p.apiUrl}${z.getList}`),F=S({}),c=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237",field:"member_name"},{title:"\u79EF\u5206",field:"points",width:100},{title:"\u65F6\u95F4",field:"created_at",formatter(h){return N(h.getData().created_at,"YY-MM-DD HH:mm")},width:140}],n=B({rangePicker:"",username:"",status:0,startTime:"",endTime:"",market_code:"guang"}),_=E(),b=E(),g=()=>{_.value.reload(!0)};return(h,m)=>{const l=i("h-form-item"),o=i("Litepicker"),r=i("h-form"),d=i("Tablepage"),y=i("h-card");return D(),L(O,null,[u(y,{bordered:!1,title:"\u901B\u8BB0\u5F55"},{header:s(()=>[e("button",{class:"btn btn-primary mr-2 shadow-md",onClick:m[0]||(m[0]=a=>b.value.edit({}))},"\u8BBE\u7F6E ")]),default:s(()=>[u(d,{ref_key:"tableRef",ref:_,columns:c,ajaxUrl:k(t),config:k(F),queryParam:n},{search:s(()=>[u(r,{layout:"inline"},{default:s(()=>[u(l,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:s(()=>[f(e("input",{"onUpdate:modelValue":m[1]||(m[1]=a=>n.username=a),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[v,n.username]])]),_:1}),u(l,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[u(o,{modelValue:n.rangePicker,"onUpdate:modelValue":m[2]||(m[2]=a=>n.rangePicker=a),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:g}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),u(te,{ref_key:"modal",ref:b,onOk:g},null,512)],64)}}});export{ne as default};
