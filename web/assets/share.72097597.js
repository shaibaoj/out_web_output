import{h as k,j as y,o as $,k as U,t as M,v as T,a as w,b as Y,w as s,l as e,p as o,x as d,z as S,a2 as j,y as f,m as C,u as E,q as D,s as p,Y as L,D as P,Z as O,C as x,c as q,F as R,d as A,$ as W,a1 as z}from"./index.729dcb01.js";import{g as N,u as H,b as G}from"./market.e5a2aef2.js";import{p as I}from"./pick.8672c236.js";const Z={class:"form-check form-switch"},J=e("option",{value:0},"\u670B\u53CB\u5708\u5206\u4EAB\u5956\u52B1",-1),K=e("option",{value:1},"\u5FAE\u4FE1\u7FA4\u5206\u4EAB\u5956\u52B1",-1),Q=e("option",{value:3},"\u670B\u53CB\u5708\u3001\u5FAE\u4FE1\u7FA4\u5206\u4EAB\u5956\u52B1",-1),X=[J,K,Q],ee={class:"input-group"},te=e("div",{class:"input-group-text"},"\u5143",-1),ue={class:"input-group"},ae=e("div",{class:"input-group-text"},"\u4E2A",-1),se={class:"input-group"},oe=e("div",{class:"input-group-text"},"\u6B21",-1),ne={class:"form-help"},le={class:"input-group"},re=e("div",{class:"input-group-text"},"\u6B21",-1),ie={class:"form-help"},me=e("div",{class:"form-help"},"\u4E0D\u586B\u5199\u4F7F\u7528\u5B98\u65B9\u9ED8\u8BA4\uFF0C\u5982\u679C\u586B\u5199\u57DF\u540D\u9700\u8981\u5148cname\u89E3\u6790\u5230 share.youdanhui.cn",-1),de=k({__name:"data",setup(V,{expose:B}){const u=y({share_range:0,money:0,point:0,views:0,day_times:0,invite_url:""}),g={},l=y({visible:!1,confirmLoading:!1,share:{share_status:!1}});$(()=>{c()});const c=()=>{v()},_=U(g,M(u)),v=()=>{N({market_code:"share"}).then(i=>{i.data.item&&T(()=>{const t=I(i.data.item,["share_range","money","point","views","day_times","invite_url"]);Object.assign(u,t),l.share.share_status=i.data.item.share_status===1})})},b=i=>{if(i.preventDefault(),_.value.$touch(),_.value.$invalid)_.value.$errors;else{const t=E(u);H(Object.assign(t,{market_code:"share",share_status:l.share.share_status})).then(n=>{const{code:h}=n||{};h===0?D.success("\u4FDD\u5B58\u6210\u529F"):D.error(n.message)})}},r=()=>{l.visible=!1};return B({edit:()=>{l.visible=!0}}),(i,t)=>{const n=p("h-form-item"),h=p("h-form"),F=p("h-drawer");return w(),Y(F,{title:"\u8BBE\u7F6E",visible:l.visible,"confirm-loading":l.confirmLoading,onCancel:r},{footer:s(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:b},"\u4FDD\u5B58")]),default:s(()=>[o(h,{layout:"small"},{default:s(()=>[o(n,{label:"\u5206\u4EAB\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",Z,[d(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>l.share.share_status=a)},null,512),[[S,l.share.share_status]])])]),_:1}),o(n,{label:"\u5956\u52B1\u8303\u56F4",content:"",layout:"small"},{default:s(()=>[d(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=a=>u.share_range=a)},X,512),[[j,u.share_range]])]),_:1}),o(n,{label:"\u73B0\u91D1\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",ee,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>u.money=a)},null,512),[[f,u.money]]),te])]),_:1}),o(n,{label:"\u79EF\u5206\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",ue,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=a=>u.point=a)},null,512),[[f,u.point]]),ae])]),_:1}),o(n,{label:"\u5956\u52B1\u6D4F\u89C8\u6761\u4EF6",content:"",layout:"small"},{default:s(()=>[e("div",se,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>u.views=a)},null,512),[[f,u.views]]),oe]),e("div",ne,"(\u6BCF\u4E2A\u7528\u6237\u6BCF\u5929\u5206\u4EAB\u80FD\u5F97"+C(u.day_times)+"\u6B21\u5956\u52B1\uFF0C\u8D85\u8FC7\u540E\u5206\u4EAB\u6CA1\u6709\u5956\u52B1\u4E86)",1)]),_:1}),o(n,{label:"\u6BCF\u65E5\u5956\u52B1\u9650\u5236",content:"",layout:"small"},{default:s(()=>[e("div",le,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=a=>u.day_times=a)},null,512),[[f,u.day_times]]),re]),e("div",ie,"(\u6BCF\u4E2A\u7528\u6237\u6BCF\u5929\u5206\u4EAB\u80FD\u5F97"+C(u.day_times)+"\u6B21\u5956\u52B1\uFF0C\u8D85\u8FC7\u540E\u5206\u4EAB\u6CA1\u6709\u5956\u52B1\u4E86)",1)]),_:1}),o(n,{label:"\u5206\u4EAB\u72EC\u7ACB\u57DF\u540D",content:"",layout:"small"},{default:s(()=>[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=a=>u.invite_url=a),placeholder:"share.youdanhui.cn"},null,512),[[f,u.invite_url]]),me]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),fe=k({__name:"share",setup(V){const B=L(),u=P(()=>`${B.urlPrefix}${B.apiUrl}${G.getList}`),g=O({}),l=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",formatter(r){return A(`<a target="_blank" href="${r.getData().url}">
          ${r.getData().title}
        </a>`)[0]}},{title:"\u5E73\u53F0",width:150,field:"platform",formatter(r){return A(`${r.getData().platform=="WechatTimeLine"?"<span>\u670B\u53CB\u5708</span>":""}
        ${r.getData().platform=="WechatSession"?"<span>\u7FA4\u597D\u53CB</span>":""}`)[0]}},{title:"\u5206\u4EAB\u4EBA",width:100,field:"member.user_name"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(r){return W(r.getData().created_at,"YY-MM-DD HH:mm")}}],c=y({market_code:"share",rangePicker:"",username:"",status:0,startTime:"",endTime:""}),_=x(),v=x(),b=()=>{_.value.reload(!0)};return(r,m)=>{const i=p("h-form-item"),t=p("Litepicker"),n=p("h-form"),h=z,F=p("h-card");return w(),q(R,null,[o(F,{bordered:!1,title:"\u5206\u4EAB\u660E\u7EC6"},{header:s(()=>[e("button",{class:"btn btn-primary mr-2 shadow-md",onClick:m[0]||(m[0]=a=>v.value.edit({}))},"\u8BBE\u7F6E ")]),default:s(()=>[o(h,{ref_key:"tableRef",ref:_,columns:l,ajaxUrl:E(u),config:E(g),queryParam:c},{search:s(()=>[o(n,{layout:"inline"},{default:s(()=>[o(i,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:s(()=>[d(e("input",{"onUpdate:modelValue":m[1]||(m[1]=a=>c.username=a),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[f,c.username]])]),_:1}),o(i,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[o(t,{modelValue:c.rangePicker,"onUpdate:modelValue":m[2]||(m[2]=a=>c.rangePicker=a),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:b}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),o(de,{ref_key:"dataModal",ref:v,onOk:b},null,512)],64)}}});export{fe as default};
