import{d as U,a7 as C,l as f,o as D,m as y,t as S,s as E,n as i,e as j,w as a,b as p,h as e,g as d,p as N,u as n,c as A,f as O,B as b,L as $,j as v,F as _,q as g,k as L}from"./index.b5f77459.js";import{a as Q,u as R}from"./user.8879ec58.js";import{p as T}from"./pick.c5d573cd.js";const G={class:"relative"},I={class:"flex-none w-24 h-24 mr-1 image-fit"},M=["src"],z=U({__name:"base",setup(H){const h=C().uploadUrl,t=f({email:"",avatar_url:"",mobile:"",qq:""}),V={},u=f({uploading:!0,nick_name:"",avatar_url:""});D(()=>{w()});const m=y(V,S(t)),w=()=>{k()},k=()=>{Q({}).then(l=>{l.data.user&&E(()=>{Object.assign(t,T(l.data.user,["avatar_url","email","mobile","qq"])),u.nick_name=l.data.user.nick_name,u.avatar_url=l.data.user.avatar_url})})},F=l=>{if(l.preventDefault(),m.value.$touch(),m.value.$invalid)m.value.$errors;else{const s=n(t);R(Object.assign(s,{})).then(o=>{const{code:c}=o||{};c===0?g.success("\u4FDD\u5B58\u6210\u529F"):g.error(o.message)})}},B=l=>{Object.assign(t,{avatar_url:l.data.item.img}),u.avatar_url=l.data.item.img};return(l,s)=>{const o=i("h-form-item"),c=i("h-upload"),q=i("h-form"),x=i("h-card");return p(),j(x,{bordered:!1,title:"\u57FA\u7840\u8BBE\u7F6E"},{default:a(()=>[e(q,{label:"",border:!0},{default:a(()=>[e(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[d("span",null,N(u.nick_name),1)]),_:1}),e(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[e(c,{name:"file",multiple:!0,action:n(h),onChange:B},{default:a(()=>[d("div",G,[d("div",I,[u.avatar_url?(p(),A("img",{key:0,src:u.avatar_url,alt:"",class:"rounded-full"},null,8,M)):O("v-if",!0)]),e(n(b),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:a(()=>[e(n($),{icon:"Upload",class:"w-4 h-4 mr-2"}),v("\u56FE\u6807\u4E0A\u4F20 ")]),_:1})])]),_:1},8,["action"])]),_:1}),e(o,{label:"email",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.email,"onUpdate:modelValue":s[0]||(s[0]=r=>t.email=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.mobile,"onUpdate:modelValue":s[1]||(s[1]=r=>t.mobile=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.qq,"onUpdate:modelValue":s[2]||(s[2]=r=>t.qq=r)},null,8,["modelValue"])]),_:1}),e(o,null,{default:a(()=>[e(n(b),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:F},{default:a(()=>[v("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})}}}),X=L(z,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/info/base.vue"]]);export{X as default};
