import{h as V,Y as w,j as g,D as b,o as O,k as j,t as P,a9 as J,v as $,b as q,w as n,s as r,a as _,p as l,x as v,y as F,l as e,u as c,c as B,e as C,aa as I,q as E}from"./index.5040b566.js";import{p as M}from"./pick.16f72627.js";const R={class:"app-icon"},T=e("i",{class:"cmsfont icon-jia"},null,-1),G=["src"],Y=e("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),z={class:"app-icon static-icon"},H=e("i",{class:"cmsfont icon-jia"},null,-1),K=["src"],L=e("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),tt=V({__name:"setting",setup(Q){const m=w().uploadUrl,s=g({name:"",icon:"",startup_pic:"",brief:""}),y={},a=g({uploading:!0,icon:{url:""},startup_pic:{url:""}}),f=b(()=>a.icon.url?a.icon.url:""),h=b(()=>a.startup_pic.url?a.startup_pic.url:"");O(()=>{A()});const p=j(y,P(s)),A=()=>{D()},D=()=>{J({}).then(t=>{t.data.app&&$(()=>{const o=M(t.data.app,["name","icon","startup_pic","brief"]);o.icon=JSON.stringify(t.data.app.icon),o.startup_pic=JSON.stringify(t.data.app.startup_pic),Object.assign(s,o),a.icon.url=t.data.app.icon.url,a.startup_pic.url=t.data.app.startup_pic.url})})},S=t=>{if(t.preventDefault(),Object.assign(s,{icon:JSON.stringify(a.icon),startup_pic:JSON.stringify(a.startup_pic)}),p.value.$touch(),p.value.$invalid)p.value.$errors;else{const o=c(s);I(o).then(u=>{const{code:i}=u||{};i===0?E.success("\u4FDD\u5B58\u6210\u529F"):E.error(u.message)})}},k=t=>{a.icon.url=t.data.item.img},x=t=>{a.startup_pic.url=t.data.item.img};return(t,o)=>{const u=r("h-form-item"),i=r("h-upload"),N=r("h-form"),U=r("h-card");return _(),q(U,{bordered:!1,title:"APP\u8BBE\u7F6E"},{menu:n(()=>[]),default:n(()=>[l(N,{label:"\u57FA\u7840\u8BBE\u7F6E",border:!0},{default:n(()=>[l(u,{label:"App\u540D\u79F0",content:""},{default:n(()=>[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=d=>s.name=d),placeholder:"App\u540D\u79F0"},null,512),[[F,s.name]])]),_:1}),l(u,{label:"APP\u56FE\u6807",content:""},{default:n(()=>[l(i,{name:"file",multiple:!0,action:c(m),onChange:k},{default:n(()=>[e("div",null,[e("div",R,[T,c(f)?(_(),B("img",{key:0,src:c(f)},null,8,G)):C("",!0),Y])])]),_:1},8,["action"])]),_:1}),l(u,{label:"\u542F\u52A8\u753B\u9762",content:""},{default:n(()=>[l(i,{name:"file",multiple:!0,action:c(m),onChange:x},{default:n(()=>[e("div",null,[e("div",z,[H,c(h)?(_(),B("img",{key:0,src:c(h)},null,8,K)):C("",!0),L])])]),_:1},8,["action"])]),_:1}),l(u,{label:"\u7B80\u4ECB\u63CF\u8FF0",content:""},{default:n(()=>[v(e("textarea",{class:"form-control","onUpdate:modelValue":o[1]||(o[1]=d=>s.brief=d),rows:10,placeholder:""},null,512),[[F,s.brief]])]),_:1}),l(u,null,{default:n(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:S},"\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})}}});export{tt as default};
