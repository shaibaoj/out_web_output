import{h as N,Y as w,j as v,D as F,o as O,k as j,t as P,a6 as J,v as $,b as q,w as s,s as p,a as f,p as l,x as d,y as m,l as a,u as c,c as B,e as y,a7 as I,q as C}from"./index.19049599.js";import{p as M}from"./pick.cfc4a81b.js";const R={class:"app-icon"},T=a("i",{class:"cmsfont icon-jia"},null,-1),G=["src"],Y=a("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),z={class:"app-icon static-icon"},H=a("i",{class:"cmsfont icon-jia"},null,-1),K=["src"],L=a("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),tt=N({__name:"setting",setup(Q){const g=w().uploadUrl,n=v({name:"",icon:"",startup_pic:"",brief:""}),E={},o=v({uploading:!0,icon:{url:""},startup_pic:{url:""}}),h=F(()=>o.icon.url?o.icon.url:""),b=F(()=>o.startup_pic.url?o.startup_pic.url:"");O(()=>{A()});const _=j(E,P(n)),A=()=>{D()},D=()=>{J({}).then(e=>{e.data.app&&$(()=>{const t=M(e.data.app,["name","icon","startup_pic","brief"]);t.icon=JSON.stringify(e.data.app.icon),t.startup_pic=JSON.stringify(e.data.app.startup_pic),Object.assign(n,t),o.icon.url=e.data.app.icon.url,o.startup_pic.url=e.data.app.startup_pic.url})})},S=e=>{if(e.preventDefault(),Object.assign(n,{icon:JSON.stringify(o.icon),startup_pic:JSON.stringify(o.startup_pic)}),_.value.$touch(),_.value.$invalid)_.value.$errors;else{const t=c(n);I(t).then(u=>{const{code:r}=u||{};r===0?C.success("\u4FDD\u5B58\u6210\u529F"):C.error(u.message)})}},k=e=>{o.icon.url=e.data.item.img},U=e=>{o.startup_pic.url=e.data.item.img};return(e,t)=>{const u=p("h-form-item"),r=p("h-upload"),V=p("h-form"),x=p("h-card");return f(),q(x,{bordered:!1,title:"APP\u8BBE\u7F6E"},{menu:s(()=>[]),default:s(()=>[l(V,{label:"\u57FA\u7840\u8BBE\u7F6E",border:!0},{default:s(()=>[l(u,{label:"App\u540D\u79F0",content:""},{default:s(()=>[d(a("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=i=>n.name=i),placeholder:"App\u540D\u79F0"},null,512),[[m,n.name]])]),_:1}),l(u,{label:"APP\u56FE\u6807",content:""},{default:s(()=>[d(a("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.icon=i),type:"hidden"},null,512),[[m,n.icon]]),l(r,{name:"file",multiple:!0,action:c(g),onChange:k},{default:s(()=>[a("div",null,[a("div",R,[T,c(h)?(f(),B("img",{key:0,src:c(h)},null,8,G)):y("",!0),Y])])]),_:1},8,["action"])]),_:1}),l(u,{label:"\u542F\u52A8\u753B\u9762",content:""},{default:s(()=>[d(a("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>n.startup_pic=i),type:"hidden"},null,512),[[m,n.startup_pic]]),l(r,{name:"file",multiple:!0,action:c(g),onChange:U},{default:s(()=>[a("div",null,[a("div",z,[H,c(b)?(f(),B("img",{key:0,src:c(b)},null,8,K)):y("",!0),L])])]),_:1},8,["action"])]),_:1}),l(u,{label:"\u7B80\u4ECB\u63CF\u8FF0",content:""},{default:s(()=>[d(a("textarea",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=i=>n.brief=i),rows:10,placeholder:""},null,512),[[m,n.brief]])]),_:1}),l(u,null,{default:s(()=>[a("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:S},"\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})}}});export{tt as default};
