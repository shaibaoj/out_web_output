import{h as w,j as g,o as $,k as A,t as M,v as Y,a as V,b as T,w as a,l as e,p as n,x as i,z as E,y as c,m as v,u as B,q as k,s as d,Y as j,D as P,Z as S,C,c as L,F as O,$ as q,a1 as R}from"./index.729dcb01.js";import{g as z,u as N,b as H}from"./market.e5a2aef2.js";import{p as W}from"./pick.8672c236.js";const G={class:"form-check form-switch"},I={class:"input-group"},Z=e("div",{class:"input-group-text"},"\u79D2",-1),J={class:"form-help"},K={class:"form-check form-switch"},Q=e("div",{class:"form-help"}," \u62BD\u4E2D\u6700\u5C0F\u7EA2\u5305(\u6700\u5C0F\u503C\u53EF\u4EE5\u8BBE\u7F6E0.0001) ",-1),X=e("div",{class:"form-help"},"\u62BD\u4E2D\u6700\u5927\u7EA2\u5305(\u7EA2\u5305\u6700\u5927\u503C\u4E0D\u9650\u5236)",-1),tt={class:"input-group"},et=e("div",{class:"input-group-text"},"\u79D2",-1),ot={class:"form-help"},ut=w({__name:"data",setup(U,{expose:_}){const t=g({min_points:0,max_points:0,min_money:0,max_money:0,time:0,time_money:0,status:!1,status_money:!1}),x={},f=g({visible:!1,confirmLoading:!1});$(()=>{y()});const m=A(x,M(t)),y=()=>{b()},b=()=>{z({market_code:"baoxiang"}).then(l=>{l.data.item&&Y(()=>{const o=W(l.data.item,["min_points","max_points","time","min_money","max_money","time_money"]);Object.assign(t,o),t.status=l.data.item.status===1,t.status_money=l.data.item.status_money===1})})},F=l=>{if(l.preventDefault(),m.value.$touch(),m.value.$invalid)m.value.$errors;else{const o=B(t);N(Object.assign(o,{market_code:"baoxiang",status:t.status?1:0,status_money:t.status_money?1:0})).then(s=>{const{code:p}=s||{};p===0?k.success("\u4FDD\u5B58\u6210\u529F"):k.error(s.message)})}},D=()=>{f.visible=!1};return _({edit:()=>{f.visible=!0}}),(l,o)=>{const s=d("h-form-item"),p=d("h-form"),h=d("h-drawer");return V(),T(h,{title:"\u8BBE\u7F6E",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:D},{footer:a(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:F},"\u4FDD\u5B58")]),default:a(()=>[n(p,{layout:"small"},{default:a(()=>[n(s,{label:"\u5B9D\u7BB1\u79EF\u5206\u6D3B\u52A8",content:"",layout:"small"},{default:a(()=>[e("div",G,[i(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=u=>t.status=u)},null,512),[[E,t.status]])])]),_:1}),n(s,{label:"\u6700\u5C0F\u79EF\u5206",content:"",layout:"small"},{default:a(()=>[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=u=>t.min_points=u),placeholder:"\u62BD\u4E2D\u6700\u5C0F\u79EF\u5206"},null,512),[[c,t.min_points]])]),_:1}),n(s,{label:"\u6700\u5927\u79EF\u5206",content:"",layout:"small"},{default:a(()=>[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=u=>t.max_points=u),placeholder:"\u62BD\u4E2D\u6700\u5927\u79EF\u5206"},null,512),[[c,t.max_points]])]),_:1}),n(s,{label:"\u62BD\u5956\u95F4\u9694\u65F6\u95F4",content:"",layout:"small"},{default:a(()=>[e("div",I,[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=u=>t.time=u)},null,512),[[c,t.time]]),Z]),e("div",J," \u6BCF\u8FC7"+v(t.time)+"\u79D2\u53EF\u4EE5\u91CD\u65B0\u62BD\u5956) ",1)]),_:1}),n(s,{label:"\u5B9D\u7BB1\u7EA2\u5305\u6D3B\u52A8",content:"",layout:"small"},{default:a(()=>[e("div",K,[i(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=u=>t.status_money=u)},null,512),[[E,t.status_money]])])]),_:1}),n(s,{label:"\u6700\u5C0F\u79EF\u5206",content:"",layout:"small"},{default:a(()=>[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=u=>t.min_money=u)},null,512),[[c,t.min_money]]),Q]),_:1}),n(s,{label:"\u6700\u5927\u79EF\u5206",content:"",layout:"small"},{default:a(()=>[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=u=>t.max_money=u)},null,512),[[c,t.max_money]]),X]),_:1}),n(s,{label:"\u62BD\u5956\u95F4\u9694\u65F6\u95F4",content:"",layout:"small"},{default:a(()=>[e("div",tt,[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=u=>t.time_money=u)},null,512),[[c,t.time_money]]),et]),e("div",ot,"\u6BCF\u8FC7"+v(t.time_money)+"\u79D2\u53EF\u4EE5\u91CD\u65B0\u62BD\u5956)",1)]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),lt=w({__name:"baoxiang",setup(U){const _=j(),t=P(()=>`${_.urlPrefix}${_.apiUrl}${H.getList}`),x=S({}),f=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237",field:"member.user_name",width:300},{title:"\u79EF\u5206",field:"points"},{title:"\u73B0\u91D1",field:"money"},{title:"\u65F6\u95F4",field:"created_at",formatter(D){return q(D.getData().created_at,"YY-MM-DD HH:mm")},width:140}],m=g({market_code:"baoxiang",rangePicker:"",username:"",status:0,startTime:"",endTime:""}),y=C(),b=C(),F=()=>{y.value.reload(!0)};return(D,r)=>{const l=d("h-form-item"),o=d("Litepicker"),s=d("h-form"),p=R,h=d("h-card");return V(),L(O,null,[n(h,{bordered:!1,title:"\u5F00\u5956\u8BB0\u5F55"},{header:a(()=>[e("button",{class:"btn btn-primary mr-2 shadow-md",onClick:r[0]||(r[0]=u=>b.value.edit({}))},"\u8BBE\u7F6E ")]),default:a(()=>[n(p,{ref_key:"tableRef",ref:y,columns:f,ajaxUrl:B(t),config:B(x),queryParam:m},{search:a(()=>[n(s,{layout:"inline"},{default:a(()=>[n(l,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[i(e("input",{"onUpdate:modelValue":r[1]||(r[1]=u=>m.username=u),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[c,m.username]])]),_:1}),n(l,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[n(o,{modelValue:m.rangePicker,"onUpdate:modelValue":r[2]||(r[2]=u=>m.rangePicker=u),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:F}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),n(ut,{ref_key:"modal",ref:b,onOk:F},null,512)],64)}}});export{lt as default};
