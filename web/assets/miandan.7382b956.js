import{h as tt,Y as et,D as J,Z as st,j as S,C as $,a as p,b as z,w as l,p as u,l as t,u as F,s as v,a1 as it,r as nt,E as gt,k as vt,t as bt,ao as G,v as P,a3 as x,n as B,e as A,x as m,y as g,c as b,m as _,F as I,I as Q,a2 as ut,a4 as H,q as X,o as ht,d as C,$ as yt}from"./index.a61f9404.js";import{b as xt}from"./market.dda66ec3.js";import{a as wt,f as Dt,b as Ft,c as Ct}from"./goods.eb2908e9.js";import{g as Et,i as kt}from"./common.d2592382.js";import{c as N}from"./index.cf01fc89.js";import{p as Z}from"./pick.e65abaad.js";const Bt=tt({__name:"report",setup(V,{expose:U}){const Y=et(),W=J(()=>`${Y.urlPrefix}${Y.apiUrl}${xt.getItems}`),T=st({}),f=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u8BA2\u5355\u53F7",field:"goods.price"},{title:"\u4E0B\u5355\u65F6\u95F4",field:"draws",width:160},{title:"\u8BA2\u5355\u72B6\u6001",field:"inventory",width:160},{title:"\u72B6\u6001",field:"",width:160,formatter(h){return h.getData().status===1?"\u4E0A\u67B6":"\u4E0B\u67B6"}},{title:"\u540C\u6B65\u65F6\u95F4",field:"start_time",width:120,hozAlign:"center"}],c=S({type:"vip",rangePicker:"",username:"",status:0,startTime:"",endTime:""}),e=S({visible:!1,confirmLoading:!1}),E=$(),n=()=>{E.value.reload(!0)};$();const R=()=>{e.visible=!1};return U({edit:h=>{e.visible=!0}}),(h,w)=>{const s=v("Litepicker"),d=v("h-form-item"),y=v("h-form"),M=it,q=v("h-drawer");return p(),z(q,{title:"\u63A8\u5E7F\u62A5\u8868",size:"modal-xl",visible:e.visible,"confirm-loading":e.confirmLoading,onCancel:R},{header:l(()=>[]),default:l(()=>[u(M,{ref_key:"tableRef",ref:E,columns:f,ajaxUrl:F(W),config:F(T),queryParam:c},{search:l(()=>[u(y,{layout:"inline"},{default:l(()=>[u(d,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[u(s,{modelValue:c.rangePicker,"onUpdate:modelValue":w[0]||(w[0]=L=>c.rangePicker=L),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:n}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),ot={list:"/api/user/business/miandan/list",getReport:"/api/user/business/miandan/report",view:"/api/user/business/miandan/view",update:"/api/user/business/miandan/update",updateStatus:"/api/user/business/miandan/status"};function At(V){return nt({url:ot.getReport,method:"post",data:V})}function $t(V){return nt({url:ot.update,method:"post",data:V})}const Vt={class:"input-group"},Ut={class:"flex-1 input-group"},Yt={class:"flex-1 input-group"},jt=t("div",{class:"w-48 input-group-text"},"\u5EFA\u8BAE\u65F6\u95F47\u5929\u5DE6\u53F3",-1),Mt={class:"grid w-full grid-cols-12 gap-2"},qt={class:"col-span-4"},Lt={class:"input-group"},Ot=t("div",{class:"input-group-text whitespace-nowrap"},"\u91D1\u989D",-1),Pt=t("div",{class:"input-group-text"},"\u5143",-1),Nt={class:"col-span-4"},St={class:"input-group"},Tt=t("div",{class:"input-group-text whitespace-nowrap"},"\u95E8\u69DB",-1),Rt=t("div",{class:"input-group-text"},"\u5143",-1),zt={class:"grid flex-1 grid-cols-12 gap-2"},It={class:"col-span-4"},Wt={class:"col-span-4"},Gt={class:"grid grid-cols-12 gap-2"},Ht={class:"col-span-4"},Zt={class:"input-group"},Jt=t("div",{class:"input-group-text whitespace-nowrap"},"\u63A8\u5E7F\u91CF",-1),Kt=t("div",{class:"input-group-text"},"\u5143",-1),Qt={class:"col-span-4"},Xt={class:"input-group"},te=t("div",{class:"input-group-text whitespace-nowrap"},"\u798F\u5229\u91D1",-1),ee=t("div",{class:"input-group-text"},"\u5143",-1),oe={class:"p-2 my-2 border-none form-help bg-neutral-100"},ae={class:"text-rose-600"},se={class:"text-rose-600"},ie={class:"text-rose-600"},ne={class:"font-medium text-rose-600"},ue={class:"grid flex-1 grid-cols-12 gap-2"},le={class:"col-span-4"},re={class:"col-span-4"},de={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},ce=["src"],me={key:1,class:"py-2"},_e=t("p",null,"\u4E3B\u56FE\u53C2\u8003",-1),pe={class:"flex flex-row flex-wrap gap-x-1 gap-y-1"},fe=["onClick"],ge=["src"],ve=t("option",{value:0},"--\u9009\u62E9--",-1),be=["value"],he={key:0},ye=t("p",null,"\u5907\u9009\u6587\u6848",-1),xe={class:"flex flex-col gap-y-3"},we=["onClick"],De=["className"],Fe=tt({__name:"goods",emits:["ok"],setup(V,{expose:U,emit:Y}){const T=et().uploadUrl,f=$(""),c=$(""),e=S({coupon_url:"",item_url:"",id:0,qq_video_url:"",money:0,goods_sign:"",item_id:"",seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",d_title:"",pic_url:"",price:0,qq_pic_url:"",comment:"",cid1:0,create_time:"",end_time:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),E={},n=S({visible:!1,confirmLoading:!1,data:{step:0,cats:[],wen_items:[],pic_urls:[]}}),R=J(()=>!kt(e.pic_url)),j=J(()=>(e.price-e.money)*5/100);gt(()=>{h()});const h=()=>{Et({}).then(a=>{a.data.items&&(n.data.cats=a.data.items)})},w=vt(E,bt(e)),s=a=>{n.data.step=0,c.value="",f.value="",n.visible=!0,P(()=>{Object.assign(e,{item_url:"",qq_video_url:"",coupon_url:"",money:0,id:0,item_id:"",platform_type:0,seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",price:0,qq_pic_url:"",comment:"",cid1:0,d_title:"",pic_url:"",create_time:"",end_time:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),n.data.pic_urls=[],n.data.wen_items=[],a.id&&(n.data.step=1);const o=Z(a,["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","create_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount"]);Object.assign(e,o),a.create_time&&(e.create_time=x(a.create_time)),a.end_time&&(e.end_time=x(a.end_time)),a.activity_start_time&&(e.activity_start_time=x(a.activity_start_time)),a.activity_end_time&&(e.activity_end_time=x(a.activity_end_time)),q()})},d=a=>{if(n.confirmLoading=!0,w.value.$touch(),w.value.$invalid)N.log("error",w.value.$errors),n.confirmLoading=!1;else{let o=F(e),r={apply_status:a};o.create_time&&(r=Object.assign(r,{create_time:H(o.create_time)})),o.end_time&&(r=Object.assign(r,{end_time:H(o.end_time)})),o.activity_start_time&&(r=Object.assign(r,{activity_start_time:H(o.activity_start_time)})),o.activity_end_time&&(r=Object.assign(r,{activity_end_time:H(o.activity_end_time)})),$t(Object.assign({},o,r)).then(k=>{k.code===0?(a===1?X.success("\u63D0\u4EA4\u6210\u529F"):X.success("\u4FDD\u5B58\u6210\u529F"),Y("ok",o),n.visible=!1):X.error(k.message),n.confirmLoading=!1})}},y=a=>{e.pic_url=a.data.item.img},M=()=>{Dt({item_url:e.item_url}).then(a=>{a.data.goods&&(P(()=>{Object.assign(e,Z(a.data.goods,["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","money","condition"])),a.data.goods.create_time&&(e.create_time=x(a.data.goods.create_time)),a.data.goods.end_time&&(e.end_time=x(a.data.goods.end_time))}),n.data.wen_items=a.data.goods.wen_items||[],n.data.pic_urls=a.data.goods.pic_urls||[]),n.confirmLoading=!1})},q=()=>{wt({item_url:e.item_url}).then(a=>{a.data.goods&&(n.data.wen_items=a.data.goods.wen_items||[],n.data.pic_urls=a.data.goods.pic_urls||[])})},L=()=>{Ct({item_url:e.item_url,coupon_url:e.coupon_url}).then(a=>{a.data.coupon&&(N.log(a.data.coupon),P(()=>{const o=Z(a.data.coupon,["money","condition"]);Object.assign(e,o),e.create_time=x(a.data.coupon.create_time),e.end_time=x(a.data.coupon.end_time)}))})},D=()=>{n.visible=!1},lt=a=>{P(()=>{Object.assign(e,{comment:a.content})})},rt=a=>{P(()=>{e.pic_url=a})},K=()=>{Ft({item_url:f.value,content:c.value}).then(a=>{a.data.item&&P(()=>{const o=Z(a.data.item,["item_url","coupon_url"]);Object.assign(e,o),n.data.step=1,M(),L()})})};return G(()=>e.item_url,(a,o)=>{N.log(a,o),q()},{immediate:!0}),G(()=>e.coupon_url,(a,o)=>{N.log(a,o),L()},{immediate:!0}),G(()=>f,(a,o)=>{N.log(a,o),K()},{immediate:!0}),G(()=>c,(a,o)=>{N.log(a,o),K()},{immediate:!0}),U({edit:s}),(a,o)=>{const r=v("h-form-item"),k=v("Litepicker"),dt=v("UploadIcon"),ct=v("h-upload"),mt=v("h-form"),_t=v("h-spin"),at=v("LoadingIcon"),pt=v("h-modal");return p(),z(pt,{title:"\u53D1\u5E03\u514D\u5355\u5546\u54C1",size:"modal-xl",visible:n.visible,"confirm-loading":n.confirmLoading,onCancel:D},{footer:l(()=>[t("div",{className:n.data.step===0?"hidden":""},[t("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:o[18]||(o[18]=i=>d(1))},[B(" \u63D0\u4EA4\u5BA1\u6838 "),n.confirmLoading?(p(),z(at,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):A("",!0)]),t("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:o[19]||(o[19]=i=>d(0))},[B("\u4FDD\u5B58\u8349\u7A3F "),n.confirmLoading?(p(),z(at,{key:0,icon:"oval",color:"white",class:"w-4 ml-2"})):A("",!0)])],8,De)]),default:l(()=>[u(_t,{spinning:n.confirmLoading},{default:l(()=>[u(mt,{layout:"small"},{default:l(()=>[n.data.step==0?(p(),z(r,{key:0,label:"\u5546\u54C1\u94FE\u63A5",content:"",layout:"small"},{default:l(()=>[t("div",Vt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>f.value=i)},null,512),[[g,f.value]]),t("div",{class:"input-group-text btn-outline-primary"},[t("button",{class:"w-24",onClick:K},"\u83B7\u53D6")])])]),_:1})):A("",!0),n.data.step!==0?(p(),b(I,{key:1},[u(r,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:l(()=>[t("div",Ut,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=i=>e.item_url=i)},null,512),[[g,e.item_url]]),t("div",{class:"input-group-text btn-outline-primary"},[t("button",{class:"w-24",onClick:M},"\u83B7\u53D6")])])]),_:1}),u(r,{label:"\u5546\u54C1\u6807\u9898",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[2]||(o[2]=i=>e.title=i)},null,512),[[g,e.title]])]),_:1}),u(r,{label:"\u77ED \u6807 \u9898",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[3]||(o[3]=i=>e.d_title=i)},null,512),[[g,e.d_title]])]),_:1}),u(r,{label:"\u539F\u4EF7\u683C",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[4]||(o[4]=i=>e.price=i)},null,512),[[g,e.price]])]),_:1}),u(r,{label:"\u4F18\u60E0\u5238\u8FDE\u63A5",content:"",layout:"inline"},{default:l(()=>[t("div",Yt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=i=>e.coupon_url=i)},null,512),[[g,e.coupon_url]]),jt])]),_:1}),u(r,{label:"\u4F18\u60E0\u5238",content:"",layout:"small"},{default:l(()=>[t("div",Mt,[t("div",qt,[t("div",Lt,[Ot,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=i=>e.money=i)},null,512),[[g,e.money]]),Pt])]),t("div",Nt,[t("div",St,[Tt,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=i=>e.condition=i)},null,512),[[g,e.condition]]),Rt])])])]),_:1}),u(r,{label:"\u9886\u53D6\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[t("div",zt,[t("div",It,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(k,{modelValue:e.create_time,"onUpdate:modelValue":o[8]||(o[8]=i=>e.create_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})]),t("div",Wt,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(k,{modelValue:e.end_time,"onUpdate:modelValue":o[9]||(o[9]=i=>e.end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})])])]),_:1}),u(r,{label:"\u63A8\u5E7F\u9884\u7B97",content:"",layout:"small"},{default:l(()=>[t("div",Gt,[t("div",Ht,[t("div",Zt,[Jt,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=i=>e.rebate_orders=i)},null,512),[[g,e.rebate_orders]]),Kt])]),t("div",Qt,[t("div",Xt,[te,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[11]||(o[11]=i=>e.rebate_amount=i)},null,512),[[g,e.rebate_amount]]),ee])])]),t("div",oe,[B(_(e.rebate_orders)+"(\u9884\u8BA1\u63A8\u5E7F\u91CF) * "+_(e.rebate_amount)+"(\u798F\u5229\u91D1\u989D) = \u9884\u8BA1\u603B\u798F\u5229\u91D1\u989D : ",1),t("span",ae,_(e.rebate_amount*e.rebate_orders),1),B(" + "),t("span",se,_(e.rebate_orders),1),B(" (\u9884\u8BA1\u63A8\u5E7F\u91CF) * "),t("span",ie,_(F(j).toFixed(2)),1),B(" (\u670D\u52A1\u8D39) = \u9884\u8BA1\u603B\u8D39\u7528: "),t("span",ne,_((e.rebate_amount*e.rebate_orders+F(j)*e.rebate_orders).toFixed(2)),1)])]),_:1}),u(r,{label:"\u6D3B\u52A8\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[t("div",ue,[t("div",le,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(k,{modelValue:e.activity_start_time,"onUpdate:modelValue":o[12]||(o[12]=i=>e.activity_start_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})]),t("div",re,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(k,{modelValue:e.activity_end_time,"onUpdate:modelValue":o[13]||(o[13]=i=>e.activity_end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})])])]),_:1}),u(r,{label:"\u56FE\u7247",content:"",layout:"small"},{default:l(()=>[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[14]||(o[14]=i=>e.pic_url=i)},null,512),[[g,e.pic_url]]),u(ct,{name:"file",multiple:!0,action:F(T),onChange:y},{default:l(()=>[t("button",de,[u(dt,{class:"w-4 h-4 mr-2"}),B("\u4E0A\u4F20 ")])]),_:1},8,["action"]),F(R)?(p(),b("img",{key:0,class:"w-48 h-48",src:e.pic_url},null,8,ce)):A("",!0),n.data.pic_urls&&n.data.pic_urls.length>0?(p(),b("div",me,[_e,t("ul",pe,[(p(!0),b(I,null,Q(n.data.pic_urls,(i,O)=>(p(),b("li",{key:O,onClick:ft=>rt(i),class:"w-20 h-20 p-1 border hover:border-green-600"},[t("img",{src:i},null,8,ge)],8,fe))),128))])])):A("",!0)]),_:1}),u(r,{label:"\u5206\u7C7B",content:"",layout:"small"},{default:l(()=>[m(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=i=>e.cid1=i)},[ve,(p(!0),b(I,null,Q(n.data.cats,(i,O)=>(p(),b("option",{key:O,value:i.c_id},_(i.short_name),9,be))),128))],512),[[ut,e.cid1]])]),_:1}),u(r,{label:"\u5FAE\u4FE1\u7FA4\u4E13\u7528\u56FE",content:"",layout:"small"},{default:l(()=>[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[16]||(o[16]=i=>e.qq_pic_url=i)},null,512),[[g,e.qq_pic_url]])]),_:1}),u(r,{label:"\u5BFC\u8D2D\u6587\u6848",content:"",layout:"small"},{default:l(()=>[m(t("textarea",{class:"form-control","onUpdate:modelValue":o[17]||(o[17]=i=>e.comment=i),rows:4,placeholder:"\u8BF7\u8F93\u516520-100\u5B57\u5BFC\u8D2D\u6587\u6848\u4ECB\u7ECD"},null,512),[[g,e.comment]]),n.data.wen_items&&n.data.wen_items.length>0?(p(),b("div",he,[ye,t("ul",xe,[(p(!0),b(I,null,Q(n.data.wen_items,(i,O)=>(p(),b("li",{key:O,onClick:ft=>lt(i)},_(O+1)+"."+_(i.content),9,we))),128))])])):A("",!0)]),_:1})],64)):A("",!0)]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Ce={class:"flex p-2 py-5 box"},Ee={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},ke=t("span",null,"\u8D26\u53F7\u4F59\u989D",-1),Be={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Ae=t("span",null,"\u9501\u5B9A\u91D1\u989D",-1),$e={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Ve=t("span",null,"\u6D3B\u52A8\u5546\u54C1",-1),Ue=t("option",{value:""},"\u5168\u90E8",-1),Ye={value:"2"},je={value:"1"},Me={value:"0"},qe={value:"-1"},Le={value:"-2"},ze=tt({__name:"miandan",setup(V){const U=et(),Y=J(()=>`${U.urlPrefix}${U.apiUrl}${ot.list}`),W=st({}),T=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(s){const d=C(`
          <div class="flex items-center">
            <div class="w-9 h-9 image-fit zoom-in">
              <img class="border-white rounded-lg shadow-md w-9 h-9" src="${s.getData().pic_url}" />
            </div>
            <div class="ml-4 ">
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${s.getData().d_title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${s.getData().title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${s.getData().email||""}
              </div>
            </div>
          </div>
          `);return C(d).on("click",function(y){n(s.getData())}),d[0]},download:!0},{title:"\u4EF7\u683C",width:120,field:"price",sorter:!0,formatter(s){return C(`
          <div class="flex flex-col items-start">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5238\u540E\u4EF7:${s.getData().coupon_price}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u91D1:${s.getData().rebate_amount}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u4EF7:${(s.getData().coupon_price-s.getData().rebate_amount).toFixed(2)}
            </div>
          </div>
          `)[0]}},{title:"\u6D3B\u52A8\u65F6\u95F4",field:"",width:120,formatter(s){return C(`
          <div class="flex flex-col items-center">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
            ${x(s.getData().activity_start_time)}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${x(s.getData().activity_end_time)}
            </div>
          </div>
          `)[0]}},{title:"\u798F\u5229\u91D1",width:90,field:"rebate_amount"},{title:"\u9884\u552E\u91CF",width:90,field:"rebate_orders"},{title:"\u8DD1\u91CF",width:80,field:"promotion_orders"},{title:"\u72B6\u6001",width:90,field:"",sorter:!0,formatter(s){return s.getData().status===0?"\u672A\u63D0\u4EA4":s.getData().status===1?"\u63D0\u4EA4\u5BA1\u6838":s.getData().status===2?"\u63A8\u5E7F\u4E2D":s.getData().status===3?"\u63A8\u5E7F\u5B8C\u6210":s.getData().status===-1?"\u5DF2\u62D2\u7EDD":s.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"updated_at",formatter(s){return yt(s.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(s){if(s.getData().status===0){const d=C('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return C(d).on("click",function(y){R(s.getData())}),d[0]}if(s.getData().status!=0){const d=C('<a class="flex items-center" href="javascript:;">\u62A5\u8868</a>');return C(d).on("click",function(y){n(s.getData())}),d[0]}return""}}],f=S({item_id:"",status:"",url:""}),c=S({report:{status0:0,status1:0,status2:0,status01:0,status02:0},userData:{points:0,points_total:0,pub_goods:0}});ht(()=>{w()});const e=$(),E=$(),n=s=>{E.value.edit(s)},R=s=>{s.item_url&&(s.href=s.item_url),e.value.edit(s)},j=$(),h=s=>{j.value.reload(s),w()},w=()=>{At({}).then(s=>{s.data.item&&(c.report.status0=s.data.item[0]?s.data.item[0]:0,c.report.status1=s.data.item[1]?s.data.item[1]:0,c.report.status2=s.data.item[2]?s.data.item[2]:0,c.report.status01=s.data.item[-1]?s.data.item[-1]:0,c.report.status02=s.data.item[-2]?s.data.item[-2]:0)})};return(s,d)=>{const y=v("h-form-item"),M=v("h-form"),q=it,L=v("h-card");return p(),b(I,null,[u(L,{bordered:!1,title:"\u514D\u5355\u5546\u54C1"},{header:l(()=>[t("button",{class:"mr-2 shadow-md btn btn-primary",onClick:d[0]||(d[0]=D=>e.value.edit({}))},"\u53D1\u5E03\u514D\u5355\u5546\u54C1 ")]),extra:l(()=>[t("div",Ce,[t("div",Ee,[ke,t("span",null,_(c.userData.points),1)]),t("div",Be,[Ae,t("span",null,_(c.userData.points_total),1)]),t("div",$e,[Ve,t("span",null,_(c.userData.pub_goods),1)])])]),default:l(()=>[u(q,{ref_key:"tableRef",ref:j,columns:T,ajaxUrl:F(Y),config:F(W),queryParam:f},{search:l(()=>[u(M,{layout:"inline"},{default:l(()=>[u(y,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:l(()=>[m(t("select",{"onUpdate:modelValue":d[1]||(d[1]=D=>f.status=D),class:"w-full mt-2 form-select sm:mt-0 sm:w-auto",onChange:h},[Ue,t("option",Ye,"\u901A\u8FC7 ("+_(c.report.status2)+")",1),t("option",je,"\u5BA1\u6838\u4E2D ("+_(c.report.status1)+")",1),t("option",Me,"\u8349\u7A3F ("+_(c.report.status0)+")",1),t("option",qe,"\u62D2\u7EDD ("+_(c.report.status01)+")",1),t("option",Le,"\u4E0B\u67B6 ("+_(c.report.status02)+")",1)],544),[[ut,f.status]])]),_:1}),u(y,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:l(()=>[m(t("input",{"onUpdate:modelValue":d[2]||(d[2]=D=>f.item_id=D),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[g,f.item_id]])]),_:1}),u(y,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:l(()=>[m(t("input",{"onUpdate:modelValue":d[3]||(d[3]=D=>f.url=D),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[g,f.url]])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:h}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),u(Fe,{ref_key:"modal",ref:e,onOk:d[4]||(d[4]=D=>h(!1))},null,512),u(Bt,{ref_key:"reportModal",ref:E,onOk:h},null,512)],64)}}});export{ze as default};
