import{h as U,Z as S,j as y,H as Z,k as O,t as H,l as r,a as E,b as D,w as n,m as t,p as L,e as z,q as o,x as v,y as x,u as B,v as N,an as J,s as P,_ as V,o as K,ao as Q,a3 as Y,ap as X,G as R,ag as T,$ as q,C,a0 as I,a2 as W}from"./index.06c4c8a5.js";import{p as ee}from"./pick.82dbfc79.js";const te={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},oe=U({__name:"push",emits:["ok"],setup(M,{expose:b,emit:l}){const f=S().uploadUrl,m=y({title:"",content:"",pic_url:""}),h={},s=y({visible:!1,confirmLoading:!1});Z(()=>{});const _=()=>{s.visible=!1},g=a=>{m.pic_url=a.data.item.img},c=O(h,H(m)),d=()=>{s.visible=!0,N(()=>{Object.assign(m,{title:"",content:"",pic_url:""})})},e=a=>{if(s.confirmLoading=!0,c.value.$touch(),c.value.$invalid)c.value.$errors,s.confirmLoading=!1;else{const u=B(m);J(Object.assign(u,{task:a})).then(p=>{p.code===0&&(P.success("\u63D0\u4EA4\u6210\u529F"),l("ok",u),s.visible=!1),s.confirmLoading=!1})}};return b({edit:d}),(a,u)=>{const p=r("h-form-item"),F=r("UploadIcon"),i=r("h-upload"),w=r("h-form"),$=r("h-spin"),j=r("LoadingIcon"),G=r("h-modal");return E(),D(G,{title:"\u53D1\u5E03\u6D88\u606F",size:"modal-lg",visible:s.visible,"confirm-loading":s.confirmLoading,onCancel:_},{footer:n(()=>[t("button",{class:"w-full mb-2 mr-1 btn btn-primary",onClick:u[3]||(u[3]=k=>e(0))},[L(" \u7ACB\u5373\u63A8\u9001 "),s.confirmLoading?(E(),D(j,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):z("v-if",!0)]),t("button",{class:"w-full mb-2 mr-1 btn btn-primary",onClick:u[4]||(u[4]=k=>e(1))},[L(" \u6DFB\u52A0\u5230\u63A8\u9001\u5E93 "),s.confirmLoading?(E(),D(j,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):z("v-if",!0)])]),default:n(()=>[o($,{spinning:s.confirmLoading},{default:n(()=>[o(w,{layout:"small"},{default:n(()=>[o(p,{label:"\u6807\u9898",content:"",layout:"small"},{default:n(()=>[v(t("input",{type:"text",class:"form-control","onUpdate:modelValue":u[0]||(u[0]=k=>m.title=k),placeholder:"\u6807\u9898"},null,512),[[x,m.title]])]),_:1}),o(p,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:n(()=>[v(t("textarea",{class:"form-control","onUpdate:modelValue":u[1]||(u[1]=k=>m.content=k),rows:4,placeholder:"\u6587\u6848\uFF0C\u7CBE\u7F8E\u7B80\u6D01\u7684\u6587\u6848\uFF0C\u6709\u5229\u4E8E\u5BA2\u6237\u6210\u4EA4"},null,512),[[x,m.content]])]),_:1}),o(p,{label:"\u56FE\u7247",content:"",layout:"small"},{default:n(()=>[v(t("input",{type:"text",class:"form-control","onUpdate:modelValue":u[2]||(u[2]=k=>m.pic_url=k),placeholder:""},null,512),[[x,m.pic_url]]),o(i,{name:"file",multiple:!0,action:B(f),onChange:g},{default:n(()=>[t("button",te,[o(F,{class:"w-4 h-4 mr-2"}),L("\u4E0A\u4F20 ")])]),_:1},8,["action"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ne=V(oe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/app/push/push.vue"]]),le={class:"input-group"},ue=t("div",{class:"input-group-text"},null,-1),se=t("div",{class:"form-help"},"\u6709\u65B0\u7528\u6237\u5B89\u5353app\uFF0C\u7ED9\u7528\u6237\u53D1\u9001\u7684\u6D88\u606F\u63D0\u9192",-1),ae=t("option",{value:0},"\u5173\u95ED",-1),ie=t("option",{value:1},"\u5F00\u901A",-1),re=[ae,ie],me=t("option",{value:0},"\u5173\u95ED",-1),ce=t("option",{value:1},"\u5F00\u901A",-1),de=[me,ce],_e=t("option",{value:0},"\u5173\u95ED",-1),pe=t("option",{value:1},"\u5F00\u901A",-1),fe=[_e,pe],he={class:"input-group"},be=t("div",{class:"input-group-text"},"\u79D2",-1),ge=t("div",{class:"form-help"},"\u5EFA\u8BAE\u8BBE\u7F6E2\u5C0F\u65F6(7200)\u4EE5\u4E0A,\u7FA4\u63A8\u4EFB\u52A1\u5EFA\u8BAE\u6BCF\u592910\u4E2A\u4EE5\u5185",-1),we=U({__name:"data",setup(M,{expose:b}){const l=y({task_day_start_time:"",task_day_end_time:"",notice_install:"",push_igetui:"",push_umeng:"",push_xg:"",task_times:0}),A={},f=y({visible:!1,confirmLoading:!1});K(()=>{m()});const m=()=>{s()},h=()=>{f.visible=!0},s=()=>{Q({}).then(d=>{d.data.app_detail&&N(()=>{const e=ee(d.data.app_detail,["notice_install","push_igetui","push_umeng","push_xg","task_times","task_day_start_time","task_day_end_time"]);Object.assign(l,e)})})},_=O(A,H(l)),g=d=>{if(d.preventDefault(),_.value.$touch(),_.value.$invalid)_.value.$errors;else{const e=B(l);X(e).then(a=>{const{code:u}=a||{};u===0?P.success("\u4FDD\u5B58\u6210\u529F"):P.error(a.message)})}},c=()=>{f.visible=!1};return b({edit:h}),(d,e)=>{const a=r("h-form-item"),u=r("Litepicker"),p=r("h-form"),F=r("h-drawer");return E(),D(F,{title:"\u8BBE\u7F6E",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:c},{footer:n(()=>[t("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:g},"\u4FDD\u5B58")]),default:n(()=>[o(p,{layout:"small"},{default:n(()=>[o(a,{label:"\u65B0\u7528\u6237\u63D0\u9192\u5185\u5BB9",content:"",layout:"small"},{default:n(()=>[t("div",le,[v(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=i=>l.notice_install=i)},null,512),[[x,l.notice_install]]),ue]),se]),_:1}),o(a,{label:"\u4E2A\u63A8\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[v(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=i=>l.push_igetui=i)},re,512),[[Y,l.push_igetui]])]),_:1}),o(a,{label:"\u53CB\u76DF\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[v(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=i=>l.push_umeng=i)},de,512),[[Y,l.push_umeng]])]),_:1}),o(a,{label:"\u4FE1\u9E3D\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[v(t("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=i=>l.push_xg=i)},fe,512),[[Y,l.push_xg]])]),_:1}),o(a,{label:"\u4EFB\u52A1\u95F4\u9694\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[t("div",he,[v(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=i=>l.task_times=i)},null,512),[[x,l.task_times]]),be]),ge]),_:1}),o(a,{label:"\u4EFB\u52A1\u6BCF\u5929\u5F00\u59CB\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[o(u,{modelValue:l.task_day_start_time,"onUpdate:modelValue":e[5]||(e[5]=i=>l.task_day_start_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"HH:mm:ss",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1}),o(a,{label:"\u4EFB\u52A1\u6BCF\u5929\u7ED3\u675F\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[o(u,{modelValue:l.task_day_end_time,"onUpdate:modelValue":e[6]||(e[6]=i=>l.task_day_end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"HH:mm:ss",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ve=V(we,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/app/push/data.vue"]]),Fe=U({__name:"task",setup(M,{expose:b}){const l=S(),A=R(()=>`${l.urlPrefix}${l.apiUrl}${T.taskItems}`),f=q({}),m=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",width:150},{title:"\u5185\u5BB9",field:"content"},{title:"\u72B6\u6001",field:"status_name",width:80},{title:"\u65F6\u95F4",hozAlign:"center",field:"created_at",formatter(e){return I(e.getData().created_at,"YY-MM-DD HH:mm")},width:140},{title:"\u64CD\u4F5C",field:"action",width:50,hozAlign:"center"}],h=y({rangePicker:""}),s=y({visible:!1,confirmLoading:!1}),_=C(),g=()=>{_.value.reload(!0)},c=()=>{s.visible=!0},d=()=>{s.visible=!1};return b({show:c}),(e,a)=>{const u=r("Litepicker"),p=r("h-form-item"),F=r("h-form"),i=W,w=r("h-drawer");return E(),D(w,{size:"modal-xl",title:"\u4EFB\u52A1\u8BB0\u5F55",visible:s.visible,"confirm-loading":s.confirmLoading,onCancel:d},{default:n(()=>[o(i,{ref_key:"tableRef",ref:_,columns:m,ajaxUrl:B(A),config:B(f),queryParam:h},{search:n(()=>[o(F,{layout:"inline"},{default:n(()=>[o(p,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[o(u,{modelValue:h.rangePicker,"onUpdate:modelValue":a[0]||(a[0]=$=>h.rangePicker=$),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:g}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),ke=V(Fe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/app/push/task.vue"]]),ye=U({__name:"push",setup(M){const b=S(),l=R(()=>`${b.urlPrefix}${b.apiUrl}${T.pushItems}`),A=q({}),f=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u65F6\u95F4",hozAlign:"center",field:"created_at",formatter(d){return I(d.getData().created_at,"YY-MM-DD HH:mm")},width:140},{title:"\u6807\u9898",field:"title",width:150},{title:"\u5185\u5BB9",field:"content"},{title:"\u72B6\u6001",field:"status_name",width:80},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(){return""}}],m=y({rangePicker:""}),h=C(),s=C(),_=C(),g=C(),c=()=>{h.value.reload(!0)};return(d,e)=>{const a=r("Litepicker"),u=r("h-form-item"),p=r("h-form"),F=W,i=r("h-card");return E(),D(i,{title:"\u63A8\u9001\u6D88\u606F",bordered:!1},{header:n(()=>[t("button",{class:"mr-2 shadow-md btn btn-primary",onClick:e[0]||(e[0]=w=>s.value.edit({}))},"\u53D1\u5E03\u63A8\u9001\u6D88\u606F "),t("button",{class:"mr-2 shadow-md btn btn-primary",onClick:e[1]||(e[1]=w=>_.value.edit({}))},"\u8BBE\u7F6E "),t("button",{class:"mr-2 shadow-md btn btn-primary",onClick:e[2]||(e[2]=w=>g.value.show({}))},"\u4EFB\u52A1\u8BB0\u5F55 ")]),default:n(()=>[o(F,{ref_key:"tableRef",ref:h,columns:f,ajaxUrl:B(l),config:B(A),queryParam:m},{search:n(()=>[o(p,{layout:"inline"},{default:n(()=>[o(u,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[o(a,{modelValue:m.rangePicker,"onUpdate:modelValue":e[3]||(e[3]=w=>m.rangePicker=w),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),o(ne,{ref_key:"pushModal",ref:s,onOk:c},null,512),o(ve,{ref_key:"dataModal",ref:_,onOk:c},null,512),o(ke,{ref_key:"taskModal",ref:g,onOk:c},null,512)]),_:1})}}}),Ee=V(ye,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/app/push.vue"]]);export{Ee as default};
