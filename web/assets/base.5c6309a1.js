import{h as V,Y as C,j as p,o as D,k as w,t as S,v as E,b as j,w as o,s as i,a as f,p as n,l as s,m as N,x as c,y as m,u as b,c as A,e as O,n as T,q as v}from"./index.ea18d8b2.js";import{a as $,u as I}from"./user.43a29242.js";import{p as M}from"./pick.7e332561.js";const Q={class:"relative"},R={class:"flex-none w-24 h-24 mr-1 image-fit"},G=["src"],Y={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},P=V({__name:"base",setup(z){const g=C().uploadUrl,e=p({email:"",avatar_url:"",mobile:"",qq:""}),h={},r=p({uploading:!0,nick_name:"",avatar_url:""});D(()=>{k()});const d=w(h,S(e)),k=()=>{x()},x=()=>{$({}).then(t=>{t.data.user&&E(()=>{Object.assign(e,M(t.data.user,["avatar_url","email","mobile","qq"])),r.nick_name=t.data.user.nick_name,r.avatar_url=t.data.user.avatar_url})})},q=t=>{if(t.preventDefault(),d.value.$touch(),d.value.$invalid)d.value.$errors;else{const a=b(e);I(Object.assign(a,{})).then(l=>{const{code:_}=l||{};_===0?v.success("\u4FDD\u5B58\u6210\u529F"):v.error(l.message)})}},F=t=>{Object.assign(e,{avatar_url:t.data.item.img}),r.avatar_url=t.data.item.img};return(t,a)=>{const l=i("h-form-item"),_=i("UploadIcon"),U=i("h-upload"),y=i("h-form"),B=i("h-card");return f(),j(B,{bordered:!1,label:"\u57FA\u7840\u8BBE\u7F6E"},{menu:o(()=>[]),default:o(()=>[n(y,{label:"",border:!0},{default:o(()=>[n(l,{label:"\u7528\u6237\u540D",content:""},{default:o(()=>[s("span",null,N(r.nick_name),1)]),_:1}),n(l,{label:"\u5934\u50CF",content:""},{default:o(()=>[c(s("input",{"onUpdate:modelValue":a[0]||(a[0]=u=>e.avatar_url=u),type:"hidden"},null,512),[[m,e.avatar_url]]),n(U,{name:"file",multiple:!0,action:b(g),onChange:F},{default:o(()=>[s("div",Q,[s("div",R,[r.avatar_url?(f(),A("img",{key:0,src:r.avatar_url,alt:"",class:"rounded-full"},null,8,G)):O("",!0)]),s("button",Y,[n(_,{class:"w-4 h-4 mr-2"}),T("\u56FE\u6807\u4E0A\u4F20 ")])])]),_:1},8,["action"])]),_:1}),n(l,{label:"email",content:""},{default:o(()=>[c(s("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=u=>e.email=u)},null,512),[[m,e.email]])]),_:1}),n(l,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:o(()=>[c(s("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=u=>e.mobile=u)},null,512),[[m,e.mobile]])]),_:1}),n(l,{label:"QQ\u53F7\u7801",content:""},{default:o(()=>[c(s("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=u=>e.qq=u)},null,512),[[m,e.qq]])]),_:1}),n(l,null,{default:o(()=>[s("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:q},"\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})}}});export{P as default};
