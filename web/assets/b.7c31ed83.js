import{h as P,aq as R,N as $,j as k,G as j,o as z,d as H,k as J,t as K,s as g,O,az as Q,l as d,c as p,u as x,b as N,e as b,m as t,x as h,y,n as _,w as c,f as W,p as v,a9 as X,aC as Y,a as u,i as Z,q as r,aA as tt,aB as et,D as st,_ as ot}from"./index.92deb929.js";import{p as V}from"./pick.b6794720.js";const at={class:"container sm:px-10"},nt={class:"block grid-cols-2 gap-4 xl:grid"},it=W('<div class="flex-col hidden min-h-screen xl:flex"><a href="" class="flex items-center pt-5 -intro-x"><img alt="\u7BA1\u7406\u4E2D\u5FC3" class="w-6" src="'+tt+'"><span class="ml-3 text-lg text-white"> \u7BA1\u7406\u4E2D\u5FC3 </span></a><div class="my-auto"><img alt="\u7BA1\u7406\u4E2D\u5FC3" class="w-1/2 -mt-16 -intro-x" src="'+et+'"><div class="mt-10 text-4xl font-medium leading-tight text-white -intro-x"> \u518D\u70B9\u51FB\u51E0\u4E0B \u767B\u5F55\u5230\u60A8\u7684\u5E10\u6237. </div><div class="mt-5 text-lg text-white -intro-x text-opacity-70 dark:text-slate-400"> \u8F7B\u677E\u7BA1\u7406\u60A8\u7684\u8425\u9500 </div></div></div>',1),ut={class:"flex h-screen py-5 my-10 xl:my-0 xl:h-auto xl:py-0"},lt={class:"w-full px-5 py-8 mx-auto my-auto bg-white rounded-md shadow-md dark:bg-darkmode-600 sm:w-3/4 sm:px-8 lg:w-2/4 xl:ml-20 xl:w-auto xl:bg-transparent xl:p-0 xl:shadow-none"},ct=t("h2",{class:"text-2xl font-bold text-center intro-x xl:text-left xl:text-3xl"}," \u767B\u9646 ",-1),rt=t("div",{class:"mt-2 text-center intro-x text-slate-400 xl:hidden"}," \u518D\u70B9\u51FB\u51E0\u4E0B\u5373\u53EF\u767B\u5F55\u60A8\u7684\u5E10\u6237\u3002 ",-1),mt={class:"mt-2"},dt={key:0},pt=t("div",{class:"py-3 text-center text-[16px] font-medium"},"\u7ED1\u5B9A\u624B\u673A\u53F7",-1),_t={class:"mt-0 intro-x"},xt={class:"py-3 input-group gap-x-2"},bt={class:""},ft={key:1,class:"inline-block w-24 mb-2 mr-1 btn btn-outline-secondary"},gt={class:"mt-5 text-center intro-x xl:mt-8 xl:text-left"},ht={class:"mt-8 intro-x"},yt={class:"mt-8 intro-x"},vt={class:"py-3 input-group gap-x-2"},Bt={class:""},wt={key:1,class:"inline-block w-24 mb-2 mr-1 btn btn-outline-secondary"},kt={class:"mt-5 text-center intro-x xl:mt-8 xl:text-left"},Et=t("div",{class:"mt-10 text-center intro-x text-slate-600 dark:text-slate-500 xl:mt-24 xl:text-left"},[v(" \u6CE8\u518C\u5373\u8868\u793A\u60A8\u540C\u610F\u6211\u4EEC\u7684 "),t("a",{class:"text-primary dark:text-slate-200",href:""},"\u6761\u6B3E"),v(" \u4EE5\u53CA "),t("a",{class:"text-primary dark:text-slate-200",href:""},"\u9690\u79C1\u653F\u7B56")],-1),Ct=P({__name:"b",setup(At){const S=X(),E=R(),{loginTo:L,loginApiTo:M}=$(),s=k({username:"",password:"",mobile:"",captcha:"",open_id:"",union_id:"",platform_type:"",nick_name:"",avatar_url:""}),B=k({api:{app_id:"wx7f67e4a1366382b3",scope:"snsapi_login",redirect_uri:"https://www.haopintui.net/app/login/b"}}),n=k({sms:{isLoading:!1,smsTimeOut:0,smsText:"\u53D1\u9001\u9A8C\u8BC1\u7801"}}),U={},w=j(()=>!O(s.open_id));z(()=>{H("body").removeClass("main").removeClass("error-page").addClass("login"),E.query.code&&G(E.query.code)});const C=J(U,K(s)),A=(l,e)=>{if(l.preventDefault(),C.value.$touch(),!C.value.$invalid){const o=x(s);let m=V(o,["username","password","open_id","union_id","platform_type","nick_name","avatar_url"]);e==2&&(m=V(o,["mobile","captcha","open_id","union_id","platform_type","nick_name","avatar_url"])),m=Object.assign(m,{from_login:"business"}),L(m).then(i=>{const{code:f}=i||{};f===0?T():g.error(i.message)}).catch(i=>{g.error((i==null?void 0:i.message)||"")})}},G=l=>{M({code:l,platform_type_code:"weixinweb"}).then(e=>{const{code:o}=e||{};o===0?T():g.error(e.message)}).catch(e=>{const{data:o}=e||{};O(o.open_id)||(s.open_id=o.open_id,s.union_id=o.union_id,s.platform_type=o.platform_type,s.nick_name=o.nick_name,s.avatar_url=o.avatar_url)})},T=()=>{S.push({name:Q},!1)},D=()=>{n.sms.smsTimeOut=60,Y({code:s.mobile,sms_token:CryptoJS.MD5(`${s.mobile}`).toString()}).then(l=>{l.code==0?F():(n.sms.smsTimeOut=0,g.success(l.message))})},F=()=>{setTimeout(()=>{n.sms.smsTimeOut--,n.sms.smsTimeOut>0&&F()},1e3)};return(l,e)=>{const o=d("Tab"),m=d("TabList"),i=d("wxlogin"),f=d("TabPanel"),q=d("TabPanels"),I=d("TabGroup");return u(),p("div",null,[x(Z)()?(u(),N(st,{key:0})):b("v-if",!0),t("div",at,[t("div",nt,[b(" BEGIN: Login Info "),it,b(" END: Login Info "),b(" BEGIN: Login Form "),t("div",ut,[t("div",lt,[ct,rt,t("div",mt,[x(w)?(u(),p("div",dt,[pt,t("div",_t,[h(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>s.mobile=a),class:"block px-4 py-3 intro-x login__input form-control",placeholder:"\u624B\u673A\u53F7/\u90AE\u7BB1"},null,512),[[y,s.mobile]]),t("div",xt,[h(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>s.captcha=a),class:"block px-4 py-3 intro-x form-control",placeholder:"\u9A8C\u8BC1\u7801"},null,512),[[y,s.captcha]]),t("div",bt,[n.sms.smsTimeOut==0?(u(),p("button",{key:0,class:"inline-block w-24 mb-2 mr-1 btn btn-outline-primary",onClick:D},_(n.sms.smsText),1)):(u(),p("button",ft," \u5012\u8BA1\u65F6"+_(n.sms.smsTimeOut)+"\u79D2 ",1))])])]),t("div",gt,[t("button",{class:"w-full px-4 py-3 align-top btn btn-primary xl:mr-3",onClick:e[2]||(e[2]=a=>A(a,2))}," \u7ED1\u5B9A ")])])):(u(),N(I,{key:1},{default:c(()=>[r(m,{class:"nav-boxed-tabs"},{default:c(()=>[r(o,{class:"w-full py-2",tag:"button"},{default:c(()=>[v("\u5FAE\u4FE1\u626B\u7801\u767B\u9646")]),_:1}),r(o,{class:"w-full py-2",tag:"button"},{default:c(()=>[v(_(x(w)?"\u7ED1\u5B9A\u624B\u673A":"\u9A8C\u8BC1\u7801\u767B\u9646"),1)]),_:1})]),_:1}),r(q,{class:"mt-5"},{default:c(()=>[r(f,{class:"leading-relaxed"},{default:c(()=>[t("div",ht,[r(i,{appid:B.api.app_id,scope:B.api.scope,redirect_uri:B.api.redirect_uri},null,8,["appid","scope","redirect_uri"])])]),_:1}),r(f,{class:"leading-relaxed"},{default:c(()=>[t("div",yt,[h(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>s.mobile=a),class:"block px-4 py-3 intro-x login__input form-control",placeholder:"\u624B\u673A\u53F7/\u90AE\u7BB1"},null,512),[[y,s.mobile]]),t("div",vt,[h(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>s.captcha=a),class:"block px-4 py-3 intro-x form-control",placeholder:"\u9A8C\u8BC1\u7801"},null,512),[[y,s.captcha]]),t("div",Bt,[n.sms.smsTimeOut==0?(u(),p("button",{key:0,class:"inline-block w-24 mb-2 mr-1 btn btn-outline-primary",onClick:D},_(n.sms.smsText),1)):(u(),p("button",wt," \u5012\u8BA1\u65F6"+_(n.sms.smsTimeOut)+"\u79D2 ",1))])])]),t("div",kt,[t("button",{class:"w-full px-4 py-3 align-top btn btn-primary xl:mr-3",onClick:e[5]||(e[5]=a=>A(a,2))},_(x(w)?"\u7ED1\u5B9A":"\u767B\u9646"),1)])]),_:1})]),_:1})]),_:1}))]),Et])]),b(" END: Login Form ")])])])}}}),Ft=ot(Ct,[["__file","/Users/wu./Documents/os/web/www/web/src/views/login/b.vue"]]);export{Ft as default};
