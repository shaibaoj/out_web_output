import{h as C,Y as D,j as p,o as V,k as w,t as S,v as E,b as j,w as a,s as c,a as f,p as n,l as s,m as N,u as b,c as A,e as O,n as T,x as d,y as _,q as v}from"./index.c0431666.js";import{a as $,u as I}from"./user.74104eff.js";import{p as M}from"./pick.66208957.js";const Q={class:"relative"},R={class:"flex-none w-24 h-24 mr-1 image-fit"},G=["src"],Y={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},P=C({__name:"base",setup(z){const g=D().uploadUrl,e=p({email:"",avatar_url:"",mobile:"",qq:""}),h={},u=p({uploading:!0,nick_name:"",avatar_url:""});V(()=>{k()});const i=w(h,S(e)),k=()=>{x()},x=()=>{$({}).then(t=>{t.data.user&&E(()=>{Object.assign(e,M(t.data.user,["avatar_url","email","mobile","qq"])),u.nick_name=t.data.user.nick_name,u.avatar_url=t.data.user.avatar_url})})},q=t=>{if(t.preventDefault(),i.value.$touch(),i.value.$invalid)i.value.$errors;else{const l=b(e);I(Object.assign(l,{})).then(o=>{const{code:m}=o||{};m===0?v.success("\u4FDD\u5B58\u6210\u529F"):v.error(o.message)})}},F=t=>{Object.assign(e,{avatar_url:t.data.item.img}),u.avatar_url=t.data.item.img};return(t,l)=>{const o=c("h-form-item"),m=c("UploadIcon"),B=c("h-upload"),U=c("h-form"),y=c("h-card");return f(),j(y,{bordered:!1,label:"\u57FA\u7840\u8BBE\u7F6E"},{menu:a(()=>[]),default:a(()=>[n(U,{label:"",border:!0},{default:a(()=>[n(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[s("span",null,N(u.nick_name),1)]),_:1}),n(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[n(B,{name:"file",multiple:!0,action:b(g),onChange:F},{default:a(()=>[s("div",Q,[s("div",R,[u.avatar_url?(f(),A("img",{key:0,src:u.avatar_url,alt:"",class:"rounded-full"},null,8,G)):O("",!0)]),s("button",Y,[n(m,{class:"w-4 h-4 mr-2"}),T("\u56FE\u6807\u4E0A\u4F20 ")])])]),_:1},8,["action"])]),_:1}),n(o,{label:"email",content:""},{default:a(()=>[d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=r=>e.email=r)},null,512),[[_,e.email]])]),_:1}),n(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=r=>e.mobile=r)},null,512),[[_,e.mobile]])]),_:1}),n(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=r=>e.qq=r)},null,512),[[_,e.qq]])]),_:1}),n(o,null,{default:a(()=>[s("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:q},"\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})}}});export{P as default};
