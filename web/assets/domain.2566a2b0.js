import{r as q,d as N,s as j,y as r,b,e as A,w as u,h as e,u as t,B as g,j as i,f as L,g as c,k as P,a7 as M,v as Y,x as J,Y as $,F as z,ae as K,R as B,E as Q,X as Z,A as U,n as H,L as G,a8 as ee,c as ue,I as te,ad as I,a as R,ab as oe,aj as ne}from"./index.9f5e20bb.js";import{p as ae}from"./pick.313658ff.js";const S={getDomainGenerate:"/api/user/cms/domain/generate",getDomainItems:"/api/user/cms/domain/list",updateDomain:"/api/user/cms/domain/update",delDomainItems:"/api/user/cms/domain/delete",downloadCms:"/api/user/cms/domain/download"};function le(D){return q({url:S.updateDomain,method:"post",data:D})}function se(D){return q({url:S.delDomainItems,method:"post",data:D})}function ie(D){return q({url:S.getDomainGenerate,method:"post",data:D})}function re(D){return q({url:S.downloadCms,method:"post",data:D,responseType:"blob"})}const ce={class:"flex flex-col w-full p-5 gap-y-2"},de=c("p",null," \u514D\u8D39\u63D0\u4F9B\u7684\u4E00\u7CFB\u5217\u8F6F\u4EF6\u7A0B\u5E8F\uFF0C\u65E8\u5728\u4E0E\u5E2E\u52A9\u7528\u6237\u9AD8\u6548\u7684\u8FDB\u884C\u5BFC\u8D2D\u4E1A\u52A1\u8FD0\u8425\u3002\u4F7F\u7528\u8005\u52A1\u5FC5\u9075\u5FAA\u56FD\u5BB6\u6CD5\u5F8B\u6CD5\u89C4\u8FDB\u884C\u63A8\u5E7F\uFF0C\u4E0D\u80FD\u6709\u4EFB\u4F55\u8FDD\u53CD\u56FD\u5BB6\u6CD5\u5F8B\u6CD5\u89C4\u7684\u884C\u4E3A\uFF01\u540C\u6837\u8BF7\u9075\u5B88\u7535\u5546\u5546\u52A1\u6CD5\u89C4\u3001\u5E7F\u544A\u6CD5\u3001\u5546\u5BB6\u5E73\u53F0\u89C4\u5219\uFF0C\u4E0D\u5F97\u6709\u4EFB\u4F55\u8FDD\u89C4\u884C\u4E3A\uFF01 ",-1),me=N({__name:"download",setup(D,{expose:x}){const y=j({domain_url:"",url:""}),F=j({visible:!1,confirmLoading:!1}),C=()=>{F.visible=!1},o=n=>{F.visible=!0,Object.assign(y,n)},w=()=>{re({}).then(n=>{if(!n)return;let d=window.URL.createObjectURL(new Blob([n])),m=document.createElement("a");m.style.display="none",m.href=d,m.setAttribute("download","index.php"),document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(m.href),document.body.removeChild(m)}).catch(n=>{})};return x({edit:o}),(n,d)=>{const m=r("LoadingIcon"),k=r("h-modal");return b(),A(k,{title:"\u72EC\u7ACB\u57DF\u540D\u6E90\u7801\u6587\u4EF6\u4E0B\u8F7D",size:"lg",visible:F.visible,"confirm-loading":F.confirmLoading,onCancel:C},{footer:u(()=>[e(t(g),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:d[1]||(d[1]=E=>C())},{default:u(()=>[i(" \u5173\u95ED "),F.confirmLoading?(b(),A(m,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):L("v-if",!0)]),_:1})]),default:u(()=>[c("div",ce,[de,e(t(g),{variant:"primary",class:"w-32 mb-2 mr-1",onClick:d[0]||(d[0]=E=>w())},{default:u(()=>[i(" \u4E0B\u8F7D\u6E90\u7801\u6587\u4EF6 "),F.confirmLoading?(b(),A(m,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):L("v-if",!0)]),_:1})])]),_:1},8,["visible","confirm-loading"])}}}),fe=P(me,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/cms/modal/download.vue"]]),pe={class:"flex flex-col gap-y-2"},_e=c("option",{value:"m.shaibaoj.com"},"m.shaibaoj.com",-1),Fe=N({__name:"edit",emits:["ok"],setup(D,{expose:x,emit:y}){const C=M().uploadUrl,o=j({id:0,url:"",prefix:"",domain_url:"",site_name:"",logo_url:"",js:"",type:0}),w={},n=j({visible:!1,confirmLoading:!1}),d=Y(w,J(o)),m=f=>{n.visible=!0,Q(()=>{Object.assign(o,{id:0,url:"",prefix:"",domain_url:"",site_name:"",logo_url:"",js:"",type:0}),Object.assign(o,ae(f,["id","url","domain_url","site_name","logo_url","js","prefix","type"]))})},k=()=>{if(n.confirmLoading=!0,d.value.$touch(),d.value.$invalid)d.value.$errors,n.confirmLoading=!1;else{const f=t(o);Z(f.domain_url)||Object.assign(f,{url:f.prefix+"."+f.domain_url}),le(f).then(a=>{const{code:p}=a||{};p===0?U.success("\u4FDD\u5B58\u6210\u529F"):U.error(a.message),n.confirmLoading=!1,y("ok",f),n.visible=!1})}},E=()=>{n.visible=!1},h=f=>{Object.assign(o,{logo_url:f.data.item.img})};return x({edit:m}),(f,a)=>{const p=r("h-form-item"),V=r("h-upload"),s=r("FormTextarea"),l=r("h-form"),v=r("h-spin"),T=r("LoadingIcon"),W=r("h-modal");return b(),A(W,{title:"\u57DF\u540D\u7F16\u8F91",size:"lg",visible:n.visible,"confirm-loading":n.confirmLoading,onCancel:E},{footer:u(()=>[e(t(g),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:a[6]||(a[6]=_=>k())},{default:u(()=>[i(" \u4FDD\u5B58 "),n.confirmLoading?(b(),A(T,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):L("v-if",!0)]),_:1})]),default:u(()=>[e(v,{spinning:n.confirmLoading},{default:u(()=>[e(l,{border:!1},{default:u(()=>[c("div",pe,[o.type==1?(b(),A(p,{key:0,label:"\u57DF\u540D",content:"",layout:"small"},{default:u(()=>[e(t($),null,{default:u(()=>[e(t($).Text,{class:"whitespace-nowrap"},{default:u(()=>[i("Http://")]),_:1}),e(t(z),{type:"text",modelValue:o.url,"onUpdate:modelValue":a[0]||(a[0]=_=>o.url=_)},null,8,["modelValue"])]),_:1})]),_:1})):L("v-if",!0),o.type==2?(b(),A(p,{key:1,label:"\u57DF\u540D",content:"",layout:"small"},{default:u(()=>[e(t($),null,{default:u(()=>[e(t($).Text,{class:"whitespace-nowrap"},{default:u(()=>[i("Http://")]),_:1}),e(t(z),{type:"text",modelValue:o.prefix,"onUpdate:modelValue":a[1]||(a[1]=_=>o.prefix=_)},null,8,["modelValue"]),e(t($).Text,{class:"whitespace-nowrap"},{default:u(()=>[e(t(K),{modelValue:o.domain_url,"onUpdate:modelValue":a[2]||(a[2]=_=>o.domain_url=_),"form-select-size":"sm"},{default:u(()=>[_e]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):L("v-if",!0),e(p,{label:"\u7F51\u7AD9\u540D\u5B57",content:"",layout:"small"},{default:u(()=>[e(t(z),{type:"text",modelValue:o.site_name,"onUpdate:modelValue":a[3]||(a[3]=_=>o.site_name=_)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u7F51\u7AD9logo",content:"",layout:"small"},{default:u(()=>[e(t(z),{type:"text",modelValue:o.logo_url,"onUpdate:modelValue":a[4]||(a[4]=_=>o.logo_url=_)},null,8,["modelValue"]),e(V,{name:"file",action:t(C),onChange:h},{default:u(()=>[e(t(g),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:u(()=>[e(t(B),{icon:"Upload",class:"w-4 h-4 mr-2"}),i("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action"])]),_:1}),e(p,{label:"js\u4EE3\u7801",content:"",layout:"small"},{default:u(()=>[e(s,{modelValue:o.js,"onUpdate:modelValue":a[5]||(a[5]=_=>o.js=_),placeholder:"\u9700\u8981\u7ED9\u5355\u72EC\u57DF\u540D\u8BBE\u7F6E\u4EE3\u7801\u4F7F\u7528\uFF0C\u4E0D\u9700\u8981\u60C5\u51B5\u8BEF\u586B"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ge=P(Fe,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/cms/modal/edit.vue"]]),De=c("span",null,[i(" 1\u3001\u4E0A\u4F20\u9A8C\u8BC1\u6587\u4EF6\u4EC5\u4EC5\u9488\u5BF9\u4F7F\u7528\u597D\u7269\u8054\u76DF\u7A7A\u95F4\u6216\u8005\u514D\u8D39\u4E8C\u7EA7\u57DF\u540D\u7684\u60C5\u51B5"),c("br"),i(" 2\u3001\u5982\u679C\u4F60\u4F7F\u7528\u7684\u81EA\u5DF1\u7A7A\u95F4\u6216\u72EC\u7ACB\u670D\u52A1\u5668\uFF0C\u8BF7\u76F4\u63A5\u4E0B\u8F7D\u9A8C\u8BC1\u6587\u4EF6\u5230\u4F60\u670D\u52A1\u5668\uFF0C\u65E0\u6CD5\u901A\u8FC7\u6B64\u5904\u4E0A\u4F20\u9A8C\u8BC1\u6587\u4EF6 ")],-1),he={class:"flex flex-col gap-y-2"},Ce=N({__name:"data",setup(D,{expose:x}){const F=M().uploadUrl,C=j({id:0,url:""}),o=j({visible:!1,confirmLoading:!1}),w=H(()=>C.url),n=()=>{o.visible=!1},d=E=>{o.visible=!0,Object.assign(C,E)},m=E=>{U.success("\u4E0A\u4F20\u6210\u529F,\u53BB\u9A8C\u8BC1\u5427")},k=E=>{U.success("\u4E0A\u4F20\u6210\u529F,\u53BB\u9A8C\u8BC1\u5427")};return x({edit:d}),(E,h)=>{const f=r("Alert"),a=r("h-upload"),p=r("h-form-item"),V=r("h-form"),s=r("h-spin"),l=r("LoadingIcon"),v=r("h-modal");return b(),A(v,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",size:"lg",visible:o.visible,"confirm-loading":o.confirmLoading,onCancel:n},{footer:u(()=>[e(t(g),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:h[0]||(h[0]=T=>n())},{default:u(()=>[i(" \u5173\u95ED "),o.confirmLoading?(b(),A(l,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):L("v-if",!0)]),_:1})]),default:u(()=>[e(f,{class:"flex items-center mb-2 alert-outline-primary"},{default:u(()=>[e(t(B),{icon:"AlertCircle",class:"w-6 h-6 mr-2"}),De]),_:1}),e(s,{spinning:o.confirmLoading},{default:u(()=>[e(V,{border:!1},{default:u(()=>[c("div",he,[e(p,{label:"\u9A8C\u8BC1\u6587\u4EF6",content:"",layout:"small"},{default:u(()=>[e(a,{name:"file",action:t(F),data:{url:t(w),action:"root"},fileType:[".txt",".jpg",".png",".jpeg",".gif"],onChange:m},{default:u(()=>[e(t(g),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:u(()=>[e(t(B),{icon:"Upload",class:"w-4 h-4 mr-2"}),i("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action","data","fileType"])]),_:1}),e(p,{label:"\u5176\u4ED6\u9A8C\u8BC1\u6587\u4EF6",content:"",layout:"small"},{default:u(()=>[e(a,{name:"file",action:t(F),data:{url:t(w),action:"other"},fileType:[".txt",".jpg",".png",".jpeg",".gif"],onChange:k},{default:u(()=>[e(t(g),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:u(()=>[e(t(B),{icon:"Upload",class:"w-4 h-4 mr-2"}),i("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action","data","fileType"])]),_:1})])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Ee=P(Ce,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/cms/modal/data.vue"]]),ve={class:"flex items-center justify-center w-5 h-5"},be={class:"mt-2 xl:mt-0"},we={class:"sticky top-0 mt-5 box"},Ae={class:"p-5"},Be={class:"flex items-center font-medium text-primary",target:"_blank",rel:"noopener noreferrer",href:"https://www.xxxxxx.com/article/7"},xe={class:"sticky top-0"},ye={class:"relative p-5 mt-10 border rounded-md border-warning bg-warning/20 dark:border-0 dark:bg-darkmode-600"},ke=c("h2",{class:"text-lg font-medium"},"\u63D0\u793A",-1),je={class:"mt-2 text-xs leading-relaxed text-slate-600 dark:text-slate-500"},Le=c("div",null,[i(" 1\u3001\u5982\u679C\u4F60\u6709\u57DF\u540D\uFF0C\u6CA1\u6709\u7A7A\u95F4\uFF0C\u53EF\u4EE5\u57DF\u540D\u89E3\u6790\u5230cname\u89E3\u6790\u5230:cms.youdanhui.cn\uFF0C\u4F7F\u7528\u597D\u7269\u8054\u76DF\u63D0\u4F9B\u7684\u7A7A\u95F4\u5373\u53EF\uFF0C\u76EE\u524D\u7A7A\u95F4\u514D\u8D39\u4F7F\u7528 "),c("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.xxxxxx.com/article/7"}," \u89E3\u6790\u6559\u7A0B>>> ")],-1),Ue={class:"mt-2"},Ve=N({__name:"domain",setup(D){const{proxy:x}=ne(),y=M(),F=H(()=>`${y.urlPrefix}${y.apiUrl}${S.getDomainItems}`),C=G(),o=G(),w=G(),n=G(),d=j({url:""}),m=ee({}),k=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",minWidth:200,responsive:0,field:"url",vertAlign:"middle",print:!0,download:!0,headerSort:!1,formatter(s){return`<div>
                <div class="font-medium whitespace-nowrap"><a target="_blank" href="http://${s.getData().url}">${s.getData().url}</a></div>
              </div>`}},{title:"\u8BBE\u7F6E",minWidth:200,field:"",hozAlign:"center",vertAlign:"middle",print:!1,download:!1,headerSort:!1,formatter(s){const l=R(`    <div class="flex items-center lg:justify-center">
          <a class="flex items-center mr-3" href="javascript:;">
                   \u6587\u4EF6\u9A8C\u8BC1
                </a>
                </div>`);return R(l).on("click",function(v){a(s.getData())}),l[0]}},{title:"\u64CD\u4F5C",minWidth:200,field:"actions",responsive:1,hozAlign:"center",vertAlign:"middle",print:!1,download:!1,headerSort:!1,formatter(s){const l=R(`    <div class="flex items-center lg:justify-center">
          <a class="flex items-center mr-3" href="javascript:;">
                  <i data-lucide="check-square" class="w-4 h-4 mr-1"></i> \u4FEE\u6539
                </a>
                <a class="flex items-center text-danger" href="javascript:;">
                  <i data-lucide="trash-2" class="w-4 h-4 mr-1"></i> \u5220\u9664
                </a>
                </div>`);return R(l).find("a:first-child").on("click",function(v){v.target,p(s.getData())}),R(l).find("a:nth-child(2)").on("click",function(){V(s.getData())}),l[0]}}],E=()=>{ie({domain_url:"m.shaibaoj.com"}).then(s=>{U.success(s.message),h()})},h=()=>{o.value.reload(!0)},f=()=>{w.value.edit({})},a=s=>{n.value.edit(s)},p=s=>{C.value.edit(s)},V=s=>{const l=x.$confirm;l({title:"\u63D0\u793A",content:"\u771F\u7684\u8981\u5220\u9664\u4E48 ?",onOk:()=>{se({id:s.id}).then(v=>{U.success(v.message),h()})},onCancel(){}})};return(s,l)=>{const v=r("FormInput"),T=r("h-form-item"),W=r("h-form"),_=oe,X=r("h-card");return b(),ue(te,null,[e(X,{title:"\u57DF\u540D\u7BA1\u7406",bordered:!1},{header:u(()=>[e(t(g),{variant:"primary",class:"mr-2 shadow-md",onClick:l[0]||(l[0]=O=>E())},{default:u(()=>[i(" \u4E00\u952E\u7533\u8BF7\u514D\u8D39\u57DF\u540D ")]),_:1}),e(t(g),{variant:"primary",class:"mr-2 shadow-md",onClick:f},{default:u(()=>[i(" \u6E90\u7801\u4E0B\u8F7D ")]),_:1}),e(t(I),{class:"ml-auto pos-dropdown sm:ml-0"},{default:u(()=>[e(t(I).Button,{as:t(g),class:"px-2 btn box"},{default:u(()=>[c("span",ve,[e(t(B),{icon:"Plus",class:"w-4 h-4"})])]),_:1},8,["as"]),e(t(I).Items,{class:"w-40"},{default:u(()=>[e(t(I).Item,{onClick:l[1]||(l[1]=O=>p({type:1}))},{default:u(()=>[e(t(B),{icon:"File",class:"w-4 h-4 mr-2"}),i(" \u7ED1\u5B9A\u81EA\u5B9A\u4E49\u57DF\u540D ")]),_:1}),e(t(I).Item,{onClick:l[2]||(l[2]=O=>p({type:2}))},{default:u(()=>[e(t(B),{icon:"File",class:"w-4 h-4 mr-2"}),i(" \u7ED1\u5B9A\u514D\u8D39\u57DF\u540D ")]),_:1})]),_:1})]),_:1})]),menu:u(()=>[c("div",we,[c("div",Ae,[c("a",Be,[e(t(B),{icon:"Activity",class:"w-4 h-4 mr-2"}),i(" \u89E3\u6790\u6559\u7A0B>>> ")])])]),c("div",xe,[c("div",ye,[ke,c("div",je,[Le,c("div",Ue,[i(" 2\u3001\u5982\u679C\u4F60\u6709\u57DF\u540D\uFF0C\u6709\u72EC\u7ACB\u7A7A\u95F4\u6216\u8005\u670D\u52A1\u5668\uFF0C\u8BF7\u4E0B\u8F7D\u6E90\u7801\u5230\u81EA\u5DF1\u7A7A\u95F4\u5C31\u53EF\u4EE5\u4E86\uFF0C\u6E90\u7801\u6587\u4EF6\u4E0B\u8F7D\u5730\u5740: "),e(t(g),{variant:"primary",class:"w-24 mb-2 mr-1",icon:"download",onClick:f},{default:u(()=>[i("\u4E0B\u8F7D\u6E90\u7801")]),_:1})])])])])]),default:u(()=>[e(_,{ref_key:"tableRef",ref:o,columns:k,ajaxUrl:t(F),config:t(m),queryParam:d},{search:u(()=>[e(W,{layout:"inline"},{default:u(()=>[e(T,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:u(()=>[e(v,{modelValue:d.url,"onUpdate:modelValue":l[3]||(l[3]=O=>d.url=O),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),c("div",be,[e(t(g),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:h},{default:u(()=>[i(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),e(ge,{ref_key:"editRef",ref:C,onOk:h},null,512),e(fe,{ref_key:"downloadRef",ref:w,onOk:h},null,512),e(Ee,{ref_key:"dataRef",ref:n,onOk:h},null,512)],64)}}}),Re=P(Ve,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/cms/domain.vue"]]);export{Re as default};
