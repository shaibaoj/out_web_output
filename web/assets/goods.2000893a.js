import{h as j,Z as U,G as S,$ as q,j as b,o as R,C as M,l as p,b as T,w as n,a as V,m as s,q as l,x as _,a3 as z,n as m,y as B,u as E,d as a,a5 as F,a0 as P,s as v,a2 as G,a9 as H,_ as N}from"./index.bff3ee16.js";import{b as Y,c as I,d as L}from"./goods.eb22bc49.js";const W=s("option",{value:""},"\u5168\u90E8",-1),Z={value:"2"},J={value:"1"},K={value:"0"},O={value:"-1"},Q={value:"-2"},X=j({__name:"goods",setup(tt){const g=U(),x=S(()=>`${g.urlPrefix}${g.apiUrl}${I.list}`),y=H(),C=q({}),$=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u4E3B\u56FE",width:50,field:"pic_url",formatter(t){return a(`<a target="_blank" href="${t.getData().item_url}">
          <img src="${t.getData().pic_url}" />
        </a>`)[0]}},{title:"\u77ED\u6807\u9898",field:"title",formatter(t){return a(`<a target="_blank" href="https://www.haowulm.com/?coupon=1&q=${encodeURIComponent(t.getData().item_url)}">
          ${t.getData().title}
        </a>`)[0]}},{title:"\u539F\u4EF7/\u5238\u540E\u4EF7	",width:120,field:"price",sorter:!0,formatter(t){return a(`<a target="_blank" href="${t.getData().item_url}">
          ${t.getData().price}
        </a>`)[0]}},{title:"\u4F63\u91D1\u6BD4\u4F8B",width:80,field:"coupon.commission_rate",formatter(t){return t.getData().coupon.commission_rate+"%"}},{title:"\u4F18\u60E0\u5238",width:80,field:"money",formatter(t){return a(`<a target="_blank" href="${t.getData().coupon_url}">
        \u67E5\u770B
        </a>`)[0]}},{title:"\u8D77\u6B62\u65E5\u671F",field:"",width:100,formatter(t){return a(`
        ${t.getData().start_time?`<span>${F(t.getData().start_time)}</span>`:""}
        ${t.getData().end_time?`<p>${F(t.getData().end_time)}</p>`:""}
        `)[0]}},{title:"\u9500\u91CF",width:50,field:"volume"},{title:"\u72B6\u6001",width:80,field:"",sorter:!0,formatter(t){return t.getData().status===0?"\u8349\u7A3F":t.getData().status===1?"\u5F85\u5BA1\u6838":t.getData().status===2?"\u4E0A\u67B6":t.getData().status===-1?"\u5DF2\u62D2\u7EDD":t.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u680F\u76EE",field:"category.short_name",width:60},{title:"\u5E97\u94FA",field:"user_type",width:80,formatter(t){return t.getData().user_type==="B"?"\u5929\u732B":"\u6DD8\u5B9D"}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"updated_at",formatter(t){return P(t.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(t){if(t.getData().status===-2){const e=a('<a class="flex items-center" href="javascript:;">\u6362\u5238</a>');return a(e).on("click",function(u){d(t.getData())}),e[0]}else if(t.getData().status===-1){const e=a('<a class="flex items-center" href="javascript:;">\u6362\u5238</a>');return a(e).on("click",function(u){d(t.getData())}),e[0]}else if(t.getData().status===0){const e=a('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return a(e).on("click",function(u){d(t.getData())}),e[0]}else if(t.getData().status===1){const e=a('<a class="flex items-center" href="javascript:;">\u64A4\u9500\u5BA1\u6838</a>');return a(e).on("click",function(u){D(t.getData(),0)}),e[0]}else if(t.getData().status===2){const e=a('<a class="flex items-center" href="javascript:;">\u4E0B\u67B6</a>');return a(e).on("click",function(u){D(t.getData(),-2)}),e[0]}return""}}],r=b({item_id:"",status:"",url:""}),o=b({report:{status0:0,status1:0,status2:0,status01:0,status02:0}});R(()=>{w()});const D=(t,e)=>{L({id:t.id,status:e}).then(u=>{const{code:c}=u||{};c===0?v.success(u.message):v.error(u.message),f(!1)})},d=t=>{var e;y.push({name:"business-goods-goods",query:{id:(e=t.id)!=null?e:""}},!0)},h=M(),f=t=>{h.value.reload(t),w()},w=()=>{Y({}).then(t=>{t.data.item&&(o.report.status0=t.data.item[0]?t.data.item[0]:0,o.report.status1=t.data.item[1]?t.data.item[1]:0,o.report.status2=t.data.item[2]?t.data.item[2]:0,o.report.status01=t.data.item[-1]?t.data.item[-1]:0,o.report.status02=t.data.item[-2]?t.data.item[-2]:0)})};return(t,e)=>{const u=p("h-form-item"),c=p("h-form"),k=G,A=p("h-card");return V(),T(A,{bordered:!1,title:"\u5546\u54C1\u53D1\u5E03"},{header:n(()=>[s("button",{class:"mr-2 shadow-md btn btn-primary",onClick:e[0]||(e[0]=i=>d({}))},"\u53D1\u5E03\u5546\u54C1 ")]),default:n(()=>[l(k,{ref_key:"tableRef",ref:h,columns:$,ajaxUrl:E(x),config:E(C),queryParam:r},{search:n(()=>[l(c,{layout:"inline"},{default:n(()=>[l(u,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:n(()=>[_(s("select",{"onUpdate:modelValue":e[1]||(e[1]=i=>r.status=i),class:"w-full mt-2 form-select sm:mt-0 sm:w-auto",onChange:f},[W,s("option",Z,"\u901A\u8FC7 ("+m(o.report.status2)+")",1),s("option",J,"\u5BA1\u6838\u4E2D ("+m(o.report.status1)+")",1),s("option",K,"\u8349\u7A3F ("+m(o.report.status0)+")",1),s("option",O,"\u62D2\u7EDD ("+m(o.report.status01)+")",1),s("option",Q,"\u4E0B\u67B6 ("+m(o.report.status02)+")",1)],544),[[z,r.status]])]),_:1}),l(u,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:n(()=>[_(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>r.item_id=i),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[B,r.item_id]])]),_:1}),l(u,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:n(()=>[_(s("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>r.url=i),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[B,r.url]])]),_:1}),s("div",{class:"mt-2 xl:mt-0"},[s("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:f}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),ut=N(X,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/goods.vue"]]);export{ut as default};
