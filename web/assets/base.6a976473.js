import{h as D,Z as y,j as p,o as C,k as V,t as S,v as E,l as c,b as j,w as a,a as f,q as n,m as l,n as N,u as b,c as A,e as O,p as T,x as d,y as _,s as v,_ as $}from"./index.53559b39.js";import{a as I,u as M}from"./user.2c54532c.js";import{p as Q}from"./pick.8b56a9dd.js";const R={class:"relative"},G={class:"flex-none w-24 h-24 mr-1 image-fit"},Z=["src"],z={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},H=D({__name:"base",setup(J){const g=y().uploadUrl,e=p({email:"",avatar_url:"",mobile:"",qq:""}),h={},u=p({uploading:!0,nick_name:"",avatar_url:""});C(()=>{w()});const i=V(h,S(e)),w=()=>{k()},k=()=>{I({}).then(t=>{t.data.user&&E(()=>{Object.assign(e,Q(t.data.user,["avatar_url","email","mobile","qq"])),u.nick_name=t.data.user.nick_name,u.avatar_url=t.data.user.avatar_url})})},x=t=>{if(t.preventDefault(),i.value.$touch(),i.value.$invalid)i.value.$errors;else{const s=b(e);M(Object.assign(s,{})).then(o=>{const{code:m}=o||{};m===0?v.success("\u4FDD\u5B58\u6210\u529F"):v.error(o.message)})}},q=t=>{Object.assign(e,{avatar_url:t.data.item.img}),u.avatar_url=t.data.item.img};return(t,s)=>{const o=c("h-form-item"),m=c("UploadIcon"),F=c("h-upload"),U=c("h-form"),B=c("h-card");return f(),j(B,{bordered:!1,label:"\u57FA\u7840\u8BBE\u7F6E"},{menu:a(()=>[]),default:a(()=>[n(U,{label:"",border:!0},{default:a(()=>[n(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[l("span",null,N(u.nick_name),1)]),_:1}),n(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[n(F,{name:"file",multiple:!0,action:b(g),onChange:q},{default:a(()=>[l("div",R,[l("div",G,[u.avatar_url?(f(),A("img",{key:0,src:u.avatar_url,alt:"",class:"rounded-full"},null,8,Z)):O("v-if",!0)]),l("button",z,[n(m,{class:"w-4 h-4 mr-2"}),T("\u56FE\u6807\u4E0A\u4F20 ")])])]),_:1},8,["action"])]),_:1}),n(o,{label:"email",content:""},{default:a(()=>[d(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=r=>e.email=r)},null,512),[[_,e.email]])]),_:1}),n(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[d(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=r=>e.mobile=r)},null,512),[[_,e.mobile]])]),_:1}),n(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[d(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=r=>e.qq=r)},null,512),[[_,e.qq]])]),_:1}),n(o,null,{default:a(()=>[l("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:x},"\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})}}}),X=$(H,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/info/base.vue"]]);export{X as default};
