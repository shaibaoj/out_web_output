import{d as N,a2 as U,l as b,G as F,o as O,m as j,t as P,af as I,s as J,n as i,e as T,w as e,b as _,h as a,u,g as l,c as v,f as B,B as $,j as q,ag as G,q as w,k as R}from"./index.004badce.js";import{p as M}from"./pick.42c54d0f.js";const z={class:"app-icon"},H=l("i",{class:"cmsfont icon-jia"},null,-1),K=["src"],L=l("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),Q={class:"app-icon static-icon"},W=l("i",{class:"cmsfont icon-jia"},null,-1),X=["src"],Y=l("a",{class:"icons-hover-bg"}," \u56FE\u6807\u4E0A\u4F20 ",-1),Z=N({__name:"setting",setup(tt){const m=U().uploadUrl,s=b({name:"",icon:"",startup_pic:"",brief:""}),V={},o=b({uploading:!0,icon:{url:""},startup_pic:{url:""}}),f=F(()=>o.icon.url?o.icon.url:""),g=F(()=>o.startup_pic.url?o.startup_pic.url:"");O(()=>{C()});const p=j(V,P(s)),C=()=>{E()},E=()=>{I({}).then(t=>{t.data.app&&J(()=>{const n=M(t.data.app,["name","icon","startup_pic","brief"]);n.icon=JSON.stringify(t.data.app.icon),n.startup_pic=JSON.stringify(t.data.app.startup_pic),Object.assign(s,n),o.icon.url=t.data.app.icon.url,o.startup_pic.url=t.data.app.startup_pic.url})})},A=t=>{if(t.preventDefault(),Object.assign(s,{icon:JSON.stringify(o.icon),startup_pic:JSON.stringify(o.startup_pic)}),p.value.$touch(),p.value.$invalid)p.value.$errors;else{const n=u(s);G(n).then(r=>{const{code:c}=r||{};c===0?w.success("\u4FDD\u5B58\u6210\u529F"):w.error(r.message)})}},S=t=>{o.icon.url=t.data.item.img},k=t=>{o.startup_pic.url=t.data.item.img};return(t,n)=>{const r=i("FormInput"),c=i("h-form-item"),h=i("h-upload"),x=i("FormTextarea"),y=i("h-form"),D=i("h-card");return _(),T(D,{bordered:!1,title:"APP\u8BBE\u7F6E"},{menu:e(()=>[]),default:e(()=>[a(y,{label:"\u57FA\u7840\u8BBE\u7F6E",border:!0},{default:e(()=>[a(c,{label:"App\u540D\u79F0",content:""},{default:e(()=>[a(r,{type:"text",modelValue:s.name,"onUpdate:modelValue":n[0]||(n[0]=d=>s.name=d),placeholder:"App\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(c,{label:"APP\u56FE\u6807",content:""},{default:e(()=>[a(h,{name:"file",multiple:!0,action:u(m),onChange:S},{default:e(()=>[l("div",null,[l("div",z,[H,u(f)?(_(),v("img",{key:0,src:u(f)},null,8,K)):B("v-if",!0),L])])]),_:1},8,["action"])]),_:1}),a(c,{label:"\u542F\u52A8\u753B\u9762",content:""},{default:e(()=>[a(h,{name:"file",multiple:!0,action:u(m),onChange:k},{default:e(()=>[l("div",null,[l("div",Q,[W,u(g)?(_(),v("img",{key:0,src:u(g)},null,8,X)):B("v-if",!0),Y])])]),_:1},8,["action"])]),_:1}),a(c,{label:"\u7B80\u4ECB\u63CF\u8FF0",content:""},{default:e(()=>[a(x,{modelValue:s.brief,"onUpdate:modelValue":n[1]||(n[1]=d=>s.brief=d),rows:10,placeholder:""},null,8,["modelValue"])]),_:1}),a(c,null,{default:e(()=>[a(u($),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:A},{default:e(()=>[q("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})}}}),nt=R(Z,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/app/setting.vue"]]);export{nt as default};
