import{r as T,h as L,j as D,k as O,t as P,l as i,a as x,b as F,w as l,m as c,p as N,e as R,q as s,x as U,y as E,v as S,a5 as Y,u as C,a6 as V,s as q,_ as j,Z as W,G as z,$ as G,C as $,c as I,F as Z,d as b,a1 as B,a2 as H}from"./index.546cbf4d.js";import{p as J}from"./pick.9a0d5d51.js";const A={list:"/api/admin/activity/list",adds:"/api/admin/activity/adds",update:"/api/admin/activity/update"};function K(w){return T({timeout:6e4,url:A.adds,method:"post",data:w})}const Q=L({__name:"edit",emits:["ok"],setup(w,{expose:f,emit:v}){const n=D({start_time:"",end_time:"",content:""}),h={},a=D({visible:!1,confirmLoading:!1}),_=()=>{a.visible=!1},r=O(h,P(n)),p=e=>{a.visible=!0,S(()=>{Object.assign(n,{start_time:"",end_time:"",content:""}),Object.assign(n,J(e,["content"])),n.start_time=Y(e.start_time),n.end_time=Y(e.end_time)})},o=e=>{if(a.confirmLoading=!0,r.value.$touch(),r.value.$invalid)r.value.$errors,a.confirmLoading=!1;else{let t=C(n);t.start_time&&(t=Object.assign(t,{start_time:V(t.start_time)})),t.end_time&&(t=Object.assign(t,{end_time:V(t.end_time)})),K(Object.assign(t,{plan:e})).then(()=>{q.success("\u53D1\u5E03\u6210\u529F"),a.confirmLoading=!1,v("ok",t),a.visible=!1})}};return f({edit:p}),(e,t)=>{const g=i("Litepicker"),d=i("h-form-item"),k=i("h-form"),y=i("h-spin"),u=i("LoadingIcon"),M=i("h-modal");return x(),F(M,{title:"\u6D3B\u52A8\u5546\u54C1",size:"modal-xl",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:_},{footer:l(()=>[c("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:t[3]||(t[3]=m=>o(11))},[N(" \u6279\u91CF\u6DFB\u52A0 "),a.confirmLoading?(x(),F(u,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):R("v-if",!0)])]),default:l(()=>[s(y,{spinning:a.confirmLoading},{default:l(()=>[s(k,{layout:"small"},{default:l(()=>[s(d,{label:"\u5F00\u59CB\u65F6\u95F4",content:"",layout:"small"},{default:l(()=>[s(g,{modelValue:n.start_time,"onUpdate:modelValue":t[0]||(t[0]=m=>n.start_time=m),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-full mx-auto form-control"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u7ED3\u675F\u65F6\u95F4",content:"",layout:"small"},{default:l(()=>[s(g,{modelValue:n.end_time,"onUpdate:modelValue":t[1]||(t[1]=m=>n.end_time=m),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-full mx-auto form-control"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:l(()=>[U(c("textarea",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=m=>n.content=m),rows:8},null,512),[[E,n.content]])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),X=j(Q,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/activity/edit.vue"]]),ee=L({__name:"activity",setup(w){const f=W(),v=z(()=>`${f.urlPrefix}${f.apiUrl}${A.list}`),n=G({}),h=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u56FE\u7247",width:60,field:"pic_url",formatter(o){var e;return b(`<a target="_blank" href="${o.getData().item_url}">
          <img src="${(e=o.getData().goods)==null?void 0:e.pic_url}" />
        </a>`)[0]}},{title:"\u6807\u9898",field:"title",formatter(o){var e;return b(`<a target="_blank" href="${o.getData().item_url}">
          ${(e=o.getData().goods)==null?void 0:e.title}
        </a>`)[0]}},{title:"\u4EF7\u683C",width:150,field:"",formatter(o){return o.getData().price}},{title:"\u9500\u91CF",width:80,field:"",formatter(o){var e;return(e=o.getData().goods)==null?void 0:e.volume}},{title:"\u65E5\u9500\u91CF",width:100,field:"",formatter(o){var e;return(e=o.getData().goods_data)==null?void 0:e.day_sales}},{title:"2\u5C0F\u65F6\u9500\u91CF",width:100,field:"",formatter(o){var e;return(e=o.getData().goods_data)==null?void 0:e.sales2h}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(o){if(o.getData().status===0){const e=b('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return b(e).on("click",function(t){}),e[0]}return""}}],a=D({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),_=$(),r=$(),p=()=>{a.startTime=B(a.rangePicker)[0],a.endTime=B(a.rangePicker)[0],_.value.reload(!0)};return(o,e)=>{const t=i("h-form-item"),g=i("Litepicker"),d=i("h-form"),k=H,y=i("h-card");return x(),I(Z,null,[s(y,{bordered:!1,title:"\u6D3B\u52A8"},{header:l(()=>[c("button",{class:"mr-2 shadow-md btn btn-primary",onClick:e[0]||(e[0]=u=>r.value.edit({}))},"\u65B0\u5EFA ")]),default:l(()=>[s(k,{ref_key:"tableRef",ref:_,columns:h,ajaxUrl:C(v),config:C(n),queryParam:a},{search:l(()=>[s(d,{layout:"inline"},{default:l(()=>[s(t,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:l(()=>[U(c("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>a.name=u),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[E,a.name]])]),_:1}),s(t,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[s(g,{modelValue:a.rangePicker,"onUpdate:modelValue":e[2]||(e[2]=u=>a.rangePicker=u),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),c("div",{class:"mt-2 xl:mt-0"},[c("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:p}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),s(X,{ref_key:"modal",ref:r,onOk:p},null,512)],64)}}}),oe=j(ee,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/activity.vue"]]);export{oe as default};
