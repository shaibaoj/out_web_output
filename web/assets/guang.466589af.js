import{h as D,j as k,o as U,k as $,t as M,v as Y,a as C,b as A,w as s,l as e,p as a,x as p,z as T,y as v,m as j,u as w,q as E,s as m,Y as P,D as S,Z as L,C as x,c as O,F as q,$ as R,a1 as z}from"./index.664fed4d.js";import{g as N,u as H,b as W}from"./market.4a9371bf.js";import{p as G}from"./pick.a27d88cd.js";const I={class:"form-check form-switch"},Z=e("label",{class:"form-check-label"},"\u662F\u5426\u5F00\u542F\u901B\u79EF\u5206\u529F\u80FD",-1),J={class:"input-group"},K=e("div",{class:"input-group-text"},"\u4E2A",-1),Q=e("div",{class:"form-help"},"\u6BCF\u6B21\u5956\u52B1\u79EF\u5206",-1),X={class:"input-group"},ee=e("div",{class:"input-group-text"},"\u6B21",-1),te=e("div",{class:"form-help"},"\u6BCF\u5929\u6700\u5927\u5956\u52B1\u6B21\u6570",-1),oe={class:"form-help"},se=D({__name:"data",emits:["ok"],setup(V,{expose:_,emit:F}){const t=k({points:0,day_times:0,views:0,status:!1}),y={},n=k({visible:!1,confirmLoading:!1});U(()=>{b()});const c=$(y,M(t)),b=()=>{g()},g=()=>{N({market_code:"guang"}).then(i=>{i.data.item&&Y(()=>{const o=G(i.data.item,["points","views","day_times"]);Object.assign(t,o),o.status=i.data.item.status===1})})},h=i=>{if(i.preventDefault(),c.value.$touch(),c.value.$invalid)c.value.$errors;else{const o=w(t);H(Object.assign(o,{market_code:"guang",status:t.status?1:0})).then(u=>{const{code:f}=u||{};f===0?(E.success("\u4FDD\u5B58\u6210\u529F"),F("ok",{})):E.error(u.message)})}},l=()=>{n.visible=!1};return _({edit:()=>{n.visible=!0}}),(i,o)=>{const u=m("h-form-item"),f=m("h-form"),d=m("h-drawer");return C(),A(d,{title:"\u8BBE\u7F6E",visible:n.visible,"confirm-loading":n.confirmLoading,onCancel:l},{footer:s(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:h},"\u4FDD\u5B58")]),default:s(()=>[a(f,{layout:"small"},{default:s(()=>[a(u,{label:"",content:"",layout:"small"},{default:s(()=>[e("div",I,[p(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=r=>t.status=r)},null,512),[[T,t.status]]),Z])]),_:1}),a(u,{label:"\u79EF\u5206",content:"",layout:"small"},{default:s(()=>[e("div",J,[p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=r=>t.points=r)},null,512),[[v,t.points]]),K]),Q]),_:1}),a(u,{label:"\u6BCF\u65E5\u6B21\u6570",content:"",layout:"small"},{default:s(()=>[e("div",X,[p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=r=>t.day_times=r)},null,512),[[v,t.day_times]]),ee]),te]),_:1}),a(u,{label:"\u4E2D\u5956\u51E0\u7387",content:"",layout:"small"},{default:s(()=>[p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=r=>t.views=r)},null,512),[[v,t.views]]),e("div",oe,"\u6BCF\u6B21\u6D4F\u89C8"+j(t.views)+"\u4E2A\u4EA7\u54C1\uFF0C\u83B7\u53D6\u4E00\u6B21\u4E2D\u5956\u673A\u4F1A\uFF0C0\u4EE3\u8868\u65E0\u6CD5\u4E2D\u5956",1)]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),le=D({__name:"guang",setup(V){const _=P(),F=S(()=>`${_.urlPrefix}${_.apiUrl}${W.getList}`),t=L({}),y=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237",field:"member_name"},{title:"\u79EF\u5206",field:"points",width:100},{title:"\u65F6\u95F4",field:"created_at",formatter(h){return R(h.getData().created_at,"YY-MM-DD HH:mm")},width:140}],n=k({rangePicker:"",name:"",status:0,startTime:"",endTime:"",market_code:"guang"}),c=x(),b=x(),g=()=>{c.value.reload(!0)};return(h,l)=>{const B=m("h-form-item"),i=m("Litepicker"),o=m("h-form"),u=z,f=m("h-card");return C(),O(q,null,[a(f,{bordered:!1,title:"\u901B\u8BB0\u5F55"},{header:s(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:l[0]||(l[0]=d=>b.value.edit({}))},"\u8BBE\u7F6E ")]),default:s(()=>[a(u,{ref_key:"tableRef",ref:c,columns:y,ajaxUrl:w(F),config:w(t),queryParam:n},{search:s(()=>[a(o,{layout:"inline"},{default:s(()=>[a(B,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:s(()=>[p(e("input",{"onUpdate:modelValue":l[1]||(l[1]=d=>n.name=d),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[v,n.name]])]),_:1}),a(B,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[a(i,{modelValue:n.rangePicker,"onUpdate:modelValue":l[2]||(l[2]=d=>n.rangePicker=d),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:g}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),a(se,{ref_key:"modal",ref:b,onOk:g},null,512)],64)}}});export{le as default};
