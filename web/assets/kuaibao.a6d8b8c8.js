import{r as w,h as y,Z as j,G as E,$ as A,j as P,C as U,l as d,b as V,w as n,a as Y,q as r,x as M,a3 as T,m as u,u as h,d as o,a1 as k,s as g,a2 as q,_ as R}from"./index.66cbea10.js";const p={list:"/api/admin/kuaibao/list",view:"/api/admin/kuaibao/view",pass:"/api/admin/kuaibao/pass",reject:"/api/admin/kuaibao/reject"};function S(l){return w({url:p.pass,method:"post",data:l})}function N(l){return w({url:p.reject,method:"post",data:l})}const z=u("option",{value:""},"\u5168\u90E8",-1),G=u("option",{value:"1"},"\u901A\u8FC7",-1),L=u("option",{value:"0"},"\u672A\u786E\u8BA4",-1),O=u("option",{value:"-1"},"\u62D2\u7EDD",-1),W=[z,G,L,O],Z=y({__name:"kuaibao",setup(l){const _=j(),D=E(()=>`${_.urlPrefix}${_.apiUrl}${p.list}`),v=A({}),x=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u540D\u79F0",width:150,field:"kuaibao.title"},{title:"\u5185\u5BB9",field:"content",formatter(e){var t,s,m;return o(`<ul>
            ${((m=(s=(t=e.getData().kuaibao)==null?void 0:t.items)==null?void 0:s.array)==null?void 0:m.forEach(i=>`<li v-for="(item, index) in record.kuaibao.items" :key="index">
            <span>{{ item.text }}</span>
            <a target="_blank" href="${i.click_url}">${i.click_url}</a>
            <a target="_blank" href="${i.pic_view}">
              <img src="${i.pic_view}" />
            </a>
          </li>`))||""}
          </ul>`)[0]}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"kuaibao.updated_at"},{title:"\u6D88\u606F\u72B6\u6001",field:"message",width:200,formatter(e){return o(`<ul>
          <li>
            <p>${e.getData().kuaibao.message_status}</p>
            <p>${e.getData().kuaibao.message_title}</p>
            <p>${e.getData().kuaibao.message_content}</p>
          </li>
        </ul>`)[0]}},{title:"\u6765\u8DEF",field:"url",width:200,formatter(e){return o(`<a target="_blank" href="${e.getData().url}">
          ${e.getData().url||""}
        </a>`)[0]}},{title:"\u72B6\u6001",field:"kuaibao.status",width:80},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(e){if(e.getData().kuaibao.status!==1){const t=o('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return o(t).on("click",function(s){F(e.getData())}),t[0]}else if(e.getData().kuaibao.status!==-1){const t=o('<a class="flex items-center" href="javascript:;">\u62D2\u7EDD</a>');return o(t).on("click",function(s){B(e.getData())}),t[0]}return""}}],a=P({rangePicker:"",status:"",startTime:"",endTime:""}),c=U(),b=()=>{a.startTime=k(a.rangePicker)[0],a.endTime=k(a.rangePicker)[0],c.value.reload(!0)},B=e=>{N({id:e.kuaibao.id}).then(()=>{g.success("\u5DF2\u62D2\u7EDD"),c.value.reload()})},F=e=>{S({id:e.kuaibao.id}).then(t=>{g.success(t.message),c.value.reload()})};return(e,t)=>{const s=d("h-form-item"),m=d("Litepicker"),i=d("h-form"),$=q,C=d("h-card");return Y(),V(C,{bordered:!1,title:"\u7EBF\u62A5\u7BA1\u7406"},{default:n(()=>[r($,{ref_key:"tableRef",ref:c,columns:x,ajaxUrl:h(D),config:h(v),queryParam:a},{search:n(()=>[r(i,{layout:"inline"},{default:n(()=>[r(s,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:n(()=>[M(u("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>a.status=f),class:"form-select mt-2 w-full sm:mt-0 sm:w-auto",onChange:b},W,544),[[T,a.status]])]),_:1}),r(s,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[r(m,{modelValue:a.rangePicker,"onUpdate:modelValue":t[1]||(t[1]=f=>a.rangePicker=f),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),u("div",{class:"mt-2 xl:mt-0"},[u("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:b}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),I=R(Z,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/kuaibao.vue"]]);export{I as default};
