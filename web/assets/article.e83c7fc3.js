import{r as Y,h as U,j as C,k as O,t as S,l as r,a as F,b as B,w as i,m as o,p as N,e as R,q as l,x as D,y as A,a3 as q,v as L,u as $,s as V,_ as M,Z as z,G,$ as H,C as E,d as y,a0 as I,a1 as T,a2 as W}from"./index.5d26a5f4.js";import{p as Z}from"./pick.2d58b9d0.js";const j={list:"/api/admin/article/list",view:"/api/admin/article/view",update:"/api/admin/article/update"};function J(g){return Y({url:j.update,method:"post",data:g})}const K=o("option",{value:0},"\u9ED8\u8BA4",-1),Q=o("option",{value:1},"cms",-1),X=o("option",{value:2},"\u5C0F\u7A0B\u5E8F",-1),ee=o("option",{value:3},"App",-1),te=o("option",{value:4},"\u516C\u4F17\u53F7",-1),oe=o("option",{value:5},"\u8BA2\u5355",-1),ne=o("option",{value:6},"\u4F1A\u5458",-1),ae=o("option",{value:7},"\u8425\u9500",-1),se=[K,Q,X,ee,te,oe,ne,ae],ie=U({__name:"edit",emits:["ok"],setup(g,{expose:m,emit:v}){const a=C({id:0,title:"",cid1:0,content:""}),b={},e=C({visible:!1,confirmLoading:!1,data:{content:""}}),f=()=>{e.visible=!1},u=O(b,S(a)),_=t=>{e.visible=!0,L(()=>{Object.assign(a,{id:0,title:"",cid1:0,content:""}),Object.assign(a,Z(t,["id","title","content","cid1"])),e.data.content=(t||{}).content||""})},h=()=>{if(e.confirmLoading=!0,u.value.$touch(),u.value.$invalid)u.value.$errors,e.confirmLoading=!1;else{const t=$(a);J(t).then(n=>{const{code:c}=n||{};c===0?V.success("\u4FDD\u5B58\u6210\u529F"):V.error(n.message),e.confirmLoading=!1,v("ok",t),e.visible=!1,e.data.content=""})}},s=t=>{e.data.content=t,L(()=>{Object.assign(a,{content:e.data.content})})};return m({edit:_}),(t,n)=>{const c=r("h-form-item"),w=r("wang-editor"),k=r("h-form"),x=r("h-spin"),p=r("LoadingIcon"),P=r("h-modal");return F(),B(P,{title:"\u7F16\u8F91",size:"modal-xl",visible:e.visible,"confirm-loading":e.confirmLoading,onCancel:f},{footer:i(()=>[o("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:n[3]||(n[3]=d=>h())},[N(" \u4FDD\u5B58 "),e.confirmLoading?(F(),B(p,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):R("v-if",!0)])]),default:i(()=>[l(x,{spinning:e.confirmLoading},{default:i(()=>[l(k,{layout:"small"},{default:i(()=>[l(c,{label:"\u6807\u9898",content:"",layout:"small"},{default:i(()=>[D(o("input",{type:"text",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=d=>a.title=d)},null,512),[[A,a.title]])]),_:1}),l(c,{label:"\u5927\u5206\u7C7B",content:"",layout:"small"},{default:i(()=>[D(o("select",{class:"form-select","onUpdate:modelValue":n[1]||(n[1]=d=>a.cid1=d)},se,512),[[q,a.cid1]])]),_:1}),l(c,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:i(()=>[D(o("textarea",{class:"hidden form-control","onUpdate:modelValue":n[2]||(n[2]=d=>a.content=d)},null,512),[[A,a.content]])]),_:1}),l(w,{ref:"editor",value:e.data.content,onChange:s},null,8,["value"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),le=M(ie,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/article/edit.vue"]]),re=U({__name:"article",setup(g){const m=z(),v=G(()=>`${m.urlPrefix}${m.apiUrl}${j.list}`),a=H({}),b=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",formatter(s){return y(`<a target="_blank" href="/article/${s.getData().id}">
          ${s.getData().title}
        </a>`)[0]}},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(s){return I(s.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(s){if(s.getData().status===0){const t=y('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return y(t).on("click",function(n){h(s.getData())}),t[0]}return""}}],e=C({rangePicker:"",name:"",status:0,startTime:"",endTime:"",title:""}),f=E(),u=E(),_=()=>{e.startTime=T(e.rangePicker)[0],e.endTime=T(e.rangePicker)[0],f.value.reload(!0)},h=s=>{u.value.edit(s)};return(s,t)=>{const n=r("Litepicker"),c=r("h-form-item"),w=r("h-form"),k=W,x=r("h-card");return F(),B(x,{bordered:!1,title:"\u6587\u7AE0\u7BA1\u7406"},{header:i(()=>[o("button",{class:"mr-2 shadow-md btn btn-primary",onClick:t[0]||(t[0]=p=>u.value.edit({}))},"\u521B\u5EFA ")]),default:i(()=>[l(k,{ref_key:"tableRef",ref:f,columns:b,ajaxUrl:$(v),config:$(a),queryParam:e},{search:i(()=>[l(w,{layout:"inline"},{default:i(()=>[l(c,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:i(()=>[l(n,{modelValue:e.rangePicker,"onUpdate:modelValue":t[1]||(t[1]=p=>e.rangePicker=p),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),o("div",{class:"mt-2 xl:mt-0"},[o("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:_}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),l(le,{ref_key:"modal",ref:u,onOk:_},null,512)]),_:1})}}}),de=M(re,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/article.vue"]]);export{de as default};
