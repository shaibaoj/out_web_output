import{r as J,d as I,l as T,G as q,o as K,aD as Q,s as H,af as X,m as R,t as N,n as _,b as Y,e as j,w as a,h as e,u as t,B as A,j as i,ac as E,g as y,Y as r,F as p,ag as Z,aG as ee,q as S,k as P,a7 as W,a8 as te,C as L,a9 as ue,a as O,ab as ae,f as ne,p as oe,L as se}from"./index.1c6d5825.js";import{T as d}from"./index.25b7e515.js";import{g as le}from"./user.6af68fd3.js";import{p as G}from"./pick.b8c64e32.js";const z={getItems:"/api/user/member/agent/list",getView:"/api/user/member/agent/view",updateItem:"/api/user/member/agent/update",listApply:"/api/user/member/agent/listApply",updateApplyStatus:"/api/user/member/agent/update_apply_status"};function ie(C){return J({url:z.updateApplyStatus,method:"post",data:C})}function re(C){return J({url:z.updateItem,method:"post",data:C})}const de=y("option",{value:0},"\u5BFC\u8D2D",-1),me=y("option",{value:1},"\u4F1A\u5458\u8FD4\u5229",-1),_e=y("option",{value:3},"\u591A\u7EA7\u5206\u9500",-1),pe={class:"grid-cols-3 gap-2 sm:grid"},fe={class:"overflow-x-auto"},ce=I({__name:"data",setup(C,{expose:B}){const u=T({user_rate:0,invite_mode:0,invite1_rate:0,invite2_rate:0,invite3_rate:0,rank3_name:"",rank3_members:0,rank3_invite1:0,rank3_invite2:0,rank3_invite3:0,rank2_name:"",rank2_members:0,rank2_invite1:0,rank2_invite2:0,rank2_invite3:0,rank1_name:"",rank1_members:0,rank1_invite1:0,rank1_invite2:0,rank1_invite3:0,order_start_time:""}),U={},g=T({visible:!1,confirmLoading:!1,uploading:!0,payment_money:0,user_data_money:0}),s=q(()=>u.invite_mode===3),F=q(()=>u.invite_mode===1);K(()=>{f()});const f=()=>{V()},V=()=>{Q({}).then(o=>{o.data.app_data&&H(()=>{const l=G(o.data.app_data,["invite_mode","invite1_rate","invite2_rate","invite3_rate","invite4_rate","invite5_rate","user_rate","order_start_time","rank1_name","rank2_name","rank3_name","rank1_invite1","rank1_invite2","rank1_invite3","rank1_invite1_h1","rank1_invite2_h1","rank1_invite3_h1","rank1_invite1_h2","rank1_invite2_h2","rank1_invite3_h2","rank2_invite1","rank2_invite2","rank2_invite3","rank2_invite1_h1","rank2_invite2_h1","rank2_invite3_h1","rank2_invite1_h2","rank2_invite2_h2","rank2_invite3_h2","rank3_invite1","rank3_invite2","rank3_invite3","rank3_invite1_h1","rank3_invite2_h1","rank3_invite3_h1","rank3_invite1_h2","rank3_invite2_h2","rank3_invite3_h2","rank1_members","rank2_members","rank3_members"]);Object.assign(u,l),o.data.app_data.order_start_time&&(u.order_start_time=X(o.data.app_data.order_start_time))})}),le({}).then(o=>{o.data.user_data&&(g.user_data_money=o.data.user_data.money)})},w=R(U,N(u)),h=o=>{if(o.preventDefault(),w.value.$touch(),w.value.$invalid)w.value.$errors;else{let l=t(u),m={};l.order_start_time?m=Object.assign(m,{order_start_time:Z(l.order_start_time)}):m=Object.assign(m,{order_start_time:0}),ee(Object.assign({},l,m,{page_view:"agent"})).then(v=>{const{code:x}=v||{};x===0?S.success("\u4FDD\u5B58\u6210\u529F"):S.error(v.message)})}},c=()=>{g.visible=!1};return B({edit:()=>{g.visible=!0}}),(o,l)=>{const m=_("FormSelect"),v=_("h-form-item"),x=_("Litepicker"),D=_("FormHelp"),$=_("h-form"),M=_("h-drawer");return Y(),j(M,{title:"\u8BBE\u7F6E",size:"xl",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:c},{footer:a(()=>[e(t(A),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:h},{default:a(()=>[i("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e($,{layout:"small"},{default:a(()=>[e(v,{label:"\u8D2D\u7269\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(m,{modelValue:u.invite_mode,"onUpdate:modelValue":l[0]||(l[0]=n=>u.invite_mode=n)},{default:a(()=>[de,me,_e]),_:1},8,["modelValue"])]),_:1}),e(v,{class:E({hidden:!t(s)&&!t(F)}),label:"\u8BA2\u5355\u8BA1\u7B97\u5F00\u59CB\u65F6\u95F4",layout:"small"},{default:a(()=>[e(x,{modelValue:u.order_start_time,"onUpdate:modelValue":l[1]||(l[1]=n=>u.order_start_time=n),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56"},null,8,["modelValue"])]),_:1},8,["class"]),e(v,{class:E({hidden:!t(s)}),label:"\u9ED8\u8BA4\u8BBE\u7F6E",layout:"small"},{default:a(()=>[y("div",pe,[e(t(r),null,{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u81EA\u8D2D")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite1_rate,"onUpdate:modelValue":l[2]||(l[2]=n=>u.invite1_rate=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1}),e(t(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u4E0B\u7EA7")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite2_rate,"onUpdate:modelValue":l[3]||(l[3]=n=>u.invite2_rate=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1}),e(t(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u4E0B\u4E0B\u7EA7")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite3_rate,"onUpdate:modelValue":l[4]||(l[4]=n=>u.invite3_rate=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})])]),_:1},8,["class"]),e(v,{class:E({hidden:!t(F)}),label:"\u8FD4\u5229\u6BD4\u4F8B",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",modelValue:u.user_rate,"onUpdate:modelValue":l[5]||(l[5]=n=>u.user_rate=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1},8,["class"]),e(v,{class:E({hidden:!t(s)}),label:"",layout:"small"},{default:a(()=>[e(D,null,{default:a(()=>[i("\u63D0\u793A:\u672A\u8FDB\u884C\u8BE6\u7EC6\u767B\u8BB0\u6BD4\u4F8B\u8BBE\u7F6E\uFF0C\u5C06\u624D\u6709\u4E0A\u9762\u9ED8\u8BA4\u8BBE\u7F6E\u6BD4\u4F8B ")]),_:1})]),_:1},8,["class"]),y("div",fe,[e(t(d),{class:E(t(s)?"":"hidden")},{default:a(()=>[e(t(d).Thead,null,{default:a(()=>[e(t(d).Tr,null,{default:a(()=>[e(t(d).Th,{class:"bg-slate-50 !pr-2 dark:bg-darkmode-800"}),e(t(d).Th,{class:"bg-slate-50 dark:bg-darkmode-800"},{default:a(()=>[i("\u7B49\u7EA7\u540D\u79F0")]),_:1}),e(t(d).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u5347\u7EA7\u9700\u8981\u9080\u8BF7\u4EBA\u6570 ")]),_:1}),e(t(d).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u81EA\u8D2D\u8FD4\u5229\u6BD4\u4F8B ")]),_:1}),e(t(d).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1 ")]),_:1}),e(t(d).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i("\u4E0B\u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1")]),_:1})]),_:1})]),_:1}),e(t(d).Tbody,null,{default:a(()=>[e(t(d).Tr,{class:E(t(s)?"":"hidden")},{default:a(()=>[e(t(d).Td,{class:"!pr-2"},{default:a(()=>[i("1.")]),_:1}),e(t(d).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_name,"onUpdate:modelValue":l[6]||(l[6]=n=>u.rank1_name=n)},null,8,["modelValue"])]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_members,"onUpdate:modelValue":l[7]||(l[7]=n=>u.rank1_members=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite1,"onUpdate:modelValue":l[8]||(l[8]=n=>u.rank1_invite1=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite2,"onUpdate:modelValue":l[9]||(l[9]=n=>u.rank1_invite2=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite3,"onUpdate:modelValue":l[10]||(l[10]=n=>u.rank1_invite3=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(t(d).Tr,{class:E(t(s)?"":"hidden")},{default:a(()=>[e(t(d).Td,{class:"!pr-2"},{default:a(()=>[i("2.")]),_:1}),e(t(d).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",modelValue:u.rank2_name,"onUpdate:modelValue":l[11]||(l[11]=n=>u.rank2_name=n)},null,8,["modelValue"])]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_members,"onUpdate:modelValue":l[12]||(l[12]=n=>u.rank2_members=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite1,"onUpdate:modelValue":l[13]||(l[13]=n=>u.rank2_invite1=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite2,"onUpdate:modelValue":l[14]||(l[14]=n=>u.rank2_invite2=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite3,"onUpdate:modelValue":l[15]||(l[15]=n=>u.rank2_invite3=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(t(d).Tr,{class:E(t(s)?"":"hidden")},{default:a(()=>[e(t(d).Td,{class:"!pr-2"},{default:a(()=>[i("3.")]),_:1}),e(t(d).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",modelValue:u.rank3_name,"onUpdate:modelValue":l[16]||(l[16]=n=>u.rank3_name=n)},null,8,["modelValue"])]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_members,"onUpdate:modelValue":l[17]||(l[17]=n=>u.rank3_members=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite1,"onUpdate:modelValue":l[18]||(l[18]=n=>u.rank3_invite1=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite2,"onUpdate:modelValue":l[19]||(l[19]=n=>u.rank3_invite2=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(d).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite3,"onUpdate:modelValue":l[20]||(l[20]=n=>u.rank3_invite3=n)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])]),e(v,{class:E({hidden:!t(s)}),label:"",layout:"small"},{default:a(()=>[e(D,null,{default:a(()=>[i("1:\u4F1A\u5458\u63A8\u5E7F\u4EBA\u6570\u8FBE\u5230\u8BBE\u7F6E\u7B49\u7EA7\u8981\u6C42\u540E\uFF0C\u91C7\u7528\u76F8\u5E94\u7B49\u7EA7\u8BBE\u7F6E\u6BD4\u4F8B\u8FDB\u884C\u5956\u52B1 ")]),_:1}),e(D,null,{default:a(()=>[i("2:\u4F1A\u5458\u7B49\u7EA7\u540D\u79F0\u53EF\u4EE5\u81EA\u5B9A\u4E49 ")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ve=P(ce,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/data.vue"]]),ge=y("option",{value:0},"\u65E0\u8FD0\u8425\u6743\u9650",-1),be=y("option",{value:-1},"\u6E20\u9053\u6388\u6743\u6A21\u5F0F",-1),ke=y("option",{value:-2},"\u4F1A\u5458\u6388\u6743\u6A21\u5F0F",-1),Fe=y("option",{value:-3},"\u6DF7\u5408\u6388\u6743\u6A21\u5F0F",-1),we=I({__name:"shop",setup(C,{expose:B}){const u=T({distribute_pid:0,order_start_time:"",pid:""}),U={},g=T({visible:!1,confirmLoading:!1,uploading:!0,payment_mode:!1,payment_money:0,user_data_money:0});K(()=>{F()});const s=R(U,N(u)),F=()=>{f()},f=()=>{Q({}).then(c=>{c.data.app_data&&H(()=>{const b=G(c.data.app_data,["distribute_pid","pid","order_start_time"]);Object.assign(u,b),c.data.app_data.order_start_time&&(u.order_start_time=X(c.data.app_data.order_start_time))})}),le({}).then(c=>{c.data.user_data&&(g.user_data_money=c.data.user_data.money)})},V=c=>{if(c.preventDefault(),s.value.$touch(),s.value.$invalid)s.value.$errors;else{let b=t(u),o={};b.order_start_time?o=Object.assign(o,{order_start_time:Z(b.order_start_time)}):o=Object.assign(o,{order_start_time:0}),ee(Object.assign({},b,o,{page_view:"data"})).then(l=>{const{code:m}=l.data;m===0?S.success("\u4FDD\u5B58\u6210\u529F"):S.error(l.message)})}},w=()=>{g.visible=!1};return B({edit:()=>{g.visible=!0}}),(c,b)=>{const o=_("FormSelect"),l=_("FormHelp"),m=_("h-form-item"),v=_("h-form"),x=_("h-drawer");return Y(),j(x,{title:"\u7535\u5546\u5E73\u53F0\u914D\u7F6E",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:w},{footer:a(()=>[e(t(A),{variant:"primary",class:"mb-2 mr-1 w-24",onClick:V},{default:a(()=>[i("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e(v,{layout:"small",label:"\u6DD8\u5B9D",border:!1},{default:a(()=>[e(m,{label:"\u6388\u6743\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(o,{modelValue:u.distribute_pid,"onUpdate:modelValue":b[0]||(b[0]=D=>u.distribute_pid=D)},{default:a(()=>[ge,be,ke,Fe]),_:1},8,["modelValue"]),e(l,null,{default:a(()=>[i(" \u8FD4\u5229\u3001\u5206\u9500\u6A21\u5F0F\u9700\u8981\u8054\u76DF\u5F00\u901A\u8FD0\u8425\u6743\u9650\u540E\u624D\u80FD\u6709\u6548\u8FD0\u884C ")]),_:1})]),_:1}),e(m,{label:"\u9ED8\u8BA4\u6E20\u9053\u4E13\u4EABpid",content:"",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",modelValue:u.pid,"onUpdate:modelValue":b[1]||(b[1]=D=>u.pid=D)},null,8,["modelValue"]),e(t(r).Text)]),_:1}),e(l,null,{default:a(()=>[i(" \u6E20\u9053\u6388\u6743\u6A21\u5F0F\u4E0B\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7684pid ")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ye=P(we,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/shop.vue"]]),De={class:"mt-2 xl:mt-0"},Ve=I({__name:"apply",setup(C,{expose:B}){const u=W(),U=q(()=>`${u.urlPrefix}${u.apiUrl}${z.listApply}`),g=te({}),s=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u72B6\u6001",field:"status",formatter(o){return o.getData().status===1?"\u901A\u8FC7":"\u5F85\u5BA1\u6838"}},{title:"qq",field:"qq"},{title:"\u5FAE\u4FE1",field:"weixin"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(o){return ue(o.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(o){if(o.getData().status===0){const l=O('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return O(l).on("click",function(m){h(o.getData())}),l[0]}return""}}],F=T({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),f=T({visible:!1,confirmLoading:!1}),V=L(),w=()=>{V.value.reload(!0)},h=o=>{ie({member_id:o.member_id,status:1}).then(l=>{S.success(l.message),V.value.reload()})},c=()=>{f.visible=!1};return B({edit:()=>{f.visible=!0}}),(o,l)=>{const m=_("FormInput"),v=_("h-form-item"),x=_("Litepicker"),D=_("h-form"),$=ae,M=_("h-drawer");return Y(),j(M,{title:"\u5BA1\u6838\u56E2\u957F\u7533\u8BF7",size:"xl",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:c},{default:a(()=>[e($,{ref_key:"tableRef",ref:V,columns:s,ajaxUrl:t(U),config:t(g),queryParam:F},{search:a(()=>[e(D,{layout:"inline"},{default:a(()=>[e(v,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(m,{type:"text",modelValue:F.name,"onUpdate:modelValue":l[0]||(l[0]=n=>F.name=n),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(v,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(x,{modelValue:F.rangePicker,"onUpdate:modelValue":l[1]||(l[1]=n=>F.rangePicker=n),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),y("div",De,[e(t(A),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:w},{default:a(()=>[i(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),xe=P(Ve,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/apply.vue"]]),Ee=y("option",{value:1},"\u72EC\u7ACB\u57DF\u540D",-1),Be=y("option",{value:2},"\u514D\u8D39\u4E8C\u7EA7",-1),he=y("option",{value:"gouwu.rocks"},"gouwu.rocks",-1),Ae=I({__name:"agent",emits:["ok"],setup(C,{expose:B,emit:u}){const g=W().uploadUrl,s=T({id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0}),F={},f=T({visible:!1,confirmLoading:!1,data:{userCmsAgent:{user_name:""}}}),V=()=>{f.visible=!1},w=R(F,N(s)),h=o=>{f.visible=!0,H(()=>{Object.assign(s,{id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0});const l=G(o,["id","url","prefix","domain_url","pid","relation_id","site_name","logo_url","type"]);o.domain&&(l.site_name=o.domain.site_name,l.logo_url=o.domain.logo_url,l.url=o.domain.url,l.type=o.domain.type),o.member&&(f.data.userCmsAgent.user_name=o.member.nick_name),Object.assign(s,l)})},c=()=>{if(f.confirmLoading=!0,w.value.$touch(),w.value.$invalid)w.value.$errors,f.confirmLoading=!1;else{const o=t(s);re(Object.assign(o,{user_name:f.data.userCmsAgent.user_name,domain_type:s.type})).then(l=>{const{code:m}=l||{};m===0?(S.success("\u4FDD\u5B58\u6210\u529F"),u("ok",o),f.visible=!1):S.error(l.message),f.confirmLoading=!1})}},b=o=>{s.logo_url=o.data.item.img};return B({edit:h}),(o,l)=>{const m=_("h-form-item"),v=_("FormSelect"),x=_("h-upload"),D=_("h-form"),$=_("h-spin"),M=_("LoadingIcon"),n=_("h-modal");return Y(),j(n,{title:"\u7F16\u8F91",size:"lg",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:V},{footer:a(()=>[e(t(A),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:l[8]||(l[8]=k=>c())},{default:a(()=>[i(" \u4FDD\u5B58 "),f.confirmLoading?(Y(),j(M,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):ne("v-if",!0)]),_:1})]),default:a(()=>[e($,{spinning:f.confirmLoading},{default:a(()=>[e(D,{layout:"small"},{default:a(()=>[e(m,{label:"\u7528\u6237\u540D",content:"",layout:"small"},{default:a(()=>[i(oe(f.data.userCmsAgent.user_name),1)]),_:1}),e(m,{label:"\u5E7F\u544A\u4F4Dpid",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.pid,"onUpdate:modelValue":l[0]||(l[0]=k=>s.pid=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6E20\u9053id",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.relation_id,"onUpdate:modelValue":l[1]||(l[1]=k=>s.relation_id=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u7ED1\u5B9A\u57DF\u540D",content:"",layout:"small"},{default:a(()=>[e(v,{modelValue:s.type,"onUpdate:modelValue":l[2]||(l[2]=k=>s.type=k)},{default:a(()=>[Ee,Be]),_:1},8,["modelValue"])]),_:1}),e(m,{class:E({hidden:s.type==2}),label:"\u72EC\u7ACB\u57DF\u540D",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(r).Text,null,{default:a(()=>[i("Http://")]),_:1}),e(t(p),{type:"text",modelValue:s.url,"onUpdate:modelValue":l[3]||(l[3]=k=>s.url=k)},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(m,{class:E({hidden:s.type==1}),label:"\u514D\u8D39\u57DF\u540D",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(r).Text,null,{default:a(()=>[i("Http://")]),_:1}),e(t(p),{type:"text",modelValue:s.prefix,"onUpdate:modelValue":l[4]||(l[4]=k=>s.prefix=k)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[e(v,{modelValue:s.domain_url,"onUpdate:modelValue":l[5]||(l[5]=k=>s.domain_url=k)},{default:a(()=>[he]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(m,{label:"\u7F51\u5740\u540D\u5B57",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.site_name,"onUpdate:modelValue":l[6]||(l[6]=k=>s.site_name=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"logo",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.logo_url,"onUpdate:modelValue":l[7]||(l[7]=k=>s.logo_url=k),placeholder:"\u8BBE\u7F6E\u7F51\u7AD9\u7684logo\uFF0C\u4E0D\u8BBE\u7F6E\u4E0D\u663E\u793A\uFF01"},null,8,["modelValue"]),e(x,{name:"file",multiple:!0,action:t(g),onChange:b},{default:a(()=>[e(t(A),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:a(()=>[e(t(se),{icon:"Upload",class:"w-4 h-4 mr-2"}),i("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Te=P(Ae,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/agent.vue"]]),Ce={class:"mt-2 xl:mt-0"},Ue=I({__name:"agent",setup(C){const B=W(),u=q(()=>`${B.urlPrefix}${B.apiUrl}${z.getItems}`),U=te({}),g=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u7ED1\u5B9A\u57DF\u540D",field:"domain.url",formatter(o){return o.getData().domain?O(`<a target="_blank" href="'http://${o.getData().domain.url}">${o.getData().domain.url}</a>`)[0]:""}},{title:"\u64CD\u4F5C",field:"",formatter(o){const l=O('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return O(l).on("click",function(m){b(o.getData())}),l[0]}}],s=T({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),F=L(),f=L(),V=L(),w=L(),h=L(),c=()=>{F.value.reload(!0)},b=o=>{h.value.edit(o)};return(o,l)=>{const m=_("FormInput"),v=_("h-form-item"),x=_("Litepicker"),D=_("h-form"),$=ae,M=_("h-card");return Y(),j(M,{bordered:!1,title:"\u56E2\u957F\u7BA1\u7406"},{header:a(()=>[e(t(A),{variant:"primary",class:"mr-2 shadow-md",onClick:l[0]||(l[0]=n=>f.value.edit({}))},{default:a(()=>[i("\u8FD4\u5229\u8BBE\u7F6E ")]),_:1}),e(t(A),{variant:"primary",class:"mr-2 shadow-md",onClick:l[1]||(l[1]=n=>V.value.edit({}))},{default:a(()=>[i("\u7535\u5546\u5E73\u53F0\u914D\u7F6E ")]),_:1}),e(t(A),{variant:"primary",class:"mr-2 shadow-md",onClick:l[2]||(l[2]=n=>w.value.edit({}))},{default:a(()=>[i("\u4EE3\u7406\u5BA1\u6838 ")]),_:1})]),default:a(()=>[e($,{ref_key:"tableRef",ref:F,columns:g,ajaxUrl:t(u),config:t(U),queryParam:s},{search:a(()=>[e(D,{layout:"inline"},{default:a(()=>[e(v,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(m,{type:"text",modelValue:s.name,"onUpdate:modelValue":l[3]||(l[3]=n=>s.name=n),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(v,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(x,{modelValue:s.rangePicker,"onUpdate:modelValue":l[4]||(l[4]=n=>s.rangePicker=n),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),y("div",Ce,[e(t(A),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:c},{default:a(()=>[i(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),e(ve,{ref_key:"dataModal",ref:f,onOk:c},null,512),e(ye,{ref_key:"shopModal",ref:V,onOk:c},null,512),e(xe,{ref_key:"applyModal",ref:w,onOk:c},null,512),e(Te,{ref_key:"agentModal",ref:h,onOk:c},null,512)]),_:1})}}}),Ye=P(Ue,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent.vue"]]);export{Ye as default};
