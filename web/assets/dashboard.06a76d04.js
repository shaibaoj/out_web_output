import{h as A,j as b,a as c,b as $,w as x,p as l,l as t,c as m,I as k,m as n,L as z,F as B,s as h,v as j,q as C,C as E,D as T,E as L,u as M,e as q,n as I}from"./index.5e15cb45.js";import{g as V,s as N,a as H,b as O}from"./miniprogram.13425128.js";import{_ as S}from"./confirm.vue_vue_type_script_setup_true_lang.5b1fc87e.js";const U={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},G={class:"table -mt-2 table-report"},J=t("thead",null,[t("tr",null,[t("th",{class:"whitespace-nowrap"},"\u6A21\u677F\u7F16\u53F7"),t("th",{class:"text-center whitespace-nowrap"},"\u7248\u672C"),t("th",{class:"text-center whitespace-nowrap"},"\u5907\u6CE8"),t("th",{class:"text-center whitespace-nowrap"})])],-1),K={class:"w-20"},P={class:"text-center"},Q={class:"text-center"},R={class:"w-56"},W={class:"flex items-center justify-center"},X=["onClick"],Y=A({__name:"template",emits:["ok"],setup(D,{expose:e,emit:f}){const a=b({visible:!1,confirmLoading:!1,name:"",items:[]}),r=b({authorizer_appid:"",platform_type:0}),w=()=>{a.confirmLoading=!0,V({authorizer_appid:r.authorizer_appid,platform_type:r.platform_type}).then(o=>{a.confirmLoading=!1,o.data.items&&j(()=>{a.items=o.data.items})})},d=()=>{a.visible=!1},g=o=>{a.visible=!0,r.platform_type=o.platform_type,r.authorizer_appid=o.authorizer_appid,a.name=o.nick,w()},v=o=>{a.confirmLoading=!0,N({platform_type:r.platform_type,authorizer_appid:r.authorizer_appid,template_id:o.template_id,user_version:o.user_version,user_desc:o.user_desc}).then(_=>{const{code:p}=_||{};p===0?(C.success("\u4FDD\u5B58\u6210\u529F"),s()):C.error(_.message),f("ok","")})},s=()=>{a.visible=!1};return e({show:g,hideModel:s}),(o,_)=>{var i;const p=h("h-spin"),F=h("h-modal");return c(),$(F,{title:"\u6A21\u7248\u66F4\u65B0\u8BB0\u5F55 ("+((i=a.name)!=null?i:"")+")",size:"modal-lg",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:d},{footer:x(()=>[]),default:x(()=>[l(p,{spinning:a.confirmLoading},{default:x(()=>[t("div",U,[t("table",G,[J,t("tbody",null,[(c(!0),m(B,null,k(a.items,(u,y)=>(c(),m("tr",{key:y,class:"intro-x"},[t("td",K,n(u.template_id),1),t("td",P,n(u.user_version),1),t("td",Q,n(u.user_desc),1),t("td",R,[t("div",W,[t("a",{class:"flex items-center mr-3",href:"javascript:0",onClick:z(Ot=>v(u),["stop"])}," \u9009\u62E9 ",8,X)])])]))),128))])])])]),_:1},8,["spinning"])]),_:1},8,["title","visible","confirm-loading"])}}}),Z={class:"py-10 mt-5 intro-y box sm:py-20"},tt={class:"flex justify-center"},et={class:"flex flex-col items-center justify-center gap-y-3"},st=["href"],at=t("p",null,[I(" \u6388\u6743\u5C0F\u7A0B\u5E8F\u4E4B\u524D\uFF0C\u8BF7\u5148\u524D\u5F80\u5FAE\u4FE1\u516C\u4F17\u53F7\u5E73\u53F0\u521B\u5EFA\u597D\u5C0F\u7A0B\u5E8F,"),t("a",{href:"https://mp.weixin.qq.com/",class:"",target:"_blank"},"\u300B\u300B\u5FAE\u4FE1\u516C\u4F17\u53F7\u5E73\u53F0 ")],-1),ot={key:0,class:"px-5 pt-5 mt-5 intro-y box"},it={class:"flex flex-col pb-5 -mx-5 border-b border-slate-200/60 dark:border-darkmode-400 lg:flex-row"},nt={class:"flex items-center justify-center flex-1 px-5 lg:justify-start"},rt={class:"relative flex-none w-20 h-20 image-fit sm:h-24 sm:w-24 lg:h-32 lg:w-32"},ct=["src"],ut={class:"absolute bottom-0 right-0 flex items-center justify-center p-2 mb-1 mr-1 rounded-full bg-primary"},lt={class:"ml-5"},mt={class:"w-24 text-lg font-medium truncate sm:w-40 sm:whitespace-normal"},dt={class:"text-slate-500"},_t={class:"flex-1 px-5 pt-5 mt-6 border-t border-l border-r border-slate-200/60 dark:border-darkmode-400 lg:mt-0 lg:border-t-0 lg:pt-0"},pt=t("div",{class:"font-medium text-center lg:mt-3 lg:text-left"}," \u8BE6\u60C5 ",-1),ht={class:"flex flex-col items-center justify-center mt-4 lg:items-start"},ft={class:"flex items-center truncate sm:whitespace-normal"},gt={class:"flex items-center mt-3 truncate sm:whitespace-normal"},xt={class:"flex items-center mt-3 truncate sm:whitespace-normal"},wt={class:"flex items-center mt-3 truncate sm:whitespace-normal"},vt={class:"flex-1 px-5 pt-5 mt-6 border-t border-slate-200/60 dark:border-darkmode-400 lg:mt-0 lg:border-0 lg:pt-0"},Ft=t("div",{class:"font-medium text-center lg:mt-5 lg:text-left"}," \u4ECB\u7ECD ",-1),yt={class:"flex items-center justify-center mt-2 lg:justify-start"},bt={class:"flex mr-2"},Bt=t("h2",{class:"mt-10 text-lg font-medium intro-y"},"\u6388\u6743\u5217\u8868",-1),Ct={class:"col-span-12 overflow-auto intro-y lg:overflow-visible"},Et={class:"table -mt-2 table-report"},At=t("thead",null,[t("tr",null,[t("th",{class:"whitespace-nowrap"},"\u5934\u50CF"),t("th",{class:"whitespace-nowrap"},"\u540D\u79F0"),t("th",{class:"text-center whitespace-nowrap"},"\u5B9E\u540D\u8BA4\u8BC1"),t("th",{class:"text-center whitespace-nowrap"},"\u6388\u6743\u65F6\u95F4"),t("th",{class:"text-center whitespace-nowrap"},"\u8D26\u53F7\u7C7B\u578B"),t("th",{class:"text-center whitespace-nowrap"})])],-1),kt={class:"w-20"},zt={class:"flex"},Dt={class:"w-10 h-10 image-fit zoom-in"},$t={href:"",class:"font-medium whitespace-nowrap"},jt={class:"mt-0.5 whitespace-nowrap text-xs text-slate-500"},Tt={class:"text-center"},Lt={class:"text-center"},Mt={class:"w-40"},qt={class:"flex items-center justify-center text-success"},It={class:"w-56 table-report__action"},Vt={class:"flex items-center justify-center"},Nt=["onClick"],Ht=["href"],Jt=A({__name:"dashboard",setup(D){const e=b({miniprogram:{authorizer_appid:"",account_type:"",principal_type:"",auth_date:"",nick:"",head_img:"",principal_name:"",realname_status:"",signature:""},authorize_url:"",items:[],templates:[],logs:[],modal:{template:!1},template:{authorizer_appid:""},confirmLoading:!1}),f=E(),a=E(),r=T(()=>{if(e.miniprogram.account_type){if(e.miniprogram.account_type==="0")return"\u8BA2\u9605\u53F7";if(e.miniprogram.account_type==="1")return"\u8001\u8BA2\u9605\u53F7";if(e.miniprogram.account_type==="2")return"\u670D\u52A1\u53F7";if(e.miniprogram.account_type==="3")return"\u5C0F\u7A0B\u5E8F"}return""});L(()=>{w()});const w=()=>{d()},d=()=>{H({platform_type:100}).then(s=>{s.data.item&&(e.miniprogram=s.data.item),s.data.authorize_url&&(e.authorize_url=s.data.authorize_url),s.message&&C.success(s.message)}),O({platform_type:100}).then(s=>{s.data.items&&(e.items=s.data.items)})},g=s=>{f.value.show(s)},v=s=>{a.value.show(s)};return(s,o)=>{const _=h("CameraIcon"),p=h("Tippy"),F=h("h-card");return c(),m(B,null,[l(F,{bordered:!1,title:"\u5C0F\u7A0B\u5E8F\u6388\u6743"},{default:x(()=>[t("div",Z,[t("div",tt,[t("div",et,[t("a",{class:"btn btn-primary",target:"_blank",href:e.authorize_url,onClick:o[0]||(o[0]=i=>g({title:"\u6388\u6743\u786E\u8BA4",content:"\u786E\u8BA4\u6388\u6743\u5B8C\u6210"}))}," \u6388\u6743\u516C\u4F17\u53F7\\\u5C0F\u7A0B\u5E8F ",8,st),at])])]),e.miniprogram.authorizer_appid.length>0?(c(),m("div",ot,[t("div",it,[t("div",nt,[t("div",rt,[t("img",{alt:"Midone Tailwind HTML Admin Template",class:"rounded-full",src:e.miniprogram.head_img},null,8,ct),t("div",ut,[l(_,{class:"w-4 h-4 text-white"})])]),t("div",lt,[t("div",mt,n(e.miniprogram.nick),1),t("div",dt,n(e.miniprogram.authorizer_appid),1)])]),t("div",_t,[pt,t("div",ht,[t("div",ft," \u4E3B\u4F53\u540D\u79F0:"+n(e.miniprogram.principal_name),1),t("div",gt," \u5B9E\u540D\u8BA4\u8BC1: "+n(e.miniprogram.realname_status=="1"?"\u662F":"\u5426"),1),t("div",xt," \u6388\u6743\u65F6\u95F4: "+n(e.miniprogram.auth_date),1),t("div",wt," \u8D26\u53F7\u7C7B\u578B: "+n(M(r)),1)])]),t("div",vt,[Ft,t("div",yt,[t("div",bt,n(e.miniprogram.signature),1)])])])])):q("",!0),Bt,t("div",Ct,[t("table",Et,[At,t("tbody",null,[(c(!0),m(B,null,k(e.items,(i,u)=>(c(),m("tr",{key:u,class:"intro-x"},[t("td",kt,[t("div",zt,[t("div",Dt,[l(p,{tag:"img",alt:"Midone Tailwind HTML Admin Template",class:"rounded-full",src:i.head_img,content:`${i.nick}`},null,8,["src","content"])])])]),t("td",null,[t("a",$t,n(i.nick),1),t("div",jt,n(i.principal_name),1)]),t("td",Tt,n(i.realname_status=="1"?"\u662F":"\u5426"),1),t("td",Lt,n(i.auth_date),1),t("td",Mt,[t("div",qt,n(i.account_type==="0"?"\u8BA2\u9605\u53F7":i.account_type==="1"?"\u8001\u8BA2\u9605\u53F7":i.account_type==="2"?"\u670D\u52A1\u53F7":i.account_type==="3"?"\u5C0F\u7A0B\u5E8F":""),1)]),t("td",It,[t("div",Vt,[t("span",{class:"flex items-center mr-3",onClick:z(y=>v(i),["stop"])}," \u6A21\u7248\u4E0A\u67B6 ",8,Nt),t("a",{class:"flex items-center",target:"_blank",href:e.authorize_url,onClick:o[1]||(o[1]=y=>g({title:"\u6388\u6743\u786E\u8BA4",content:"\u786E\u8BA4\u6388\u6743\u5B8C\u6210"}))}," \u6388\u6743 ",8,Ht)])])]))),128))])])])]),_:1}),l(S,{ref_key:"confirmModal",ref:f,onOk:d},null,512),l(Y,{ref_key:"templateModal",ref:a,onOk:d},null,512)],64)}}});export{Jt as default};
