import{d as y,a6 as D,x as f,o as U,y as w,z as E,D as S,e as $,w as a,A as i,b as p,h as e,g as d,B as j,u as s,c as A,f as N,k as b,Q as O,j as g,E as _,C as v}from"./index.778e50f1.js";import{g as Q,u as R}from"./user.547dbfda.js";import{p as T}from"./pick.28bc0ef7.js";const z={class:"relative"},G={class:"flex-none w-24 h-24 mr-1 image-fit"},M=["src"],P=y({__name:"base",setup(H){const h=D().uploadUrl,t=f({email:"",avatar_url:"",mobile:"",qq:""}),V={},u=f({uploading:!0,nick_name:"",avatar_url:""});U(()=>{k()});const m=w(V,E(t)),k=()=>{x()},x=()=>{Q({}).then(l=>{l.data.user&&S(()=>{Object.assign(t,T(l.data.user,["avatar_url","email","mobile","qq"])),u.nick_name=l.data.user.nick_name,u.avatar_url=l.data.user.avatar_url})})},B=l=>{if(l.preventDefault(),m.value.$touch(),m.value.$invalid)m.value.$errors;else{const n=s(t);R(Object.assign(n,{})).then(o=>{const{code:c}=o||{};c===0?v.success("\u4FDD\u5B58\u6210\u529F"):v.error(o.message)})}},F=l=>{Object.assign(t,{avatar_url:l.data.item.img}),u.avatar_url=l.data.item.img};return(l,n)=>{const o=i("h-form-item"),c=i("h-upload"),q=i("h-form"),C=i("h-card");return p(),$(C,{bordered:!1,title:"\u57FA\u7840\u8BBE\u7F6E"},{default:a(()=>[e(q,{label:"",border:!0},{default:a(()=>[e(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[d("span",null,j(u.nick_name),1)]),_:1}),e(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[e(c,{name:"file",multiple:!0,action:s(h),onChange:F},{default:a(()=>[d("div",z,[d("div",G,[u.avatar_url?(p(),A("img",{key:0,src:u.avatar_url,alt:"",class:"rounded-full"},null,8,M)):N("",!0)]),e(s(b),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:a(()=>[e(s(O),{icon:"Upload",class:"w-4 h-4 mr-2"}),g("\u56FE\u6807\u4E0A\u4F20 ")]),_:1})])]),_:1},8,["action"])]),_:1}),e(o,{label:"email",content:""},{default:a(()=>[e(s(_),{type:"text",modelValue:t.email,"onUpdate:modelValue":n[0]||(n[0]=r=>t.email=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[e(s(_),{type:"text",modelValue:t.mobile,"onUpdate:modelValue":n[1]||(n[1]=r=>t.mobile=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[e(s(_),{type:"text",modelValue:t.qq,"onUpdate:modelValue":n[2]||(n[2]=r=>t.qq=r)},null,8,["modelValue"])]),_:1}),e(o,null,{default:a(()=>[e(s(b),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:B},{default:a(()=>[g("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})}}});export{P as default};
