import{h as X,aq as tt,Z as et,C as ut,j as Y,G as ot,I as st,k as it,t as at,v as h,ar as L,l as v,c as m,m as e,q as a,p as g,e as b,w as n,F as x,f as nt,a5 as d,u as E,a6 as D,a1 as S,s as C,a as p,x as r,y as _,n as F,z as lt,L as B,a3 as ct,ax as z,_ as dt}from"./index.92deb929.js";import{g as rt,u as _t}from"./miandan.9b10419a.js";import{f as mt,a as pt}from"./goods.24a897e8.js";import{g as ft}from"./common.675f9b25.js";import{p as k}from"./pick.b6794720.js";const Ft={class:"flex flex-col items-center mt-8 intro-y sm:flex-row"},vt=e("h2",{class:"mr-auto text-lg font-medium"},"\u514D\u5355\u53D1\u5E03",-1),gt={class:"flex w-full mt-4 sm:mt-0 sm:w-auto"},yt={class:"grid grid-cols-12 gap-5 mt-5 pos intro-y"},bt={class:"col-span-12 intro-y lg:col-span-8"},Et={class:"p-5 intro-y box"},Dt={class:"flex-1 input-group"},ht={class:"sm:flex"},xt={class:"flex flex-col flex-1 gap-2"},wt={class:"flex gap-1"},At={class:"input-group"},Ct=e("div",{class:"input-group-text whitespace-nowrap"},"\u5238\u540E",-1),Bt=e("div",{class:"input-group-text"},"\u5143",-1),kt={class:"input-group"},Vt=e("div",{class:"input-group-text whitespace-nowrap"},"\u539F",-1),Ut=e("div",{class:"input-group-text"},"\u5143",-1),Ot={class:"flex gap-x-1"},jt={class:"input-group"},qt=e("div",{class:"input-group-text whitespace-nowrap"},"\u91D1\u989D",-1),It=e("div",{class:"input-group-text"},"\u5143",-1),Mt={class:"input-group"},Nt=e("div",{class:"input-group-text whitespace-nowrap"},"\u6EE1",-1),Yt=e("div",{class:"input-group-text"},"\u5143",-1),Lt={class:"form-check form-switch"},St={class:"w-auto sm:w-[200px]"},zt={class:"flex flex-col items-center gap-1 p-3 border-2 border-dashed rounded-md shadow-sm border-slate-200/60 dark:border-darkmode-400"},Pt={class:"relative w-32 h-32 cursor-pointer image-fit zoom-in"},Gt=["src"],$t={key:1},Tt={class:"w-20 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},Rt={key:0,class:"py-2"},Wt=e("p",{class:"text-"},"\u4E3B\u56FE\u53C2\u8003",-1),Zt={class:"flex flex-row flex-wrap gap-x-1 gap-y-1"},Ht=["onClick"],Jt=["src"],Kt={class:"flex-1"},Qt={class:"flex flex-col gap-2"},Xt={class:"w-48 input-group"},te=e("div",{class:"input-group-text whitespace-nowrap"},"\u653E\u5355\u91CF",-1),ee=e("div",{class:"input-group-text"},"\u5355",-1),ue={class:"w-48 input-group"},oe=e("div",{class:"input-group-text whitespace-nowrap"},"\u8FD4\u91D1\u989D",-1),se=e("div",{class:"input-group-text whitespace-nowrap"},"\u5143/\u7B14",-1),ie={class:"w-48 input-group"},ae=e("div",{class:"input-group-text whitespace-nowrap"},"\u670D\u52A1\u8D39",-1),ne={class:"flex items-center justify-start pl-3 text-center form-control bg-neutral-50"},le=e("div",{class:"input-group-text whitespace-nowrap"},"\u5143/\u7B14",-1),ce={class:"p-2 my-2 border-none form-help bg-neutral-50"},de={class:"text-rose-600"},re={class:"text-rose-600"},_e={class:"font-medium text-rose-600"},me=e("option",{value:0},"--\u9009\u62E9--",-1),pe=["value"],fe={key:0},Fe=e("p",null,"\u5907\u9009\u6587\u6848",-1),ve={class:"flex flex-col gap-y-3"},ge=["onClick"],ye=nt('<div class="col-span-12 lg:col-span-4"><div class="p-5 intro-y box"><div><label class="font-medium form-label">\u653E\u5355\u8BF4\u660E</label><div class="leading-8 text-neutral-600"><p>1\uFF1A\u6709\u53EF\u80FD\u540C\u65F6\u9886\u53D6\u4EBA\u6570\u8FC7\u591A\uFF0C\u5BFC\u81F4\u90E8\u5206\u8D85\u5355\uFF1B</p><p>2\uFF1A\u4E0B\u67B630\u5206\u949F\u540E\u7ED3\u7B97\uFF0C\u591A;\u51BB\u7ED3\u7684\u9000\u56DE\u4F59\u989D\uFF0C\u8D85\u51FA\u7684\u4F1A\u4ECE\u4F59\u989D\u4E2D\u6263;</p><p>3\uFF1A\u8BA2\u5355\u53D1\u751F\u9000\u6B3E\u65F6\uFF0C\u5BF9\u5E94\u91D1\u989D\u9000\u56DE\u4F59\u989D\uFF1B</p><p>4\uFF1A\u652F\u6301\u5BFC\u51FA\u8BA2\u5355\u8FDB\u884C\u6838\u5BF9\u8BA2\u5355;</p><p>5\uFF1A\u4E0D\u80FD\u653EAB\u5355\uFF0C\u53EA\u80FDAA\u5355\uFF1B</p><p>6\uFF1A\u8BBE\u7F6E\u7684\u5238\u540E\u4EF7\u9700\u8981\u4E0E\u5546\u54C1\u5176\u4E2D\u4E00\u4E2Asku\u5238\u540E\u4EF7\u683C\u76F8\u540C\uFF0C\u53EF\u4EE5\u4E3A\u4EFB\u4E00sku</p></div></div><div class="mt-3"><label class="font-medium form-label">\u514D\u5355\u6536\u8D39\u6807\u51C6</label><div class="leading-8 text-neutral-600"><p>1\u3001\u514D\u5355\u670D\u52A1\u8D5B\uFF1A</p><p>0-9.9\uFF0C\u6536\u53D6\u670D\u52A1\u88C50.35\u5143\u6BCF\u5355</p><p>9.9\u5143\u4EE5\u4E0A\uFF0C\u6536\u53D6\u670D\u52A1\u8D393.5%\u5143\u6BCF\u5355</p><p>2\u3001\u514D\u5355\u591A\u591A\u5BA2\u4F63\u91D1\uFF1A</p><p>\u591A\u591A\u5BA2\u4F63\u91D1\u5F00\u901A\u5373\u53EF\uFF0C\u4E0D\u9650\u5236\u91D1\u989D</p></div></div><div class="mt-3"><label class="font-medium form-label">\u8D85\u7EA7\u8FD4\u6536\u8D39\u6807\u51C6</label><div class="leading-8 text-neutral-600"><p>\u591A\u591A\u5BA2\u4F63\u91D1\u4E0D\u4F4E\u4E8E10%</p><p>(\u5230\u624B\u4EF7=\u5238\u540E\u4EF7-\u8FD4\u6B3E\u5168\u989D\uFF09</p><p>\u5230\u624B\u4EF70-1.9\uFF0C\u670D\u52A1\u8D390.2</p><p>\u5230\u624B\u4EF71.9-5.9\uFF0C\u670D\u52A1\u9EA60.25</p><p>\u5230\u624B\u4EF75.9-9.9\uFF0C\u670D\u52A1\u8D390.3</p><p>\u5230\u624B\u4EF79.9\u4EE5\u4E0A\uFF0C\u670D\u52A1\u9EA63%</p></div></div></div></div>',1),be=X({__name:"goods",setup(Ee){const V=tt(),U=et().uploadUrl,w=ut(""),t=Y({id:0,coupon_url:"",item_url:"",qq_video_url:"",money:0,goods_sign:"",item_id:"",platform_type:0,seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",d_title:"",pic_url:"",price:0,qq_pic_url:"",comment:"",cid1:0,start_time:"",end_time:"",commission:0,commission_rate:0,coupon_price:0,coupon_time:"",activity_time:"",zs_id:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0,multi_group:!1}),P={},G=["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","start_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount","coupon_price","commission","commission_rate","coupon_time","activity_time","zs_id"],l=Y({confirmLoading:!1,data:{cats:[],wen_items:[],pic_urls:[],promotion_fee_items:[]}}),A=ot(()=>{let i=t.price-t.money,u=0;return l.data.promotion_fee_items.forEach(s=>{i>s[0]&&i<s[1]&&(u=s[2]+s[3]*i/100)}),u});st(()=>{$(),V.query.id&&j(V.query.id)});const $=()=>{ft({}).then(i=>{i.data.items&&(l.data.cats=i.data.items)})},O=it(P,at(t)),j=i=>{rt({id:i}).then(u=>{if(u.data.goods){let s=u.data.goods;h(()=>{const y=k(s,G);Object.assign(t,y),t.multi_group=s.multi_group===1,s.start_time&&(t.start_time=d(s.start_time)),s.end_time&&(t.end_time=d(s.end_time)),s.start_time&&s.end_time&&(t.coupon_time=d(s.start_time)+" - "+d(s.end_time)),s.activity_start_time&&(t.activity_start_time=d(s.activity_start_time)),s.activity_end_time&&(t.activity_end_time=d(s.activity_end_time)),s.activity_start_time&&s.activity_end_time&&(t.activity_time=d(s.activity_start_time)+" - "+d(s.activity_end_time))})}}).catch(u=>{})},q=i=>{if(l.confirmLoading=!0,O.value.$touch(),O.value.$invalid)l.confirmLoading=!1;else{let u=E(t),s={apply_status:i,multi_group:t.multi_group?1:0};u.start_time?s=Object.assign(s,{start_time:D(u.start_time)}):s=Object.assign(s,{start_time:0}),u.end_time?s=Object.assign(s,{end_time:D(u.end_time)}):s=Object.assign(s,{end_time:0}),u.activity_start_time&&(s=Object.assign(s,{activity_start_time:D(u.activity_start_time)})),u.activity_end_time&&(s=Object.assign(s,{activity_end_time:D(u.activity_end_time)})),u.activity_time&&(s=Object.assign(s,{activity_start_time:D(S(u.activity_time)[0]),activity_end_time:D(S(u.activity_time)[1])})),_t(Object.assign({},u,s)).then(y=>{y.code===0?(i===1?C.success("\u63D0\u4EA4\u6210\u529F"):C.success("\u4FDD\u5B58\u6210\u529F"),j(y.data.id)):C.error(y.message),l.confirmLoading=!1})}},I=i=>{t.pic_url=i.data.item.img},T=()=>{l.confirmLoading=!0,mt({content:w.value}).then(i=>{i.data.goods&&(h(()=>{Object.assign(t,k(i.data.goods,["cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","start_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount","coupon_price","commission","commission_rate","coupon_time","activity_time","zs_id"])),i.data.goods.start_time&&(t.start_time=d(i.data.goods.start_time)),i.data.goods.end_time&&(t.end_time=d(i.data.goods.end_time)),i.data.goods.start_time&&i.data.goods.end_time&&(t.coupon_time=d(i.data.goods.start_time)+" - "+d(i.data.goods.end_time)),t.activity_time=d(z().unix())+" - "+d(z().unix()+24*3600*3),t.rebate_amount=i.data.goods.coupon_price}),l.data.wen_items=i.data.goods.wen_items||[],l.data.pic_urls=i.data.goods.pic_urls||[],l.data.promotion_fee_items=i.data.goods.promotion_fee_items||[]),l.confirmLoading=!1})},R=()=>{pt({item_id:t.item_id,platform_type:t.platform_type,coupon_url:t.coupon_url}).then(i=>{i.data.coupon&&h(()=>{const u=k(i.data.coupon,["money","condition"]);Object.assign(t,u),t.start_time=d(i.data.coupon.start_time),t.end_time=d(i.data.coupon.end_time)})})},W=i=>{h(()=>{Object.assign(t,{comment:i.content})})},Z=i=>{h(()=>{t.pic_url=i})};return L(()=>t.coupon_url,(i,u)=>{R()},{immediate:!0}),L(()=>[t.price,t.money],(i,u)=>{t.coupon_price=parseFloat((t.price-t.money).toFixed(2))},{immediate:!0}),(i,u)=>{const s=v("EyeIcon"),y=v("ArrowUpCircleIcon"),c=v("h-form-item"),M=v("Litepicker"),N=v("h-upload"),H=v("UploadIcon"),J=v("h-form"),K=v("h-spin");return p(),m(x,null,[e("div",Ft,[vt,e("div",gt,[e("button",{type:"button",class:"flex items-center ml-auto mr-2 btn box sm:ml-0",onClick:u[0]||(u[0]=o=>q(0))},[a(s,{class:"w-4 h-4 mr-2"}),g(" \u4FDD\u5B58\u8349\u7A3F ")]),e("button",{type:"button",class:"flex items-center ml-auto mr-2 btn btn-primary sm:ml-0",onClick:u[1]||(u[1]=o=>q(1))},[a(y,{class:"w-4 h-4 mr-2"}),g(" \u63D0\u4EA4\u5BA1\u6838 ")])])]),e("div",yt,[b(" BEGIN: Post Content "),e("div",bt,[e("div",Et,[a(K,{spinning:l.confirmLoading},{default:n(()=>[a(J,{layout:"small"},{default:n(()=>[a(c,{label:"\u5546\u54C1\u94FE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[e("div",Dt,[r(e("textarea",{class:"form-control","onUpdate:modelValue":u[2]||(u[2]=o=>w.value=o),rows:2,placeholder:"\u8F93\u5165\u62FC\u591A\u591A\u77ED\u94FE\u63A5"},null,512),[[_,w.value]]),e("div",{class:"bg-green-600 input-group-text btn-outline-primary"},[e("button",{class:"w-24 h-10",onClick:T},"\u62C9\u53D6\u5546\u54C1\u4FE1\u606F")])])]),_:1}),e("div",ht,[e("div",xt,[a(c,{label:"\u4EF7\u683C",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[e("div",wt,[e("div",At,[Ct,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[3]||(u[3]=o=>t.coupon_price=o),readonly:""},null,512),[[_,t.coupon_price]]),Bt]),e("div",kt,[Vt,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[4]||(u[4]=o=>t.price=o)},null,512),[[_,t.price]]),Ut])])]),_:1}),a(c,{label:"\u4F18\u60E0\u5238",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[e("div",Ot,[e("div",jt,[qt,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[5]||(u[5]=o=>t.money=o)},null,512),[[_,t.money]]),It]),e("div",Mt,[Nt,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[6]||(u[6]=o=>t.condition=o)},null,512),[[_,t.condition]]),Yt])])]),_:1}),a(c,{label:"\u4F18\u60E0\u5238\u8FDE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[r(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":u[7]||(u[7]=o=>t.coupon_url=o)},null,512),[[_,t.coupon_url]])]),_:1}),a(c,{label:"\u4F18\u60E0\u5238\u65F6\u95F4",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[a(M,{modelValue:t.coupon_time,"onUpdate:modelValue":u[8]||(u[8]=o=>t.coupon_time=o),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u4F63\u91D1\u6BD4\u4F8B",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>{var o;return[g(F((o=t.commission_rate)!=null?o:0)+"%",1)]}),_:1}),a(c,{label:"\u4F63\u91D1\u91D1\u989D",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>{var o;return[g(F((o=t.commission)!=null?o:0)+"\u5143",1)]}),_:1}),a(c,{label:"\u5546\u54C1\u6807\u9898",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[r(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":u[9]||(u[9]=o=>t.title=o)},null,512),[[_,t.title]])]),_:1}),a(c,{label:"\u77ED \u6807 \u9898",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[r(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":u[10]||(u[10]=o=>t.d_title=o)},null,512),[[_,t.d_title]])]),_:1}),a(c,{label:"\u5F00\u542F\u591A\u4EBA\u56E2",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[e("div",Lt,[r(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":u[11]||(u[11]=o=>t.multi_group=o)},null,512),[[lt,t.multi_group]])])]),_:1})]),e("div",St,[e("div",zt,[a(N,{name:"file",multiple:!0,action:E(U),onChange:I},{default:n(()=>[e("div",Pt,[t.pic_url.length>0?(p(),m("img",{key:0,class:"rounded-md",alt:"",src:t.pic_url},null,8,Gt)):(p(),m("div",$t))])]),_:1},8,["action"]),a(N,{name:"file",multiple:!0,action:E(U),onChange:I},{default:n(()=>[e("button",Tt,[a(H,{class:"w-4 h-4 mr-2"}),g("\u4E0A\u4F20 ")])]),_:1},8,["action"]),l.data.pic_urls&&l.data.pic_urls.length>0?(p(),m("div",Rt,[Wt,e("ul",Zt,[(p(!0),m(x,null,B(l.data.pic_urls,(o,f)=>(p(),m("li",{key:f,onClick:Q=>Z(o),class:"w-10 h-10 p-1 border hover:border-green-600"},[e("img",{src:o},null,8,Jt)],8,Ht))),128))])])):b("v-if",!0)])])]),a(c,{label:"\u63A8\u5E7F\u9884\u7B97",content:"",layout:"inline","label-class":"items-start w-20"},{default:n(()=>{var o;return[e("div",Kt,[e("div",Qt,[e("div",Xt,[te,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[12]||(u[12]=f=>t.rebate_orders=f)},null,512),[[_,t.rebate_orders]]),ee]),e("div",ue,[oe,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[13]||(u[13]=f=>t.rebate_amount=f)},null,512),[[_,t.rebate_amount]]),se]),e("div",ie,[ae,e("div",ne,F((o=E(A))!=null?o:0),1),le])]),e("div",ce,[g(" ("),e("span",de,F(t.rebate_amount),1),g("(\u798F\u5229\u91D1\u989D) + "),e("span",re,F(E(A).toFixed(2)),1),g("(\u670D\u52A1\u8D39)) * "+F(t.rebate_orders)+"(\u9884\u8BA1\u63A8\u5E7F\u91CF) = \u9884\u8BA1\u603B\u8D39\u7528: ",1),e("span",_e,F(((t.rebate_amount+E(A))*t.rebate_orders).toFixed(2)),1)])])]}),_:1}),a(c,{label:"\u6D3B\u52A8\u65F6\u95F4",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[a(M,{modelValue:t.activity_time,"onUpdate:modelValue":u[14]||(u[14]=o=>t.activity_time=o),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u62DB\u5546\u56E2\u957F",content:"",layout:"inline","label-class":"w-20"},{default:n(()=>[r(e("input",{type:"text",class:"form-control w-36","onUpdate:modelValue":u[15]||(u[15]=o=>t.zs_id=o),placeholder:"\u62DB\u5546\u56E2\u957FID"},null,512),[[_,t.zs_id]])]),_:1}),a(c,{label:"\u5206\u7C7B",content:"",layout:"inline","label-class":"items-start w-20"},{default:n(()=>[r(e("select",{class:"form-select w-36","onUpdate:modelValue":u[16]||(u[16]=o=>t.cid1=o)},[me,(p(!0),m(x,null,B(l.data.cats,(o,f)=>(p(),m("option",{key:f,value:o.c_id},F(o.short_name),9,pe))),128))],512),[[ct,t.cid1]])]),_:1}),a(c,{label:"\u5FAE\u4FE1\u7FA4\u4E13\u7528\u56FE",content:"",layout:"small"},{default:n(()=>[r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[17]||(u[17]=o=>t.qq_pic_url=o)},null,512),[[_,t.qq_pic_url]])]),_:1}),a(c,{label:"\u6587\u6848",content:"",layout:"small"},{default:n(()=>[r(e("textarea",{class:"form-control","onUpdate:modelValue":u[18]||(u[18]=o=>t.comment=o),rows:4,placeholder:"\u8BF7\u8F93\u516520-100\u5B57\u5BFC\u8D2D\u6587\u6848\u4ECB\u7ECD"},null,512),[[_,t.comment]]),l.data.wen_items&&l.data.wen_items.length>0?(p(),m("div",fe,[Fe,e("ul",ve,[(p(!0),m(x,null,B(l.data.wen_items,(o,f)=>(p(),m("li",{key:f,onClick:Q=>W(o)},F(f+1)+"."+F(o.content),9,ge))),128))])])):b("v-if",!0)]),_:1})]),_:1})]),_:1},8,["spinning"])])]),b(" END: Post Content "),b(" BEGIN: Post Info "),ye,b(" END: Post Info ")])],64)}}}),Be=dt(be,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/goods.vue"]]);export{Be as default};
