import{d as E,a7 as $,G as j,a8 as q,l as f,o as T,J as U,C as V,n as s,e as k,w as o,b as z,g as t,p as d,h as r,u as l,B as M,j as H,a as N,X as S,a9 as y,ab as Y,k as P}from"./index.e8171561.js";import{g as G,a as h}from"./report.1406fa64.js";const I={list:"/api/user/order/order/list"},R={class:"box flex p-2 py-5"},J={class:"flex flex-1 flex-col items-center justify-center gap-y-2"},W=t("span",null,"\u4ECA\u65E5\u9884\u4F30",-1),X={class:"flex flex-1 flex-col items-center justify-center gap-y-2"},K=t("span",null,"\u6628\u65E5\u9884\u4F30",-1),L={class:"flex flex-1 flex-col items-center justify-center gap-y-2"},O=t("span",null,"\u7D2F\u79EF\u9884\u4F30",-1),Q={class:"mt-2 xl:mt-0"},Z=E({__name:"common",setup(ee){const m=$(),g=j(()=>`${m.urlPrefix}${m.apiUrl}${I.list}`),w=q({sharedColumnNames:{created:"created_at",updated:"created_at"}}),b=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(e){return N(`
        <div class="flex items-center">
          <div class="w-9 h-9 zoom-in">
            ${S(e.getData().item_img)?'<div class="border-white rounded-lg shadow-md w-9 h-9"></div>':'<img class="border-white rounded-lg shadow-md w-9 h-9" src="'+e.getData().item_img+'" />'}
          </div>
          <div class="ml-4">
            <a href="" class="font-medium whitespace-nowrap">${e.getData().order_no}</a>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${e.getData().item_title}
            </div>
          </div>
        </div>
        `)[0]},download:!0},{title:"\u72B6\u6001",hozAlign:"center",field:"status",width:80},{title:"\u8BA2\u5355\u7C7B\u578B",field:"order_type",width:120},{title:"\u4ED8\u6B3E\u91D1\u989D",field:"am",width:120},{title:"\u9884\u4F30\u6536\u76CA",field:"commission",width:120},{title:"\u5E7F\u544A\u4F4D",field:"",width:80,formatter(e){return`${e.getData().pid||""}${e.getData().zone_name||""}`}},{title:"\u8BA2\u5355\u65F6\u95F4",field:"order_time",formatter(e){return y(e.getData().order_time,"YY-MM-DD HH:mm")},width:150},{title:"\u540C\u6B65\u65F6\u95F4",field:"created_at",formatter(e){return y(e.getData().created_at,"YY-MM-DD HH:mm")},width:150}],n=f({order_no:""}),a=f({query:!1,data:{report:{app:{all:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0},today:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0},yesterday:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0}}}}});T(()=>{x()}),U(()=>{a.query=!1});const x=()=>{c()},u=V(),c=()=>{a.query=!0,u.value.reload(!0),p()};let i;const p=()=>{!a.query||(i&&window.clearTimeout(i),G({}).then(e=>{e.data.report&&(a.data.report.app.all=e.data.report),i=setTimeout(()=>{p()},1e3*60)}),h({}).then(e=>{e.data.report&&(a.data.report.app.today=e.data.report)}),h({yesterday:1}).then(e=>{e.data.report&&(a.data.report.app.yesterday=e.data.report)}))};return(e,_)=>{const v=s("FormInput"),D=s("h-form-item"),B=s("h-form"),F=Y,C=s("h-card");return z(),k(C,{bordered:!1,title:"\u8BA2\u5355"},{extra:o(()=>[t("div",R,[t("div",J,[W,t("span",null,d(a.data.report.app.today.money),1)]),t("div",X,[K,t("span",null,d(a.data.report.app.yesterday.money),1)]),t("div",L,[O,t("span",null,d(a.data.report.app.all.money),1)])])]),default:o(()=>[r(F,{ref_key:"tableRef",ref:u,columns:b,ajaxUrl:l(g),config:l(w),queryParam:n},{search:o(()=>[r(B,{layout:"inline"},{default:o(()=>[r(D,{label:"\u8BA2\u5355\u53F7",content:"",layout:"inline"},{default:o(()=>[r(v,{modelValue:n.order_no,"onUpdate:modelValue":_[0]||(_[0]=A=>n.order_no=A),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),t("div",Q,[r(l(M),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:c},{default:o(()=>[H(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),oe=P(Z,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/order/common.vue"]]);export{oe as default};
