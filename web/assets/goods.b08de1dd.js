import{h as K,aq as Q,Z as X,C as tt,j as M,G as et,I as ot,k as st,t as ut,v as w,ar as nt,l as b,c as p,m as e,q as i,p as g,e as h,w as a,F,f as it,a5 as r,u as x,a6 as E,s as A,a as f,x as d,y as _,n as m,L as B,a3 as at,a9 as lt,_ as ct}from"./index.77bb4587.js";import{g as dt,u as rt,f as _t,a as mt}from"./goods.6643f323.js";import{g as pt}from"./common.85cc8ce4.js";import{p as V}from"./pick.cd99d414.js";const ft={class:"flex flex-col items-center mt-8 intro-y sm:flex-row"},vt=e("h2",{class:"mr-auto text-lg font-medium"},"\u53D1\u5E03\u5546\u54C1",-1),gt={class:"flex w-full mt-4 sm:mt-0 sm:w-auto"},bt={class:"grid grid-cols-12 gap-5 mt-5 pos intro-y"},yt={class:"col-span-12 intro-y lg:col-span-8"},ht={class:"p-5 intro-y box"},xt={class:"flex-1 input-group"},wt={class:"sm:flex"},Ft={class:"flex flex-col flex-1 gap-2"},Et={class:"flex gap-1"},Dt={class:"input-group"},Ct=e("div",{class:"input-group-text whitespace-nowrap"},"\u5238\u540E",-1),At=e("div",{class:"input-group-text"},"\u5143",-1),Bt={class:"input-group"},Vt=e("div",{class:"input-group-text whitespace-nowrap"},"\u539F",-1),kt=e("div",{class:"input-group-text"},"\u5143",-1),Ut={class:"flex gap-x-1"},qt={class:"input-group"},Ot=e("div",{class:"input-group-text whitespace-nowrap"},"\u91D1\u989D",-1),jt=e("div",{class:"input-group-text"},"\u5143",-1),It={class:"input-group"},Nt=e("div",{class:"input-group-text whitespace-nowrap"},"\u6EE1",-1),Yt=e("div",{class:"input-group-text"},"\u5143",-1),Mt={class:"w-auto sm:w-[200px]"},Lt={class:"flex flex-col items-center gap-1 p-3 border-2 border-dashed rounded-md shadow-sm border-slate-200/60 dark:border-darkmode-400"},St={class:"relative w-32 h-32 cursor-pointer image-fit zoom-in"},Pt=["src"],Gt={key:1},$t={class:"w-20 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},zt={key:0,class:"py-2"},Tt=e("p",{class:"text-"},"\u4E3B\u56FE\u53C2\u8003",-1),Rt={class:"flex flex-row flex-wrap gap-x-1 gap-y-1"},Wt=["onClick"],Zt=["src"],Ht={class:"flex-1"},Jt={class:"flex flex-col gap-2"},Kt={class:"w-48 input-group"},Qt=e("div",{class:"input-group-text whitespace-nowrap"},"\u653E\u5355\u91CF",-1),Xt=e("div",{class:"input-group-text"},"\u5355",-1),te={class:"w-48 input-group"},ee=e("div",{class:"input-group-text whitespace-nowrap"},"\u8FD4\u91D1\u989D",-1),oe=e("div",{class:"input-group-text whitespace-nowrap"},"\u5143/\u7B14",-1),se={class:"w-48 input-group"},ue=e("div",{class:"input-group-text whitespace-nowrap"},"\u670D\u52A1\u8D39",-1),ne={class:"flex items-center justify-center text-center form-control bg-neutral-50"},ie=e("div",{class:"input-group-text whitespace-nowrap"},"\u5143/\u7B14",-1),ae={class:"p-2 my-2 border-none form-help bg-neutral-50"},le={class:"text-rose-600"},ce={class:"text-rose-600"},de={class:"text-rose-600"},re={class:"font-medium text-rose-600"},_e=e("option",{value:0},"--\u9009\u62E9--",-1),me=["value"],pe={key:0},fe=e("p",null,"\u5907\u9009\u6587\u6848",-1),ve={class:"flex flex-col gap-y-3"},ge=["onClick"],be=it('<div class="col-span-12 lg:col-span-4"><div class="p-5 intro-y box"><div><label class="font-medium form-label">\u653E\u5355\u8BF4\u660E</label><div class="leading-8 text-neutral-600"><p>1\uFF1A\u4EA7\u54C1\u63D0\u4EA4\u5BA1\u6838\u4F1A\u6263\u9664\u70B9\u5238\uFF1B</p><p>2:\u5BA1\u6838\u901A\u8FC7\u540E\u4EA7\u54C1\u4F1A\u540C\u6B65\u5C55\u793A\u548C\u540C\u6B65\u653E\u5355\u5E73\u53F0\u548C\u63A5\u53E3\u3001\u7F51\u7AD9\u3001app\u7B49\u6E20\u9053;</p><p>3\uFF1A\u5BA1\u6838\u62D2\u7EDD\u70B9\u5238\u4F1A\u9000\u56DE\u8D26\u6237\uFF0C\u7136\u540E\u53EF\u4EE5\u91CD\u65B0\u63D0\u4EA4\u5BA1\u6838</p><p>4\uFF1A\u4E0D\u80FD\u653EAB\u5355\uFF0C\u53EA\u80FDAA\u5355\uFF1B</p></div></div><div class="mt-3"><label class="font-medium form-label">\u514D\u5355\u6536\u8D39\u6807\u51C6</label><div class="leading-8 text-neutral-600"><p>1\u3001\u653E\u5355\u9700\u8981\u5148\u5145\u503C\u70B9\u5238</p><p>2\u3001\u6BCF\u4E2A\u4EA7\u54C1\u53D1\u5E03\u6263\u966450\u70B9\u5238</p></div></div></div></div>',1),ye=K({__name:"goods",setup(he){const k=Q(),L=lt(),U=X().uploadUrl,D=tt(""),t=M({coupon_url:"",item_url:"",id:0,qq_video_url:"",money:0,goods_sign:"",item_id:"",seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",d_title:"",pic_url:"",price:0,qq_pic_url:"",comment:"",cid1:0,start_time:"",end_time:"",commission:0,commission_rate:0,coupon_price:0,coupon_time:"",activity_time:"",zs_id:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),S={},q=["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","start_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount","coupon_price","commission","commission_rate","coupon_time","activity_time","zs_id"],c=M({confirmLoading:!1,data:{cats:[],wen_items:[],pic_urls:[]}}),C=et(()=>(t.price-t.money)*5/100);ot(()=>{P(),k.query.id&&G(k.query.id)});const P=()=>{pt({}).then(u=>{u.data.items&&(c.data.cats=u.data.items)})},O=st(S,ut(t)),G=u=>{dt({id:u}).then(o=>{if(o.data.goods){let n=o.data.goods;w(()=>{const y=V(n,q);Object.assign(t,y),n.start_time&&(t.start_time=r(n.start_time)),n.end_time&&(t.end_time=r(n.end_time)),n.start_time&&n.end_time&&(t.coupon_time=r(n.start_time)+" - "+r(n.end_time)),n.activity_start_time&&(t.activity_start_time=r(n.activity_start_time)),n.activity_end_time&&(t.activity_end_time=r(n.activity_end_time)),n.activity_start_time&&n.activity_end_time&&(t.activity_time=r(n.activity_start_time)+" - "+r(n.activity_end_time))})}}).catch(o=>{})},j=u=>{if(c.confirmLoading=!0,O.value.$touch(),O.value.$invalid)c.confirmLoading=!1;else{let o=x(t),n={apply_status:u};o.start_time?n=Object.assign(n,{start_time:E(o.start_time)}):n=Object.assign(n,{start_time:0}),o.end_time?n=Object.assign(n,{end_time:E(o.end_time)}):n=Object.assign(n,{end_time:0}),o.activity_start_time&&(n=Object.assign(n,{activity_start_time:E(o.activity_start_time)})),o.activity_end_time&&(n=Object.assign(n,{activity_end_time:E(o.activity_end_time)})),rt(Object.assign({},o,n)).then(y=>{y.code===0?(u===1?A.success("\u63D0\u4EA4\u6210\u529F"):A.success("\u4FDD\u5B58\u6210\u529F"),L.push({name:"business-goods"},!0)):A.error(y.message),c.confirmLoading=!1})}},I=u=>{t.pic_url=u.data.item.img},$=()=>{_t({content:D.value}).then(u=>{u.data.goods&&(w(()=>{Object.assign(t,V(u.data.goods,q)),u.data.goods.start_time&&(t.start_time=r(u.data.goods.start_time)),u.data.goods.end_time&&(t.end_time=r(u.data.goods.end_time)),u.data.goods.start_time&&u.data.goods.end_time&&(t.coupon_time=r(u.data.goods.start_time)+" - "+r(u.data.goods.end_time),t.coupon_time)}),c.data.wen_items=u.data.goods.wen_items||[],c.data.pic_urls=u.data.goods.pic_urls||[]),c.confirmLoading=!1})},z=()=>{mt({item_url:t.item_url,coupon_url:t.coupon_url}).then(u=>{u.data.coupon&&w(()=>{const o=V(u.data.coupon,["money","condition"]);Object.assign(t,o),t.start_time=r(u.data.coupon.start_time),t.end_time=r(u.data.coupon.end_time)})})},T=u=>{w(()=>{Object.assign(t,{comment:u.content})})},R=u=>{w(()=>{t.pic_url=u})};return nt(()=>t.coupon_url,(u,o)=>{z()},{immediate:!0}),(u,o)=>{const n=b("EyeIcon"),y=b("ArrowUpCircleIcon"),l=b("h-form-item"),N=b("Litepicker"),Y=b("h-upload"),W=b("UploadIcon"),Z=b("h-form"),H=b("h-spin");return f(),p(F,null,[e("div",ft,[vt,e("div",gt,[e("button",{type:"button",class:"flex items-center ml-auto mr-2 btn box sm:ml-0",onClick:o[0]||(o[0]=s=>j(0))},[i(n,{class:"w-4 h-4 mr-2"}),g(" \u4FDD\u5B58\u8349\u7A3F ")]),e("button",{type:"button",class:"flex items-center ml-auto mr-2 btn btn-primary sm:ml-0",onClick:o[1]||(o[1]=s=>j(1))},[i(y,{class:"w-4 h-4 mr-2"}),g(" \u63D0\u4EA4\u5BA1\u6838 ")])])]),e("div",bt,[h(" BEGIN: Post Content "),e("div",yt,[e("div",ht,[i(H,{spinning:c.confirmLoading},{default:a(()=>[i(Z,{layout:"small"},{default:a(()=>[i(l,{label:"\u5546\u54C1\u94FE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[e("div",xt,[d(e("textarea",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>D.value=s),rows:2,placeholder:"\u8BF7\u5728\u6B64\u7C98\u8D34\u63A8\u5E7F\u6587\u6848,\u5546\u54C1\u94FE\u63A5\uFF0C\u672C\u529F\u80FD\u53EF\u8BC6\u522B\u5927\u591A\u7B26\u5408\u89C4\u5219\u7684\u6587\u6848\u548C\u94FE\u63A5"},null,512),[[_,D.value]]),e("div",{class:"bg-green-600 input-group-text btn-outline-primary"},[e("button",{class:"w-24 h-10",onClick:$},"\u62C9\u53D6\u5546\u54C1\u4FE1\u606F")])])]),_:1}),e("div",wt,[e("div",Ft,[i(l,{label:"\u4EF7\u683C",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[e("div",Et,[e("div",Dt,[Ct,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=s=>t.coupon_price=s)},null,512),[[_,t.coupon_price]]),At]),e("div",Bt,[Vt,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=s=>t.price=s)},null,512),[[_,t.price]]),kt])])]),_:1}),i(l,{label:"\u4F18\u60E0\u5238",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[e("div",Ut,[e("div",qt,[Ot,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=s=>t.money=s)},null,512),[[_,t.money]]),jt]),e("div",It,[Nt,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=s=>t.condition=s)},null,512),[[_,t.condition]]),Yt])])]),_:1}),i(l,{label:"\u4F18\u60E0\u5238\u8FDE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[d(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[7]||(o[7]=s=>t.coupon_url=s)},null,512),[[_,t.coupon_url]])]),_:1}),i(l,{label:"\u4F18\u60E0\u5238\u65F6\u95F4",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[i(N,{modelValue:t.coupon_time,"onUpdate:modelValue":o[8]||(o[8]=s=>t.coupon_time=s),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1}),i(l,{label:"\u4F63\u91D1\u6BD4\u4F8B",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>{var s;return[g(m((s=t.commission_rate)!=null?s:0)+"%",1)]}),_:1}),i(l,{label:"\u4F63\u91D1\u91D1\u989D",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>{var s;return[g(m((s=t.commission)!=null?s:0)+"\u5143",1)]}),_:1}),i(l,{label:"\u5546\u54C1\u6807\u9898",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[d(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[9]||(o[9]=s=>t.title=s)},null,512),[[_,t.title]])]),_:1}),i(l,{label:"\u77ED \u6807 \u9898",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[d(e("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[10]||(o[10]=s=>t.d_title=s)},null,512),[[_,t.d_title]])]),_:1})]),e("div",Mt,[e("div",Lt,[i(Y,{name:"file",multiple:!0,action:x(U),onChange:I},{default:a(()=>[e("div",St,[t.pic_url.length>0?(f(),p("img",{key:0,class:"rounded-md",alt:"",src:t.pic_url},null,8,Pt)):(f(),p("div",Gt))])]),_:1},8,["action"]),i(Y,{name:"file",multiple:!0,action:x(U),onChange:I},{default:a(()=>[e("button",$t,[i(W,{class:"w-4 h-4 mr-2"}),g("\u4E0A\u4F20 ")])]),_:1},8,["action"]),c.data.pic_urls&&c.data.pic_urls.length>0?(f(),p("div",zt,[Tt,e("ul",Rt,[(f(!0),p(F,null,B(c.data.pic_urls,(s,v)=>(f(),p("li",{key:v,onClick:J=>R(s),class:"w-10 h-10 p-1 border hover:border-green-600"},[e("img",{src:s},null,8,Zt)],8,Wt))),128))])])):h("v-if",!0)])])]),i(l,{label:"\u63A8\u5E7F\u9884\u7B97",content:"",layout:"inline","label-class":"items-start w-20"},{default:a(()=>{var s;return[e("div",Ht,[e("div",Jt,[e("div",Kt,[Qt,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[11]||(o[11]=v=>t.rebate_orders=v)},null,512),[[_,t.rebate_orders]]),Xt]),e("div",te,[ee,d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[12]||(o[12]=v=>t.rebate_amount=v)},null,512),[[_,t.rebate_amount]]),oe]),e("div",se,[ue,e("div",ne,m((s=x(C))!=null?s:0),1),ie])]),e("div",ae,[g(m(t.rebate_orders)+"(\u9884\u8BA1\u63A8\u5E7F\u91CF) * "+m(t.rebate_amount)+"(\u798F\u5229\u91D1\u989D) = \u9884\u8BA1\u603B\u798F\u5229\u91D1\u989D : ",1),e("span",le,m(t.rebate_amount*t.rebate_orders),1),g(" + "),e("span",ce,m(t.rebate_orders),1),g(" (\u9884\u8BA1\u63A8\u5E7F\u91CF) * "),e("span",de,m(x(C).toFixed(2)),1),g(" (\u670D\u52A1\u8D39) = \u9884\u8BA1\u603B\u8D39\u7528: "),e("span",re,m((t.rebate_amount*t.rebate_orders+x(C)*t.rebate_orders).toFixed(2)),1)])])]}),_:1}),i(l,{label:"\u6D3B\u52A8\u65F6\u95F4",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[i(N,{modelValue:t.activity_time,"onUpdate:modelValue":o[13]||(o[13]=s=>t.activity_time=s),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1}),i(l,{label:"\u62DB\u5546\u56E2\u957F",content:"",layout:"inline","label-class":"w-20"},{default:a(()=>[d(e("input",{type:"text",class:"form-control w-36","onUpdate:modelValue":o[14]||(o[14]=s=>t.zs_id=s),placeholder:"\u62DB\u5546\u56E2\u957FID"},null,512),[[_,t.zs_id]])]),_:1}),i(l,{label:"\u5206\u7C7B",content:"",layout:"inline","label-class":"items-start w-20"},{default:a(()=>[d(e("select",{class:"form-select w-36","onUpdate:modelValue":o[15]||(o[15]=s=>t.cid1=s)},[_e,(f(!0),p(F,null,B(c.data.cats,(s,v)=>(f(),p("option",{key:v,value:s.c_id},m(s.short_name),9,me))),128))],512),[[at,t.cid1]])]),_:1}),i(l,{label:"\u5FAE\u4FE1\u7FA4\u4E13\u7528\u56FE",content:"",layout:"small"},{default:a(()=>[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[16]||(o[16]=s=>t.qq_pic_url=s)},null,512),[[_,t.qq_pic_url]])]),_:1}),i(l,{label:"\u89C6\u9891\u6587\u4EF6",content:"",layout:"small"},{default:a(()=>[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[17]||(o[17]=s=>t.qq_video_url=s)},null,512),[[_,t.qq_video_url]])]),_:1}),i(l,{label:"\u6587\u6848",content:"",layout:"small"},{default:a(()=>[d(e("textarea",{class:"form-control","onUpdate:modelValue":o[18]||(o[18]=s=>t.comment=s),rows:4,placeholder:"\u8BF7\u8F93\u516520-100\u5B57\u5BFC\u8D2D\u6587\u6848\u4ECB\u7ECD"},null,512),[[_,t.comment]]),c.data.wen_items&&c.data.wen_items.length>0?(f(),p("div",pe,[fe,e("ul",ve,[(f(!0),p(F,null,B(c.data.wen_items,(s,v)=>(f(),p("li",{key:v,onClick:J=>T(s)},m(v+1)+"."+m(s.content),9,ge))),128))])])):h("v-if",!0)]),_:1})]),_:1})]),_:1},8,["spinning"])])]),h(" END: Post Content "),h(" BEGIN: Post Info "),be,h(" END: Post Info ")])],64)}}}),Ce=ct(ye,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/goods/goods.vue"]]);export{Ce as default};
