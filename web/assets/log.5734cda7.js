import{h as y,Y as $,D as k,Z as C,j as P,C as B,a as x,b as D,w as e,p as t,x as U,y as j,l as m,u as f,a0 as F,s as n,a1 as Y,d as v,$ as M,n as E}from"./index.42f0a4da.js";const V={list:"/api/admin/log/list",list_cms:"/api/admin/log/list_cms",stat:"/api/admin/log/stat"},A=y({__name:"stat",setup(T){const r=$(),d=k(()=>`${r.urlPrefix}${r.apiUrl}${V.list}`),i=C({}),u=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",field:"host"},{title:"\u641C\u7D22",width:100,field:"agent"},{title:"\u65E5\u671F",width:100,field:"date"},{title:"\u6D41\u91CF",width:100,field:"views"}],a=P({rangePicker:"",startTime:"",endTime:"",host:""}),l=B(),c=()=>{a.startTime=F(a.rangePicker)[0],a.endTime=F(a.rangePicker)[0],l.value.reload(!0)};return(o,s)=>{const _=n("h-form-item"),p=n("Litepicker"),h=n("h-form"),g=Y,b=n("h-card");return x(),D(b,{bordered:!1,title:""},{default:e(()=>[t(g,{ref_key:"tableRef",ref:l,columns:u,ajaxUrl:f(d),config:f(i),queryParam:a},{search:e(()=>[t(h,{layout:"inline"},{default:e(()=>[t(_,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:e(()=>[U(m("input",{"onUpdate:modelValue":s[0]||(s[0]=w=>a.host=w),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[j,a.host]])]),_:1}),t(_,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:e(()=>[t(p,{modelValue:a.rangePicker,"onUpdate:modelValue":s[1]||(s[1]=w=>a.rangePicker=w),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),m("div",{class:"mt-2 xl:mt-0"},[m("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),R=y({__name:"logs",setup(T){const r=$(),d=k(()=>`${r.urlPrefix}${r.apiUrl}${V.list}`),i=C({}),u=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",width:150,field:"host"},{title:"ip",width:130,field:"ip"},{title:"\u4F4D\u7F6E",width:80,field:"country_name",formatter(o){return v(`<span
          >${o.getData().country_name}<span v-if="record.country_code">(${o.getData().country_code})</span></span
        >
        <p v-if="record.region_name">
          ${o.getData().region_name}<span v-if="record.region_code">(${o.getData().region_code})</span>
        </p>
        <p v-if="record.city_name">
          ${o.getData().city_name}<span v-if="record.postal">(${o.getData().postal})</span>
        </p>`)[0]}},{title:"\u7C7B\u578B",width:60,field:"agent"},{title:"\u5730\u5740",width:160,field:"url",formatter(o){return v(`<a target="_blank" href="${o.getData().url}">
          ${o.getData().url}
        </a>`)[0]}},{title:"user_agent",field:"user_agent"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(o){return M(o.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u6267\u884C\u65F6\u95F4",field:"time",width:80},{title:"\u6765\u8DEF",field:"referer",width:100}],a=P({username:"",status:0,startTime:"",endTime:"",host:""}),l=B(),c=()=>{l.value.reload(!0)};return(o,s)=>{const _=n("h-form-item"),p=n("h-form"),h=Y,g=n("h-card");return x(),D(g,{bordered:!1,title:""},{default:e(()=>[t(h,{ref_key:"tableRef",ref:l,columns:u,ajaxUrl:f(d),config:f(i),queryParam:a},{search:e(()=>[t(p,{layout:"inline"},{default:e(()=>[t(_,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:e(()=>[U(m("input",{"onUpdate:modelValue":s[0]||(s[0]=b=>a.host=b),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[j,a.host]])]),_:1}),m("div",{class:"mt-2 xl:mt-0"},[m("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),W=y({__name:"log",setup(T){return(r,d)=>{const i=n("FileTextIcon"),u=n("Tippy"),a=n("Tab"),l=n("TabList"),c=n("TabPanel"),o=n("TabPanels"),s=n("TabGroup");return x(),D(s,{class:"mt-5 overflow-hidden post intro-y box"},{default:e(()=>[t(l,{class:"flex-col post__tabs nav-tabs bg-slate-200 dark:bg-darkmode-800 sm:flex-row"},{default:e(()=>[t(a,{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40",tag:"button"},{default:e(()=>[t(u,{content:"\u7EDF\u8BA1",class:"flex items-center justify-center w-full py-4 tooltip","aria-controls":"content","aria-selected":"true"},{default:e(()=>[t(i,{class:"w-4 h-4 mr-2"}),E(" \u7EDF\u8BA1 ")]),_:1})]),_:1}),t(a,{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40",tag:"button"},{default:e(()=>[t(u,{content:"\u8BBF\u95EE\u660E\u7EC6",class:"flex items-center justify-center w-full py-4 tooltip","aria-selected":"false"},{default:e(()=>[t(i,{class:"w-4 h-4 mr-2"}),E(" \u8BBF\u95EE\u660E\u7EC6 ")]),_:1})]),_:1})]),_:1}),t(o,{class:"post__content"},{default:e(()=>[t(c,{class:"p-5"},{default:e(()=>[t(f(A))]),_:1}),t(c,{class:"p-5"},{default:e(()=>[t(f(R))]),_:1})]),_:1})]),_:1})}}});export{W as default};
