import{h as X,Z as tt,G as K,$ as st,j as S,C as V,l as g,a as p,b as P,w as l,q as u,u as E,m as t,a2 as it,_ as et,r as nt,H as vt,k as gt,t as bt,aq as I,p as A,e as F,x as m,y as v,c as y,n as _,F as G,K as J,a3 as ut,v as O,a5 as w,a6 as W,s as Q,o as ht,d as C,a0 as yt}from"./index.53559b39.js";import{b as wt}from"./market.ad017f2e.js";import{f as xt,a as Dt,b as Ft,c as Et}from"./goods.c234c9a9.js";import{g as Ct,i as kt}from"./common.3566447a.js";import{c as Bt}from"./index.cf01fc89.js";import{p as H}from"./pick.8b56a9dd.js";const At=X({__name:"report",setup($,{expose:U}){const Y=tt(),z=K(()=>`${Y.urlPrefix}${Y.apiUrl}${wt.getItems}`),N=st({}),f=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u8BA2\u5355\u53F7",field:"goods.price"},{title:"\u4E0B\u5355\u65F6\u95F4",field:"draws",width:160},{title:"\u8BA2\u5355\u72B6\u6001",field:"inventory",width:160},{title:"\u72B6\u6001",field:"",width:160,formatter(b){return b.getData().status===1?"\u4E0A\u67B6":"\u4E0B\u67B6"}},{title:"\u540C\u6B65\u65F6\u95F4",field:"start_time",width:120,hozAlign:"center"}],c=S({type:"vip",rangePicker:"",name:"",status:0,startTime:"",endTime:""}),e=S({visible:!1,confirmLoading:!1}),k=V(),n=()=>{k.value.reload(!0)};V();const R=()=>{e.visible=!1};return U({edit:b=>{e.visible=!0}}),(b,x)=>{const a=g("Litepicker"),d=g("h-form-item"),h=g("h-form"),M=it,T=g("h-drawer");return p(),P(T,{title:"\u63A8\u5E7F\u62A5\u8868",size:"modal-xl",visible:e.visible,"confirm-loading":e.confirmLoading,onCancel:R},{header:l(()=>[]),default:l(()=>[u(M,{ref_key:"tableRef",ref:k,columns:f,ajaxUrl:E(z),config:E(N),queryParam:c},{search:l(()=>[u(h,{layout:"inline"},{default:l(()=>[u(d,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[u(a,{modelValue:c.rangePicker,"onUpdate:modelValue":x[0]||(x[0]=q=>c.rangePicker=q),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:n}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),Vt=et(At,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/report.vue"]]),ot={list:"/api/user/business/miandan/list",getReport:"/api/user/business/miandan/report",view:"/api/user/business/miandan/view",update:"/api/user/business/miandan/update",updateStatus:"/api/user/business/miandan/status"};function $t($){return nt({url:ot.getReport,method:"post",data:$})}function Ut($){return nt({url:ot.update,method:"post",data:$})}const Yt={class:"input-group"},jt={class:"flex-1 input-group"},Mt={class:"flex-1 input-group"},qt=t("div",{class:"w-48 input-group-text"},"\u5EFA\u8BAE\u65F6\u95F47\u5929\u5DE6\u53F3",-1),Lt={class:"grid w-full grid-cols-12 gap-2"},Ot={class:"col-span-4"},Pt={class:"input-group"},St=t("div",{class:"input-group-text whitespace-nowrap"},"\u91D1\u989D",-1),Nt=t("div",{class:"input-group-text"},"\u5143",-1),Rt={class:"col-span-4"},Tt={class:"input-group"},zt=t("div",{class:"input-group-text whitespace-nowrap"},"\u95E8\u69DB",-1),It=t("div",{class:"input-group-text"},"\u5143",-1),Gt={class:"grid flex-1 grid-cols-12 gap-2"},Wt={class:"col-span-4"},Ht={class:"col-span-4"},Kt={class:"grid grid-cols-12 gap-2"},Zt={class:"col-span-4"},Jt={class:"input-group"},Qt=t("div",{class:"input-group-text whitespace-nowrap"},"\u63A8\u5E7F\u91CF",-1),Xt=t("div",{class:"input-group-text"},"\u5143",-1),te={class:"col-span-4"},ee={class:"input-group"},oe=t("div",{class:"input-group-text whitespace-nowrap"},"\u798F\u5229\u91D1",-1),ae=t("div",{class:"input-group-text"},"\u5143",-1),se={class:"p-2 my-2 border-none form-help bg-neutral-100"},ie={class:"text-rose-600"},ne={class:"text-rose-600"},ue={class:"text-rose-600"},le={class:"font-medium text-rose-600"},re={class:"grid flex-1 grid-cols-12 gap-2"},de={class:"col-span-4"},ce={class:"col-span-4"},me={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},_e=["src"],pe={key:1,class:"py-2"},fe=t("p",null,"\u4E3B\u56FE\u53C2\u8003",-1),ve={class:"flex flex-row flex-wrap gap-x-1 gap-y-1"},ge=["onClick"],be=["src"],he=t("option",{value:0},"--\u9009\u62E9--",-1),ye=["value"],we={key:0},xe=t("p",null,"\u5907\u9009\u6587\u6848",-1),De={class:"flex flex-col gap-y-3"},Fe=["onClick"],Ee=["className"],Ce=X({__name:"goods",emits:["ok"],setup($,{expose:U,emit:Y}){const N=tt().uploadUrl,f=V(""),c=V(""),e=S({coupon_url:"",item_url:"",id:0,qq_video_url:"",money:0,goods_sign:"",item_id:"",seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",d_title:"",pic_url:"",price:0,qq_pic_url:"",comment:"",cid1:0,create_time:"",end_time:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),k={},n=S({visible:!1,confirmLoading:!1,data:{step:0,cats:[],wen_items:[],pic_urls:[]}}),R=K(()=>!kt(e.pic_url)),j=K(()=>(e.price-e.money)*5/100);vt(()=>{b()});const b=()=>{Ct({}).then(s=>{s.data.items&&(n.data.cats=s.data.items)})},x=gt(k,bt(e)),a=s=>{n.data.step=0,c.value="",f.value="",n.visible=!0,O(()=>{Object.assign(e,{item_url:"",qq_video_url:"",coupon_url:"",money:0,id:0,item_id:"",platform_type:0,seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",price:0,qq_pic_url:"",comment:"",cid1:0,d_title:"",pic_url:"",create_time:"",end_time:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),n.data.pic_urls=[],n.data.wen_items=[],s.id&&(n.data.step=1);const o=H(s,["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","create_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount"]);Object.assign(e,o),s.create_time&&(e.create_time=w(s.create_time)),s.end_time&&(e.end_time=w(s.end_time)),s.activity_start_time&&(e.activity_start_time=w(s.activity_start_time)),s.activity_end_time&&(e.activity_end_time=w(s.activity_end_time))})},d=s=>{if(n.confirmLoading=!0,x.value.$touch(),x.value.$invalid)Bt.log("error",x.value.$errors),n.confirmLoading=!1;else{let o=E(e),r={apply_status:s};o.create_time?r=Object.assign(r,{create_time:W(o.create_time)}):r=Object.assign(r,{create_time:0}),o.end_time?r=Object.assign(r,{end_time:W(o.end_time)}):r=Object.assign(r,{end_time:0}),o.activity_start_time&&(r=Object.assign(r,{activity_start_time:W(o.activity_start_time)})),o.activity_end_time&&(r=Object.assign(r,{activity_end_time:W(o.activity_end_time)})),Ut(Object.assign({},o,r)).then(B=>{B.code===0?(s===1?Q.success("\u63D0\u4EA4\u6210\u529F"):Q.success("\u4FDD\u5B58\u6210\u529F"),Y("ok",o),n.visible=!1):Q.error(B.message),n.confirmLoading=!1})}},h=s=>{e.pic_url=s.data.item.img},M=()=>{xt({item_url:e.item_url}).then(s=>{s.data.goods&&(O(()=>{Object.assign(e,H(s.data.goods,["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","money","condition"])),s.data.goods.create_time&&(e.create_time=w(s.data.goods.create_time)),s.data.goods.end_time&&(e.end_time=w(s.data.goods.end_time))}),n.data.wen_items=s.data.goods.wen_items||[],n.data.pic_urls=s.data.goods.pic_urls||[]),n.confirmLoading=!1})},T=()=>{Dt({item_url:e.item_url}).then(s=>{s.data.goods&&(n.data.wen_items=s.data.goods.wen_items||[],n.data.pic_urls=s.data.goods.pic_urls||[])})},q=()=>{Ft({item_url:e.item_url,coupon_url:e.coupon_url}).then(s=>{s.data.coupon&&O(()=>{const o=H(s.data.coupon,["money","condition"]);Object.assign(e,o),e.create_time=w(s.data.coupon.create_time),e.end_time=w(s.data.coupon.end_time)})})},D=()=>{n.visible=!1},lt=s=>{O(()=>{Object.assign(e,{comment:s.content})})},rt=s=>{O(()=>{e.pic_url=s})},Z=()=>{Et({item_url:f.value,content:c.value}).then(s=>{s.data.item&&O(()=>{const o=H(s.data.item,["item_url","coupon_url"]);Object.assign(e,o),n.data.step=1,M(),q()})})};return I(()=>e.item_url,(s,o)=>{T()},{immediate:!0}),I(()=>e.coupon_url,(s,o)=>{q()},{immediate:!0}),I(()=>f,(s,o)=>{Z()},{immediate:!0}),I(()=>c,(s,o)=>{Z()},{immediate:!0}),U({edit:a}),(s,o)=>{const r=g("h-form-item"),B=g("Litepicker"),dt=g("UploadIcon"),ct=g("h-upload"),mt=g("h-form"),_t=g("h-spin"),at=g("LoadingIcon"),pt=g("h-modal");return p(),P(pt,{title:"\u53D1\u5E03\u514D\u5355\u5546\u54C1",size:"modal-xl",visible:n.visible,"confirm-loading":n.confirmLoading,onCancel:D},{footer:l(()=>[t("div",{className:n.data.step===0?"hidden":""},[t("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:o[18]||(o[18]=i=>d(1))},[A(" \u63D0\u4EA4\u5BA1\u6838 "),n.confirmLoading?(p(),P(at,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):F("v-if",!0)]),t("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:o[19]||(o[19]=i=>d(0))},[A("\u4FDD\u5B58\u8349\u7A3F "),n.confirmLoading?(p(),P(at,{key:0,icon:"oval",color:"white",class:"w-4 ml-2"})):F("v-if",!0)])],8,Ee)]),default:l(()=>[u(_t,{spinning:n.confirmLoading},{default:l(()=>[u(mt,{layout:"small"},{default:l(()=>[n.data.step==0?(p(),P(r,{key:0,label:"\u5546\u54C1\u94FE\u63A5",content:"",layout:"small"},{default:l(()=>[t("div",Yt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>f.value=i)},null,512),[[v,f.value]]),t("div",{class:"input-group-text btn-outline-primary"},[t("button",{class:"w-24",onClick:Z},"\u83B7\u53D6")])])]),_:1})):F("v-if",!0),n.data.step!==0?(p(),y(G,{key:1},[u(r,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:l(()=>[t("div",jt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=i=>e.item_url=i)},null,512),[[v,e.item_url]]),t("div",{class:"input-group-text btn-outline-primary"},[t("button",{class:"w-24",onClick:M},"\u83B7\u53D6")])])]),_:1}),u(r,{label:"\u5546\u54C1\u6807\u9898",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[2]||(o[2]=i=>e.title=i)},null,512),[[v,e.title]])]),_:1}),u(r,{label:"\u77ED \u6807 \u9898",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[3]||(o[3]=i=>e.d_title=i)},null,512),[[v,e.d_title]])]),_:1}),u(r,{label:"\u539F\u4EF7\u683C",content:"",layout:"inline"},{default:l(()=>[m(t("input",{type:"text",class:"flex-1 form-control","onUpdate:modelValue":o[4]||(o[4]=i=>e.price=i)},null,512),[[v,e.price]])]),_:1}),u(r,{label:"\u4F18\u60E0\u5238\u8FDE\u63A5",content:"",layout:"inline"},{default:l(()=>[t("div",Mt,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=i=>e.coupon_url=i)},null,512),[[v,e.coupon_url]]),qt]),F(` <input type="text" class="form-control" v-model="formState.coupon_url" />
            <div class="form-help">\u4F18\u60E0\u5238\u5EFA\u8BAE\u65F6\u95F47\u5929\u5DE6\u53F3</div> `)]),_:1}),u(r,{label:"\u4F18\u60E0\u5238",content:"",layout:"small"},{default:l(()=>[t("div",Lt,[t("div",Ot,[t("div",Pt,[St,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=i=>e.money=i)},null,512),[[v,e.money]]),Nt])]),t("div",Rt,[t("div",Tt,[zt,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=i=>e.condition=i)},null,512),[[v,e.condition]]),It])])])]),_:1}),u(r,{label:"\u9886\u53D6\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[t("div",Gt,[t("div",Wt,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(B,{modelValue:e.create_time,"onUpdate:modelValue":o[8]||(o[8]=i=>e.create_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})]),t("div",Ht,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(B,{modelValue:e.end_time,"onUpdate:modelValue":o[9]||(o[9]=i=>e.end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})])])]),_:1}),u(r,{label:"\u63A8\u5E7F\u9884\u7B97",content:"",layout:"small"},{default:l(()=>[t("div",Kt,[t("div",Zt,[t("div",Jt,[Qt,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=i=>e.rebate_orders=i)},null,512),[[v,e.rebate_orders]]),Xt])]),t("div",te,[t("div",ee,[oe,m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[11]||(o[11]=i=>e.rebate_amount=i)},null,512),[[v,e.rebate_amount]]),ae])])]),t("div",se,[A(_(e.rebate_orders)+"(\u9884\u8BA1\u63A8\u5E7F\u91CF) * "+_(e.rebate_amount)+"(\u798F\u5229\u91D1\u989D) = \u9884\u8BA1\u603B\u798F\u5229\u91D1\u989D : ",1),t("span",ie,_(e.rebate_amount*e.rebate_orders),1),A(" + "),t("span",ne,_(e.rebate_orders),1),A(" (\u9884\u8BA1\u63A8\u5E7F\u91CF) * "),t("span",ue,_(E(j).toFixed(2)),1),A(" (\u670D\u52A1\u8D39) = \u9884\u8BA1\u603B\u8D39\u7528: "),t("span",le,_((e.rebate_amount*e.rebate_orders+E(j)*e.rebate_orders).toFixed(2)),1)])]),_:1}),u(r,{label:"\u6D3B\u52A8\u65F6\u95F4",content:"",layout:"inline"},{default:l(()=>[t("div",re,[t("div",de,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(B,{modelValue:e.activity_start_time,"onUpdate:modelValue":o[12]||(o[12]=i=>e.activity_start_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})]),t("div",ce,[u(r,{label:"",content:"",layout:"inline"},{default:l(()=>[u(B,{modelValue:e.activity_end_time,"onUpdate:modelValue":o[13]||(o[13]=i=>e.activity_end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 form-control"},null,8,["modelValue"])]),_:1})])])]),_:1}),u(r,{label:"\u56FE\u7247",content:"",layout:"small"},{default:l(()=>[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[14]||(o[14]=i=>e.pic_url=i)},null,512),[[v,e.pic_url]]),u(ct,{name:"file",multiple:!0,action:E(N),onChange:h},{default:l(()=>[t("button",me,[u(dt,{class:"w-4 h-4 mr-2"}),A("\u4E0A\u4F20 ")])]),_:1},8,["action"]),E(R)?(p(),y("img",{key:0,class:"w-48 h-48",src:e.pic_url},null,8,_e)):F("v-if",!0),n.data.pic_urls&&n.data.pic_urls.length>0?(p(),y("div",pe,[fe,t("ul",ve,[(p(!0),y(G,null,J(n.data.pic_urls,(i,L)=>(p(),y("li",{key:L,onClick:ft=>rt(i),class:"w-20 h-20 p-1 border hover:border-green-600"},[t("img",{src:i},null,8,be)],8,ge))),128))])])):F("v-if",!0)]),_:1}),u(r,{label:"\u5206\u7C7B",content:"",layout:"small"},{default:l(()=>[m(t("select",{class:"form-select","onUpdate:modelValue":o[15]||(o[15]=i=>e.cid1=i)},[he,(p(!0),y(G,null,J(n.data.cats,(i,L)=>(p(),y("option",{key:L,value:i.c_id},_(i.short_name),9,ye))),128))],512),[[ut,e.cid1]])]),_:1}),u(r,{label:"\u5FAE\u4FE1\u7FA4\u4E13\u7528\u56FE",content:"",layout:"small"},{default:l(()=>[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[16]||(o[16]=i=>e.qq_pic_url=i)},null,512),[[v,e.qq_pic_url]])]),_:1}),u(r,{label:"\u5BFC\u8D2D\u6587\u6848",content:"",layout:"small"},{default:l(()=>[m(t("textarea",{class:"form-control","onUpdate:modelValue":o[17]||(o[17]=i=>e.comment=i),rows:4,placeholder:"\u8BF7\u8F93\u516520-100\u5B57\u5BFC\u8D2D\u6587\u6848\u4ECB\u7ECD"},null,512),[[v,e.comment]]),n.data.wen_items&&n.data.wen_items.length>0?(p(),y("div",we,[xe,t("ul",De,[(p(!0),y(G,null,J(n.data.wen_items,(i,L)=>(p(),y("li",{key:L,onClick:ft=>lt(i)},_(L+1)+"."+_(i.content),9,Fe))),128))])])):F("v-if",!0)]),_:1}),F(` <h-form-item label="\u89C6\u9891\u6587\u4EF6" content="" layout="small">
            <input type="text" class="form-control" v-model="formState.qq_video_url" />
          </h-form-item> `)],64)):F("v-if",!0)]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ke=et(Ce,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/goods.vue"]]),Be={class:"flex p-2 py-5 box"},Ae={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Ve=t("span",null,"\u8D26\u53F7\u4F59\u989D",-1),$e={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Ue=t("span",null,"\u9501\u5B9A\u91D1\u989D",-1),Ye={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},je=t("span",null,"\u6D3B\u52A8\u5546\u54C1",-1),Me=t("option",{value:""},"\u5168\u90E8",-1),qe={value:"2"},Le={value:"1"},Oe={value:"0"},Pe={value:"-1"},Se={value:"-2"},Ne=X({__name:"miandan",setup($){const U=tt(),Y=K(()=>`${U.urlPrefix}${U.apiUrl}${ot.list}`),z=st({}),N=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(a){const d=C(`
          <div class="flex items-center">
            <div class="w-9 h-9 image-fit zoom-in">
              <img class="border-white rounded-lg shadow-md w-9 h-9" src="${a.getData().pic_url}" />
            </div>
            <div class="ml-4 ">
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${a.getData().d_title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${a.getData().title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${a.getData().email||""}
              </div>
            </div>
          </div>
          `);return C(d).on("click",function(h){n(a.getData())}),d[0]},download:!0},{title:"\u4EF7\u683C",width:120,field:"price",sorter:!0,formatter(a){return C(`
          <div class="flex flex-col items-start">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5238\u540E\u4EF7:${a.getData().coupon_price}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u91D1:${a.getData().rebate_amount}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5230\u624B\u4EF7:${(a.getData().coupon_price-a.getData().rebate_amount).toFixed(2)}
            </div>
          </div>
          `)[0]}},{title:"\u6D3B\u52A8\u65F6\u95F4",field:"",width:120,formatter(a){return C(`
          <div class="flex flex-col items-center">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
            ${w(a.getData().activity_start_time)}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${w(a.getData().activity_end_time)}
            </div>
          </div>
          `)[0]}},{title:"\u798F\u5229\u91D1",width:90,field:"rebate_amount"},{title:"\u9884\u552E\u91CF",width:90,field:"rebate_orders"},{title:"\u8DD1\u91CF",width:80,field:"promotion_orders"},{title:"\u72B6\u6001",width:90,field:"",sorter:!0,formatter(a){return a.getData().status===0?"\u672A\u63D0\u4EA4":a.getData().status===1?"\u63D0\u4EA4\u5BA1\u6838":a.getData().status===2?"\u63A8\u5E7F\u4E2D":a.getData().status===3?"\u63A8\u5E7F\u5B8C\u6210":a.getData().status===-1?"\u5DF2\u62D2\u7EDD":a.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"updated_at",formatter(a){return yt(a.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(a){if(a.getData().status===0){const d=C('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return C(d).on("click",function(h){R(a.getData())}),d[0]}if(a.getData().status!=0){const d=C('<a class="flex items-center" href="javascript:;">\u62A5\u8868</a>');return C(d).on("click",function(h){n(a.getData())}),d[0]}return""}}],f=S({item_id:"",status:"",url:""}),c=S({report:{status0:0,status1:0,status2:0,status01:0,status02:0},user_data:{points:0,points_total:0,pub_goods:0}});ht(()=>{x()});const e=V(),k=V(),n=a=>{k.value.edit(a)},R=a=>{a.item_url&&(a.href=a.item_url),e.value.edit(a)},j=V(),b=a=>{j.value.reload(a),x()},x=()=>{$t({}).then(a=>{a.data.item&&(c.report.status0=a.data.item[0]?a.data.item[0]:0,c.report.status1=a.data.item[1]?a.data.item[1]:0,c.report.status2=a.data.item[2]?a.data.item[2]:0,c.report.status01=a.data.item[-1]?a.data.item[-1]:0,c.report.status02=a.data.item[-2]?a.data.item[-2]:0)})};return(a,d)=>{const h=g("h-form-item"),M=g("h-form"),T=it,q=g("h-card");return p(),P(q,{bordered:!1,title:"\u514D\u5355\u5546\u54C1"},{header:l(()=>[t("button",{class:"mr-2 shadow-md btn btn-primary",onClick:d[0]||(d[0]=D=>e.value.edit({}))},"\u53D1\u5E03\u514D\u5355\u5546\u54C1 ")]),extra:l(()=>[t("div",Be,[t("div",Ae,[Ve,t("span",null,_(c.user_data.points),1)]),t("div",$e,[Ue,t("span",null,_(c.user_data.points_total),1)]),t("div",Ye,[je,t("span",null,_(c.user_data.pub_goods),1)])])]),default:l(()=>[u(T,{ref_key:"tableRef",ref:j,columns:N,ajaxUrl:E(Y),config:E(z),queryParam:f},{search:l(()=>[u(M,{layout:"inline"},{default:l(()=>[u(h,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:l(()=>[m(t("select",{"onUpdate:modelValue":d[1]||(d[1]=D=>f.status=D),class:"w-full mt-2 form-select sm:mt-0 sm:w-auto",onChange:b},[Me,t("option",qe,"\u901A\u8FC7 ("+_(c.report.status2)+")",1),t("option",Le,"\u5BA1\u6838\u4E2D ("+_(c.report.status1)+")",1),t("option",Oe,"\u8349\u7A3F ("+_(c.report.status0)+")",1),t("option",Pe,"\u62D2\u7EDD ("+_(c.report.status01)+")",1),t("option",Se,"\u4E0B\u67B6 ("+_(c.report.status02)+")",1)],544),[[ut,f.status]])]),_:1}),u(h,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:l(()=>[m(t("input",{"onUpdate:modelValue":d[2]||(d[2]=D=>f.item_id=D),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[v,f.item_id]])]),_:1}),u(h,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:l(()=>[m(t("input",{"onUpdate:modelValue":d[3]||(d[3]=D=>f.url=D),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[v,f.url]])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:b}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),u(ke,{ref_key:"modal",ref:e,onOk:d[4]||(d[4]=D=>b(!1))},null,512),u(Vt,{ref_key:"reportModal",ref:k,onOk:b},null,512)]),_:1})}}}),He=et(Ne,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan.vue"]]);export{He as default};
