import{r as J,d as S,l as A,G as P,o as K,aE as Q,s as H,ae as X,m as R,t as N,n as c,b as Y,e as j,w as a,h as e,u as t,B,j as i,ad as q,ac as x,g as D,Y as r,F as p,ah as Z,aG as ee,q as M,k as I,a7 as W,a8 as te,C as L,a9 as ue,a as O,ab as ae,f as ne,p as oe,L as se}from"./index.e8171561.js";import{T as m}from"./index.def82ebc.js";import{g as le}from"./user.1308f676.js";import{p as G}from"./pick.68155b67.js";const z={getItems:"/api/user/member/agent/list",getView:"/api/user/member/agent/view",updateItem:"/api/user/member/agent/update",listApply:"/api/user/member/agent/listApply",updateApplyStatus:"/api/user/member/agent/update_apply_status"};function ie(T){return J({url:z.updateApplyStatus,method:"post",data:T})}function re(T){return J({url:z.updateItem,method:"post",data:T})}const de=D("option",{value:0},"\u5BFC\u8D2D",-1),me=D("option",{value:1},"\u4F1A\u5458\u8FD4\u5229",-1),_e=D("option",{value:3},"\u591A\u7EA7\u5206\u9500",-1),pe={class:"grid-cols-3 gap-2 sm:grid"},fe={class:"overflow-x-auto"},ce=S({__name:"data",setup(T,{expose:E}){const u=A({user_rate:0,invite_mode:0,invite1_rate:0,invite2_rate:0,invite3_rate:0,rank3_name:"",rank3_members:0,rank3_invite1:0,rank3_invite2:0,rank3_invite3:0,rank2_name:"",rank2_members:0,rank2_invite1:0,rank2_invite2:0,rank2_invite3:0,rank1_name:"",rank1_members:0,rank1_invite1:0,rank1_invite2:0,rank1_invite3:0,order_start_time:""}),C={},g=A({visible:!1,confirmLoading:!1,uploading:!0,payment_money:0,user_data_money:0}),s=P(()=>u.invite_mode===3),k=P(()=>u.invite_mode===1);K(()=>{f()});const f=()=>{V()},V=()=>{Q({}).then(n=>{n.data.app_data&&H(()=>{const l=G(n.data.app_data,["invite_mode","invite1_rate","invite2_rate","invite3_rate","invite4_rate","invite5_rate","user_rate","order_start_time","rank1_name","rank2_name","rank3_name","rank1_invite1","rank1_invite2","rank1_invite3","rank1_invite1_h1","rank1_invite2_h1","rank1_invite3_h1","rank1_invite1_h2","rank1_invite2_h2","rank1_invite3_h2","rank2_invite1","rank2_invite2","rank2_invite3","rank2_invite1_h1","rank2_invite2_h1","rank2_invite3_h1","rank2_invite1_h2","rank2_invite2_h2","rank2_invite3_h2","rank3_invite1","rank3_invite2","rank3_invite3","rank3_invite1_h1","rank3_invite2_h1","rank3_invite3_h1","rank3_invite1_h2","rank3_invite2_h2","rank3_invite3_h2","rank1_members","rank2_members","rank3_members"]);Object.assign(u,l),n.data.app_data.order_start_time&&(u.order_start_time=X(n.data.app_data.order_start_time))})}),le({}).then(n=>{n.data.user_data&&(g.user_data_money=n.data.user_data.money)})},w=R(C,N(u)),h=n=>{if(n.preventDefault(),w.value.$touch(),w.value.$invalid)w.value.$errors;else{let l=t(u),d={};l.order_start_time?d=Object.assign(d,{order_start_time:Z(l.order_start_time)}):d=Object.assign(d,{order_start_time:0}),ee(Object.assign({},l,d,{page_view:"agent"})).then(y=>{const{code:F}=y||{};F===0?M.success("\u4FDD\u5B58\u6210\u529F"):M.error(y.message)})}},v=()=>{g.visible=!1};return E({edit:()=>{g.visible=!0}}),(n,l)=>{const d=c("h-form-item"),y=c("Litepicker"),F=c("FormHelp"),U=c("h-form"),$=c("h-drawer");return Y(),j($,{title:"\u8BBE\u7F6E",size:"xl",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:v},{footer:a(()=>[e(t(B),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:h},{default:a(()=>[i("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e(U,{layout:"small"},{default:a(()=>[e(d,{label:"\u8D2D\u7269\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(t(q),{modelValue:u.invite_mode,"onUpdate:modelValue":l[0]||(l[0]=o=>u.invite_mode=o)},{default:a(()=>[de,me,_e]),_:1},8,["modelValue"])]),_:1}),e(d,{class:x({hidden:!t(s)&&!t(k)}),label:"\u8BA2\u5355\u8BA1\u7B97\u5F00\u59CB\u65F6\u95F4",layout:"small"},{default:a(()=>[e(y,{modelValue:u.order_start_time,"onUpdate:modelValue":l[1]||(l[1]=o=>u.order_start_time=o),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56"},null,8,["modelValue"])]),_:1},8,["class"]),e(d,{class:x({hidden:!t(s)}),label:"\u9ED8\u8BA4\u8BBE\u7F6E",layout:"small"},{default:a(()=>[D("div",pe,[e(t(r),null,{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u81EA\u8D2D")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite1_rate,"onUpdate:modelValue":l[2]||(l[2]=o=>u.invite1_rate=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1}),e(t(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u4E0B\u7EA7")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite2_rate,"onUpdate:modelValue":l[3]||(l[3]=o=>u.invite2_rate=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1}),e(t(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(t(r).Text,{class:"whitespace-nowrap"},{default:a(()=>[i("\u4E0B\u4E0B\u7EA7")]),_:1}),e(t(p),{type:"text",placeholder:"",modelValue:u.invite3_rate,"onUpdate:modelValue":l[4]||(l[4]=o=>u.invite3_rate=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})])]),_:1},8,["class"]),e(d,{class:x({hidden:!t(k)}),label:"\u8FD4\u5229\u6BD4\u4F8B",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",modelValue:u.user_rate,"onUpdate:modelValue":l[5]||(l[5]=o=>u.user_rate=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1},8,["class"]),e(d,{class:x({hidden:!t(s)}),label:"",layout:"small"},{default:a(()=>[e(F,null,{default:a(()=>[i("\u63D0\u793A:\u672A\u8FDB\u884C\u8BE6\u7EC6\u767B\u8BB0\u6BD4\u4F8B\u8BBE\u7F6E\uFF0C\u5C06\u624D\u6709\u4E0A\u9762\u9ED8\u8BA4\u8BBE\u7F6E\u6BD4\u4F8B ")]),_:1})]),_:1},8,["class"]),D("div",fe,[e(t(m),{class:x(t(s)?"":"hidden")},{default:a(()=>[e(t(m).Thead,null,{default:a(()=>[e(t(m).Tr,null,{default:a(()=>[e(t(m).Th,{class:"bg-slate-50 !pr-2 dark:bg-darkmode-800"}),e(t(m).Th,{class:"bg-slate-50 dark:bg-darkmode-800"},{default:a(()=>[i("\u7B49\u7EA7\u540D\u79F0")]),_:1}),e(t(m).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u5347\u7EA7\u9700\u8981\u9080\u8BF7\u4EBA\u6570 ")]),_:1}),e(t(m).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u81EA\u8D2D\u8FD4\u5229\u6BD4\u4F8B ")]),_:1}),e(t(m).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i(" \u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1 ")]),_:1}),e(t(m).Th,{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},{default:a(()=>[i("\u4E0B\u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1")]),_:1})]),_:1})]),_:1}),e(t(m).Tbody,null,{default:a(()=>[e(t(m).Tr,{class:x(t(s)?"":"hidden")},{default:a(()=>[e(t(m).Td,{class:"!pr-2"},{default:a(()=>[i("1.")]),_:1}),e(t(m).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_name,"onUpdate:modelValue":l[6]||(l[6]=o=>u.rank1_name=o)},null,8,["modelValue"])]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_members,"onUpdate:modelValue":l[7]||(l[7]=o=>u.rank1_members=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite1,"onUpdate:modelValue":l[8]||(l[8]=o=>u.rank1_invite1=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite2,"onUpdate:modelValue":l[9]||(l[9]=o=>u.rank1_invite2=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite3,"onUpdate:modelValue":l[10]||(l[10]=o=>u.rank1_invite3=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(t(m).Tr,{class:x(t(s)?"":"hidden")},{default:a(()=>[e(t(m).Td,{class:"!pr-2"},{default:a(()=>[i("2.")]),_:1}),e(t(m).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",modelValue:u.rank2_name,"onUpdate:modelValue":l[11]||(l[11]=o=>u.rank2_name=o)},null,8,["modelValue"])]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_members,"onUpdate:modelValue":l[12]||(l[12]=o=>u.rank2_members=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite1,"onUpdate:modelValue":l[13]||(l[13]=o=>u.rank2_invite1=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite2,"onUpdate:modelValue":l[14]||(l[14]=o=>u.rank2_invite2=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite3,"onUpdate:modelValue":l[15]||(l[15]=o=>u.rank2_invite3=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),e(t(m).Tr,{class:x(t(s)?"":"hidden")},{default:a(()=>[e(t(m).Td,{class:"!pr-2"},{default:a(()=>[i("3.")]),_:1}),e(t(m).Td,{class:"whitespace-nowrap"},{default:a(()=>[e(t(p),{type:"text",modelValue:u.rank3_name,"onUpdate:modelValue":l[16]||(l[16]=o=>u.rank3_name=o)},null,8,["modelValue"])]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_members,"onUpdate:modelValue":l[17]||(l[17]=o=>u.rank3_members=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("\u4EBA")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite1,"onUpdate:modelValue":l[18]||(l[18]=o=>u.rank3_invite1=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!px-2"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite2,"onUpdate:modelValue":l[19]||(l[19]=o=>u.rank3_invite2=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1}),e(t(m).Td,{class:"!pl-2 text-slate-500"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite3,"onUpdate:modelValue":l[20]||(l[20]=o=>u.rank3_invite3=o)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[i("%")]),_:1})]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])]),e(d,{class:x({hidden:!t(s)}),label:"",layout:"small"},{default:a(()=>[e(F,null,{default:a(()=>[i("1:\u4F1A\u5458\u63A8\u5E7F\u4EBA\u6570\u8FBE\u5230\u8BBE\u7F6E\u7B49\u7EA7\u8981\u6C42\u540E\uFF0C\u91C7\u7528\u76F8\u5E94\u7B49\u7EA7\u8BBE\u7F6E\u6BD4\u4F8B\u8FDB\u884C\u5956\u52B1 ")]),_:1}),e(F,null,{default:a(()=>[i("2:\u4F1A\u5458\u7B49\u7EA7\u540D\u79F0\u53EF\u4EE5\u81EA\u5B9A\u4E49 ")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ve=I(ce,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/data.vue"]]),ge=D("option",{value:0},"\u65E0\u8FD0\u8425\u6743\u9650",-1),be=D("option",{value:-1},"\u6E20\u9053\u6388\u6743\u6A21\u5F0F",-1),ke=D("option",{value:-2},"\u4F1A\u5458\u6388\u6743\u6A21\u5F0F",-1),Fe=D("option",{value:-3},"\u6DF7\u5408\u6388\u6743\u6A21\u5F0F",-1),we=S({__name:"shop",setup(T,{expose:E}){const u=A({distribute_pid:0,order_start_time:"",pid:""}),C={},g=A({visible:!1,confirmLoading:!1,uploading:!0,payment_mode:!1,payment_money:0,user_data_money:0});K(()=>{k()});const s=R(C,N(u)),k=()=>{f()},f=()=>{Q({}).then(v=>{v.data.app_data&&H(()=>{const b=G(v.data.app_data,["distribute_pid","pid","order_start_time"]);Object.assign(u,b),v.data.app_data.order_start_time&&(u.order_start_time=X(v.data.app_data.order_start_time))})}),le({}).then(v=>{v.data.user_data&&(g.user_data_money=v.data.user_data.money)})},V=v=>{if(v.preventDefault(),s.value.$touch(),s.value.$invalid)s.value.$errors;else{let b=t(u),n={};b.order_start_time?n=Object.assign(n,{order_start_time:Z(b.order_start_time)}):n=Object.assign(n,{order_start_time:0}),ee(Object.assign({},b,n,{page_view:"data"})).then(l=>{const{code:d}=l.data;d===0?M.success("\u4FDD\u5B58\u6210\u529F"):M.error(l.message)})}},w=()=>{g.visible=!1};return E({edit:()=>{g.visible=!0}}),(v,b)=>{const n=c("FormHelp"),l=c("h-form-item"),d=c("h-form"),y=c("h-drawer");return Y(),j(y,{title:"\u7535\u5546\u5E73\u53F0\u914D\u7F6E",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:w},{footer:a(()=>[e(t(B),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:V},{default:a(()=>[i("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e(d,{layout:"small",label:"\u6DD8\u5B9D",border:!1},{default:a(()=>[e(l,{label:"\u6388\u6743\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(t(q),{modelValue:u.distribute_pid,"onUpdate:modelValue":b[0]||(b[0]=F=>u.distribute_pid=F)},{default:a(()=>[ge,be,ke,Fe]),_:1},8,["modelValue"]),e(n,null,{default:a(()=>[i(" \u8FD4\u5229\u3001\u5206\u9500\u6A21\u5F0F\u9700\u8981\u8054\u76DF\u5F00\u901A\u8FD0\u8425\u6743\u9650\u540E\u624D\u80FD\u6709\u6548\u8FD0\u884C ")]),_:1})]),_:1}),e(l,{label:"\u9ED8\u8BA4\u6E20\u9053\u4E13\u4EABpid",content:"",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(p),{type:"text",modelValue:u.pid,"onUpdate:modelValue":b[1]||(b[1]=F=>u.pid=F)},null,8,["modelValue"]),e(t(r).Text)]),_:1}),e(n,null,{default:a(()=>[i(" \u6E20\u9053\u6388\u6743\u6A21\u5F0F\u4E0B\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7684pid ")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),ye=I(we,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/shop.vue"]]),De={class:"mt-2 xl:mt-0"},Ve=S({__name:"apply",setup(T,{expose:E}){const u=W(),C=P(()=>`${u.urlPrefix}${u.apiUrl}${z.listApply}`),g=te({}),s=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u72B6\u6001",field:"status",formatter(n){return n.getData().status===1?"\u901A\u8FC7":"\u5F85\u5BA1\u6838"}},{title:"qq",field:"qq"},{title:"\u5FAE\u4FE1",field:"weixin"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(n){return ue(n.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(n){if(n.getData().status===0){const l=O('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return O(l).on("click",function(d){h(n.getData())}),l[0]}return""}}],k=A({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),f=A({visible:!1,confirmLoading:!1}),V=L(),w=()=>{V.value.reload(!0)},h=n=>{ie({member_id:n.member_id,status:1}).then(l=>{M.success(l.message),V.value.reload()})},v=()=>{f.visible=!1};return E({edit:()=>{f.visible=!0}}),(n,l)=>{const d=c("FormInput"),y=c("h-form-item"),F=c("Litepicker"),U=c("h-form"),$=ae,o=c("h-drawer");return Y(),j(o,{title:"\u5BA1\u6838\u56E2\u957F\u7533\u8BF7",size:"xl",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:v},{default:a(()=>[e($,{ref_key:"tableRef",ref:V,columns:s,ajaxUrl:t(C),config:t(g),queryParam:k},{search:a(()=>[e(U,{layout:"inline"},{default:a(()=>[e(y,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(d,{type:"text",modelValue:k.name,"onUpdate:modelValue":l[0]||(l[0]=_=>k.name=_),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(F,{modelValue:k.rangePicker,"onUpdate:modelValue":l[1]||(l[1]=_=>k.rangePicker=_),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),D("div",De,[e(t(B),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:w},{default:a(()=>[i(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),xe=I(Ve,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/apply.vue"]]),Ee=D("option",{value:1},"\u72EC\u7ACB\u57DF\u540D",-1),he=D("option",{value:2},"\u514D\u8D39\u4E8C\u7EA7",-1),Be=D("option",{value:"gouwu.rocks"},"gouwu.rocks",-1),Ae=S({__name:"agent",emits:["ok"],setup(T,{expose:E,emit:u}){const g=W().uploadUrl,s=A({id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0}),k={},f=A({visible:!1,confirmLoading:!1,data:{userCmsAgent:{user_name:""}}}),V=()=>{f.visible=!1},w=R(k,N(s)),h=n=>{f.visible=!0,H(()=>{Object.assign(s,{id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0});const l=G(n,["id","url","prefix","domain_url","pid","relation_id","site_name","logo_url","type"]);n.domain&&(l.site_name=n.domain.site_name,l.logo_url=n.domain.logo_url,l.url=n.domain.url,l.type=n.domain.type),n.member&&(f.data.userCmsAgent.user_name=n.member.nick_name),Object.assign(s,l)})},v=()=>{if(f.confirmLoading=!0,w.value.$touch(),w.value.$invalid)w.value.$errors,f.confirmLoading=!1;else{const n=t(s);re(Object.assign(n,{user_name:f.data.userCmsAgent.user_name,domain_type:s.type})).then(l=>{const{code:d}=l||{};d===0?(M.success("\u4FDD\u5B58\u6210\u529F"),u("ok",n),f.visible=!1):M.error(l.message),f.confirmLoading=!1})}},b=n=>{s.logo_url=n.data.item.img};return E({edit:h}),(n,l)=>{const d=c("h-form-item"),y=c("h-upload"),F=c("h-form"),U=c("h-spin"),$=c("LoadingIcon"),o=c("h-modal");return Y(),j(o,{title:"\u7F16\u8F91",size:"lg",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:V},{footer:a(()=>[e(t(B),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:l[8]||(l[8]=_=>v())},{default:a(()=>[i(" \u4FDD\u5B58 "),f.confirmLoading?(Y(),j($,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):ne("v-if",!0)]),_:1})]),default:a(()=>[e(U,{spinning:f.confirmLoading},{default:a(()=>[e(F,{layout:"small"},{default:a(()=>[e(d,{label:"\u7528\u6237\u540D",content:"",layout:"small"},{default:a(()=>[i(oe(f.data.userCmsAgent.user_name),1)]),_:1}),e(d,{label:"\u5E7F\u544A\u4F4Dpid",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.pid,"onUpdate:modelValue":l[0]||(l[0]=_=>s.pid=_)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u6E20\u9053id",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.relation_id,"onUpdate:modelValue":l[1]||(l[1]=_=>s.relation_id=_)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u7ED1\u5B9A\u57DF\u540D",content:"",layout:"small"},{default:a(()=>[e(t(q),{modelValue:s.type,"onUpdate:modelValue":l[2]||(l[2]=_=>s.type=_)},{default:a(()=>[Ee,he]),_:1},8,["modelValue"])]),_:1}),e(d,{class:x({hidden:s.type==2}),label:"\u72EC\u7ACB\u57DF\u540D",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(r).Text,null,{default:a(()=>[i("Http://")]),_:1}),e(t(p),{type:"text",modelValue:s.url,"onUpdate:modelValue":l[3]||(l[3]=_=>s.url=_)},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{class:x({hidden:s.type==1}),label:"\u514D\u8D39\u57DF\u540D",layout:"small"},{default:a(()=>[e(t(r),null,{default:a(()=>[e(t(r).Text,null,{default:a(()=>[i("Http://")]),_:1}),e(t(p),{type:"text",modelValue:s.prefix,"onUpdate:modelValue":l[4]||(l[4]=_=>s.prefix=_)},null,8,["modelValue"]),e(t(r).Text,null,{default:a(()=>[e(t(q),{modelValue:s.domain_url,"onUpdate:modelValue":l[5]||(l[5]=_=>s.domain_url=_)},{default:a(()=>[Be]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(d,{label:"\u7F51\u5740\u540D\u5B57",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.site_name,"onUpdate:modelValue":l[6]||(l[6]=_=>s.site_name=_)},null,8,["modelValue"])]),_:1}),e(d,{label:"logo",content:"",layout:"small"},{default:a(()=>[e(t(p),{type:"text",modelValue:s.logo_url,"onUpdate:modelValue":l[7]||(l[7]=_=>s.logo_url=_),placeholder:"\u8BBE\u7F6E\u7F51\u7AD9\u7684logo\uFF0C\u4E0D\u8BBE\u7F6E\u4E0D\u663E\u793A\uFF01"},null,8,["modelValue"]),e(y,{name:"file",multiple:!0,action:t(g),onChange:b},{default:a(()=>[e(t(B),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:a(()=>[e(t(se),{icon:"Upload",class:"w-4 h-4 mr-2"}),i("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Te=I(Ae,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/agent.vue"]]),Ce={class:"mt-2 xl:mt-0"},Ue=S({__name:"agent",setup(T){const E=W(),u=P(()=>`${E.urlPrefix}${E.apiUrl}${z.getItems}`),C=te({}),g=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u7ED1\u5B9A\u57DF\u540D",field:"domain.url",formatter(n){return n.getData().domain?O(`<a target="_blank" href="'http://${n.getData().domain.url}">${n.getData().domain.url}</a>`)[0]:""}},{title:"\u64CD\u4F5C",field:"",formatter(n){const l=O('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return O(l).on("click",function(d){b(n.getData())}),l[0]}}],s=A({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),k=L(),f=L(),V=L(),w=L(),h=L(),v=()=>{k.value.reload(!0)},b=n=>{h.value.edit(n)};return(n,l)=>{const d=c("FormInput"),y=c("h-form-item"),F=c("Litepicker"),U=c("h-form"),$=ae,o=c("h-card");return Y(),j(o,{bordered:!1,title:"\u56E2\u957F\u7BA1\u7406"},{header:a(()=>[e(t(B),{variant:"primary",class:"mr-2 shadow-md",onClick:l[0]||(l[0]=_=>f.value.edit({}))},{default:a(()=>[i("\u8FD4\u5229\u8BBE\u7F6E ")]),_:1}),e(t(B),{variant:"primary",class:"mr-2 shadow-md",onClick:l[1]||(l[1]=_=>V.value.edit({}))},{default:a(()=>[i("\u7535\u5546\u5E73\u53F0\u914D\u7F6E ")]),_:1}),e(t(B),{variant:"primary",class:"mr-2 shadow-md",onClick:l[2]||(l[2]=_=>w.value.edit({}))},{default:a(()=>[i("\u4EE3\u7406\u5BA1\u6838 ")]),_:1})]),default:a(()=>[e($,{ref_key:"tableRef",ref:k,columns:g,ajaxUrl:t(u),config:t(C),queryParam:s},{search:a(()=>[e(U,{layout:"inline"},{default:a(()=>[e(y,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(d,{type:"text",modelValue:s.name,"onUpdate:modelValue":l[3]||(l[3]=_=>s.name=_),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(F,{modelValue:s.rangePicker,"onUpdate:modelValue":l[4]||(l[4]=_=>s.rangePicker=_),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),D("div",Ce,[e(t(B),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:v},{default:a(()=>[i(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),e(ve,{ref_key:"dataModal",ref:f,onOk:v},null,512),e(ye,{ref_key:"shopModal",ref:V,onOk:v},null,512),e(xe,{ref_key:"applyModal",ref:w,onOk:v},null,512),e(Te,{ref_key:"agentModal",ref:h,onOk:v},null,512)]),_:1})}}}),je=I(Ue,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent.vue"]]);export{je as default};
