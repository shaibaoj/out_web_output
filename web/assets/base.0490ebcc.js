import{d as U,a2 as C,l as f,o as D,m as y,t as S,s as E,n as r,e as j,w as a,b as p,h as e,g as _,p as N,u as m,c as A,f as O,B as b,L as $,j as v,q as g,k as I}from"./index.a1fd5d56.js";import{a as L,u as Q}from"./user.eabc3b5b.js";import{p as R}from"./pick.0100f130.js";const T={class:"relative"},G={class:"image-fit mr-1 h-24 w-24 flex-none"},M=["src"],z=U({__name:"base",setup(H){const h=C().uploadUrl,t=f({email:"",avatar_url:"",mobile:"",qq:""}),V={},s=f({uploading:!0,nick_name:"",avatar_url:""});D(()=>{w()});const i=y(V,S(t)),w=()=>{k()},k=()=>{L({}).then(l=>{l.data.user&&E(()=>{Object.assign(t,R(l.data.user,["avatar_url","email","mobile","qq"])),s.nick_name=l.data.user.nick_name,s.avatar_url=l.data.user.avatar_url})})},F=l=>{if(l.preventDefault(),i.value.$touch(),i.value.$invalid)i.value.$errors;else{const n=m(t);Q(Object.assign(n,{})).then(o=>{const{code:c}=o||{};c===0?g.success("\u4FDD\u5B58\u6210\u529F"):g.error(o.message)})}},B=l=>{Object.assign(t,{avatar_url:l.data.item.img}),s.avatar_url=l.data.item.img};return(l,n)=>{const o=r("h-form-item"),c=r("h-upload"),d=r("FormInput"),q=r("h-form"),x=r("h-card");return p(),j(x,{bordered:!1,label:"\u57FA\u7840\u8BBE\u7F6E"},{menu:a(()=>[]),default:a(()=>[e(q,{label:"",border:!0},{default:a(()=>[e(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[_("span",null,N(s.nick_name),1)]),_:1}),e(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[e(c,{name:"file",multiple:!0,action:m(h),onChange:B},{default:a(()=>[_("div",T,[_("div",G,[s.avatar_url?(p(),A("img",{key:0,src:s.avatar_url,alt:"",class:"rounded-full"},null,8,M)):O("v-if",!0)]),e(m(b),{variant:"outline-success",class:"btn-sm mt-1 mb-2 mr-2 w-32"},{default:a(()=>[e(m($),{icon:"Upload",class:"mr-2 h-4 w-4"}),v("\u56FE\u6807\u4E0A\u4F20 ")]),_:1})])]),_:1},8,["action"])]),_:1}),e(o,{label:"email",content:""},{default:a(()=>[e(d,{type:"text",modelValue:t.email,"onUpdate:modelValue":n[0]||(n[0]=u=>t.email=u)},null,8,["modelValue"])]),_:1}),e(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[e(d,{type:"text",modelValue:t.mobile,"onUpdate:modelValue":n[1]||(n[1]=u=>t.mobile=u)},null,8,["modelValue"])]),_:1}),e(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[e(d,{type:"text",modelValue:t.qq,"onUpdate:modelValue":n[2]||(n[2]=u=>t.qq=u)},null,8,["modelValue"])]),_:1}),e(o,null,{default:a(()=>[e(m(b),{variant:"primary",class:"mb-2 mr-1 w-24",onClick:F},{default:a(()=>[v("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})}}}),X=I(z,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/info/base.vue"]]);export{X as default};
