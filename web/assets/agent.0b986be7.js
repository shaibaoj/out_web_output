import{r as G,d as O,l as A,G as P,o as J,ay as K,s as z,aa as Q,m as H,t as R,n as _,b as L,e as j,w as a,h as e,u as l,B as E,j as d,a7 as x,g as i,S as r,F as p,ab as X,aB as Z,q as M,k as I,a2 as N,a3 as ee,C as S,a4 as le,a as Y,a6 as te,f as ue,p as ne,L as oe}from"./index.042a2974.js";import{g as ae}from"./user.e91c667c.js";import{p as W}from"./pick.029ef62e.js";const q={getItems:"/api/user/member/agent/list",getView:"/api/user/member/agent/view",updateItem:"/api/user/member/agent/update",listApply:"/api/user/member/agent/listApply",updateApplyStatus:"/api/user/member/agent/update_apply_status"};function se(C){return G({url:q.updateApplyStatus,method:"post",data:C})}function ie(C){return G({url:q.updateItem,method:"post",data:C})}const re=i("option",{value:0},"\u5BFC\u8D2D",-1),de=i("option",{value:1},"\u4F1A\u5458\u8FD4\u5229",-1),me=i("option",{value:3},"\u591A\u7EA7\u5206\u9500",-1),_e={class:"grid-cols-3 gap-2 sm:grid"},pe={class:"overflow-x-auto"},fe=i("thead",null,[i("tr",null,[i("th",{class:"bg-slate-50 !pr-2 dark:bg-darkmode-800"}),i("th",{class:"bg-slate-50 dark:bg-darkmode-800"},"\u7B49\u7EA7\u540D\u79F0"),i("th",{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"}," \u5347\u7EA7\u9700\u8981\u9080\u8BF7\u4EBA\u6570 "),i("th",{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"}," \u81EA\u8D2D\u8FD4\u5229\u6BD4\u4F8B "),i("th",{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"}," \u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1 "),i("th",{class:"whitespace-nowrap bg-slate-50 !px-2 text-slate-500 dark:bg-darkmode-800"},"\u4E0B\u4E0B\u7EA7\u8D2D\u7269\u5956\u52B1")])],-1),ce=i("td",{class:"!pr-2"},"1.",-1),ve={class:"whitespace-nowrap"},ge={class:"!px-2"},be={class:"!px-2"},ke={class:"!px-2"},Fe={class:"!pl-2 text-slate-500"},ye=i("td",{class:"!pr-2"},"2.",-1),De={class:"whitespace-nowrap"},we={class:"!px-2"},Ve={class:"!px-2"},xe={class:"!px-2"},he={class:"!pl-2 text-slate-500"},Be=i("td",{class:"!pr-2"},"3.",-1),Ee={class:"whitespace-nowrap"},Ae={class:"!px-2"},Ce={class:"!px-2"},Ue={class:"!px-2"},Te={class:"!pl-2 text-slate-500"},$e=O({__name:"data",setup(C,{expose:h}){const u=A({user_rate:0,invite_mode:0,invite1_rate:0,invite2_rate:0,invite3_rate:0,rank3_name:"",rank3_members:0,rank3_invite1:0,rank3_invite2:0,rank3_invite3:0,rank2_name:"",rank2_members:0,rank2_invite1:0,rank2_invite2:0,rank2_invite3:0,rank1_name:"",rank1_members:0,rank1_invite1:0,rank1_invite2:0,rank1_invite3:0,order_start_time:""}),U={},g=A({visible:!1,confirmLoading:!1,uploading:!0,payment_money:0,user_data_money:0}),s=P(()=>u.invite_mode===3),F=P(()=>u.invite_mode===1);J(()=>{f()});const f=()=>{w()},w=()=>{K({}).then(o=>{o.data.app_data&&z(()=>{const t=W(o.data.app_data,["invite_mode","invite1_rate","invite2_rate","invite3_rate","invite4_rate","invite5_rate","user_rate","order_start_time","rank1_name","rank2_name","rank3_name","rank1_invite1","rank1_invite2","rank1_invite3","rank1_invite1_h1","rank1_invite2_h1","rank1_invite3_h1","rank1_invite1_h2","rank1_invite2_h2","rank1_invite3_h2","rank2_invite1","rank2_invite2","rank2_invite3","rank2_invite1_h1","rank2_invite2_h1","rank2_invite3_h1","rank2_invite1_h2","rank2_invite2_h2","rank2_invite3_h2","rank3_invite1","rank3_invite2","rank3_invite3","rank3_invite1_h1","rank3_invite2_h1","rank3_invite3_h1","rank3_invite1_h2","rank3_invite2_h2","rank3_invite3_h2","rank1_members","rank2_members","rank3_members"]);Object.assign(u,t),o.data.app_data.order_start_time&&(u.order_start_time=Q(o.data.app_data.order_start_time))})}),ae({}).then(o=>{o.data.user_data&&(g.user_data_money=o.data.user_data.money)})},y=H(U,R(u)),B=o=>{if(o.preventDefault(),y.value.$touch(),y.value.$invalid)y.value.$errors;else{let t=l(u),m={};t.order_start_time?m=Object.assign(m,{order_start_time:X(t.order_start_time)}):m=Object.assign(m,{order_start_time:0}),Z(Object.assign({},t,m,{page_view:"agent"})).then(v=>{const{code:V}=v||{};V===0?M.success("\u4FDD\u5B58\u6210\u529F"):M.error(v.message)})}},c=()=>{g.visible=!1};return h({edit:()=>{g.visible=!0}}),(o,t)=>{const m=_("FormSelect"),v=_("h-form-item"),V=_("Litepicker"),D=_("FormHelp"),T=_("h-form"),$=_("h-drawer");return L(),j($,{title:"\u8BBE\u7F6E",size:"xl",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:c},{footer:a(()=>[e(l(E),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:B},{default:a(()=>[d("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e(T,{layout:"small"},{default:a(()=>[e(v,{label:"\u8D2D\u7269\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(m,{modelValue:u.invite_mode,"onUpdate:modelValue":t[0]||(t[0]=n=>u.invite_mode=n)},{default:a(()=>[re,de,me]),_:1},8,["modelValue"])]),_:1}),e(v,{class:x({hidden:!l(s)&&!l(F)}),label:"\u8BA2\u5355\u8BA1\u7B97\u5F00\u59CB\u65F6\u95F4",layout:"small"},{default:a(()=>[e(V,{modelValue:u.order_start_time,"onUpdate:modelValue":t[1]||(t[1]=n=>u.order_start_time=n),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56"},null,8,["modelValue"])]),_:1},8,["class"]),e(v,{class:x({hidden:!l(s)}),label:"\u9ED8\u8BA4\u8BBE\u7F6E",layout:"small"},{default:a(()=>[i("div",_e,[e(l(r),null,{default:a(()=>[e(l(r).Text,null,{default:a(()=>[d("\u81EA\u8D2D")]),_:1}),e(l(p),{type:"text",placeholder:"",modelValue:u.invite1_rate,"onUpdate:modelValue":t[2]||(t[2]=n=>u.invite1_rate=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1}),e(l(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(l(r).Text,null,{default:a(()=>[d("\u4E0B\u7EA7")]),_:1}),e(l(p),{type:"text",placeholder:"",modelValue:u.invite2_rate,"onUpdate:modelValue":t[3]||(t[3]=n=>u.invite2_rate=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1}),e(l(r),{class:"mt-2 sm:mt-0"},{default:a(()=>[e(l(r).Text,null,{default:a(()=>[d("\u4E0B\u4E0B\u7EA7")]),_:1}),e(l(p),{type:"text",placeholder:"",modelValue:u.invite3_rate,"onUpdate:modelValue":t[4]||(t[4]=n=>u.invite3_rate=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})])]),_:1},8,["class"]),e(v,{class:x({hidden:!l(F)}),label:"\u8FD4\u5229\u6BD4\u4F8B",layout:"small"},{default:a(()=>[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",modelValue:u.user_rate,"onUpdate:modelValue":t[5]||(t[5]=n=>u.user_rate=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),_:1},8,["class"]),e(v,{class:x({hidden:!l(s)}),label:"",layout:"small"},{default:a(()=>[e(D,null,{default:a(()=>[d("\u63D0\u793A:\u672A\u8FDB\u884C\u8BE6\u7EC6\u767B\u8BB0\u6BD4\u4F8B\u8BBE\u7F6E\uFF0C\u5C06\u624D\u6709\u4E0A\u9762\u9ED8\u8BA4\u8BBE\u7F6E\u6BD4\u4F8B ")]),_:1})]),_:1},8,["class"]),i("div",pe,[i("table",{class:x(["table border",l(s)?"":"hidden"])},[fe,i("tbody",null,[i("tr",{class:x(l(s)?"":"hidden")},[ce,i("td",ve,[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_name,"onUpdate:modelValue":t[6]||(t[6]=n=>u.rank1_name=n)},null,8,["modelValue"])]),i("td",ge,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_members,"onUpdate:modelValue":t[7]||(t[7]=n=>u.rank1_members=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("\u4EBA")]),_:1})]),_:1})]),i("td",be,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite1,"onUpdate:modelValue":t[8]||(t[8]=n=>u.rank1_invite1=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",ke,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite2,"onUpdate:modelValue":t[9]||(t[9]=n=>u.rank1_invite2=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",Fe,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank1_invite3,"onUpdate:modelValue":t[10]||(t[10]=n=>u.rank1_invite3=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})])],2),i("tr",{class:x(l(s)?"":"hidden")},[ye,i("td",De,[e(l(p),{type:"text",modelValue:u.rank2_name,"onUpdate:modelValue":t[11]||(t[11]=n=>u.rank2_name=n)},null,8,["modelValue"])]),i("td",we,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_members,"onUpdate:modelValue":t[12]||(t[12]=n=>u.rank2_members=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("\u4EBA")]),_:1})]),_:1})]),i("td",Ve,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite1,"onUpdate:modelValue":t[13]||(t[13]=n=>u.rank2_invite1=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",xe,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite2,"onUpdate:modelValue":t[14]||(t[14]=n=>u.rank2_invite2=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",he,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank2_invite3,"onUpdate:modelValue":t[15]||(t[15]=n=>u.rank2_invite3=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})])],2),i("tr",{class:x(l(s)?"":"hidden")},[Be,i("td",Ee,[e(l(p),{type:"text",modelValue:u.rank3_name,"onUpdate:modelValue":t[16]||(t[16]=n=>u.rank3_name=n)},null,8,["modelValue"])]),i("td",Ae,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_members,"onUpdate:modelValue":t[17]||(t[17]=n=>u.rank3_members=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("\u4EBA")]),_:1})]),_:1})]),i("td",Ce,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite1,"onUpdate:modelValue":t[18]||(t[18]=n=>u.rank3_invite1=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",Ue,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite2,"onUpdate:modelValue":t[19]||(t[19]=n=>u.rank3_invite2=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})]),i("td",Te,[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",class:"min-w-[3rem]",modelValue:u.rank3_invite3,"onUpdate:modelValue":t[20]||(t[20]=n=>u.rank3_invite3=n)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[d("%")]),_:1})]),_:1})])],2)])],2)]),e(v,{class:x({hidden:!l(s)}),label:"",layout:"small"},{default:a(()=>[e(D,null,{default:a(()=>[d("1:\u4F1A\u5458\u63A8\u5E7F\u4EBA\u6570\u8FBE\u5230\u8BBE\u7F6E\u7B49\u7EA7\u8981\u6C42\u540E\uFF0C\u91C7\u7528\u76F8\u5E94\u7B49\u7EA7\u8BBE\u7F6E\u6BD4\u4F8B\u8FDB\u884C\u5956\u52B1 ")]),_:1}),e(D,null,{default:a(()=>[d("2:\u4F1A\u5458\u7B49\u7EA7\u540D\u79F0\u53EF\u4EE5\u81EA\u5B9A\u4E49 ")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),Me=I($e,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/data.vue"]]),Se=i("option",{value:0},"\u65E0\u8FD0\u8425\u6743\u9650",-1),Le=i("option",{value:-1},"\u6E20\u9053\u6388\u6743\u6A21\u5F0F",-1),je=i("option",{value:-2},"\u4F1A\u5458\u6388\u6743\u6A21\u5F0F",-1),Ye=i("option",{value:-3},"\u6DF7\u5408\u6388\u6743\u6A21\u5F0F",-1),Oe=O({__name:"shop",setup(C,{expose:h}){const u=A({distribute_pid:0,order_start_time:"",pid:""}),U={},g=A({visible:!1,confirmLoading:!1,uploading:!0,payment_mode:!1,payment_money:0,user_data_money:0});J(()=>{F()});const s=H(U,R(u)),F=()=>{f()},f=()=>{K({}).then(c=>{c.data.app_data&&z(()=>{const b=W(c.data.app_data,["distribute_pid","pid","order_start_time"]);Object.assign(u,b),c.data.app_data.order_start_time&&(u.order_start_time=Q(c.data.app_data.order_start_time))})}),ae({}).then(c=>{c.data.user_data&&(g.user_data_money=c.data.user_data.money)})},w=c=>{if(c.preventDefault(),s.value.$touch(),s.value.$invalid)s.value.$errors;else{let b=l(u),o={};b.order_start_time?o=Object.assign(o,{order_start_time:X(b.order_start_time)}):o=Object.assign(o,{order_start_time:0}),Z(Object.assign({},b,o,{page_view:"data"})).then(t=>{const{code:m}=t.data;m===0?M.success("\u4FDD\u5B58\u6210\u529F"):M.error(t.message)})}},y=()=>{g.visible=!1};return h({edit:()=>{g.visible=!0}}),(c,b)=>{const o=_("FormSelect"),t=_("FormHelp"),m=_("h-form-item"),v=_("h-form"),V=_("h-drawer");return L(),j(V,{title:"\u7535\u5546\u5E73\u53F0\u914D\u7F6E",visible:g.visible,"confirm-loading":g.confirmLoading,onCancel:y},{footer:a(()=>[e(l(E),{variant:"primary",class:"mb-2 mr-1 w-24",onClick:w},{default:a(()=>[d("\u4FDD\u5B58")]),_:1})]),default:a(()=>[e(v,{layout:"small",label:"\u6DD8\u5B9D",border:!1},{default:a(()=>[e(m,{label:"\u6388\u6743\u6A21\u5F0F",content:"",layout:"small"},{default:a(()=>[e(o,{modelValue:u.distribute_pid,"onUpdate:modelValue":b[0]||(b[0]=D=>u.distribute_pid=D)},{default:a(()=>[Se,Le,je,Ye]),_:1},8,["modelValue"]),e(t,null,{default:a(()=>[d(" \u8FD4\u5229\u3001\u5206\u9500\u6A21\u5F0F\u9700\u8981\u8054\u76DF\u5F00\u901A\u8FD0\u8425\u6743\u9650\u540E\u624D\u80FD\u6709\u6548\u8FD0\u884C ")]),_:1})]),_:1}),e(m,{label:"\u9ED8\u8BA4\u6E20\u9053\u4E13\u4EABpid",content:"",layout:"small"},{default:a(()=>[e(l(r),null,{default:a(()=>[e(l(p),{type:"text",modelValue:u.pid,"onUpdate:modelValue":b[1]||(b[1]=D=>u.pid=D)},null,8,["modelValue"]),e(l(r).Text)]),_:1}),e(t,null,{default:a(()=>[d(" \u6E20\u9053\u6388\u6743\u6A21\u5F0F\u4E0B\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7684pid ")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),Ie=I(Oe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/shop.vue"]]),Pe={class:"mt-2 xl:mt-0"},qe=O({__name:"apply",setup(C,{expose:h}){const u=N(),U=P(()=>`${u.urlPrefix}${u.apiUrl}${q.listApply}`),g=ee({}),s=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u72B6\u6001",field:"status",formatter(o){return o.getData().status===1?"\u901A\u8FC7":"\u5F85\u5BA1\u6838"}},{title:"qq",field:"qq"},{title:"\u5FAE\u4FE1",field:"weixin"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(o){return le(o.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(o){if(o.getData().status===0){const t=Y('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return Y(t).on("click",function(m){B(o.getData())}),t[0]}return""}}],F=A({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),f=A({visible:!1,confirmLoading:!1}),w=S(),y=()=>{w.value.reload(!0)},B=o=>{se({member_id:o.member_id,status:1}).then(t=>{M.success(t.message),w.value.reload()})},c=()=>{f.visible=!1};return h({edit:()=>{f.visible=!0}}),(o,t)=>{const m=_("FormInput"),v=_("h-form-item"),V=_("Litepicker"),D=_("h-form"),T=te,$=_("h-drawer");return L(),j($,{title:"\u5BA1\u6838\u56E2\u957F\u7533\u8BF7",size:"xl",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:c},{default:a(()=>[e(T,{ref_key:"tableRef",ref:w,columns:s,ajaxUrl:l(U),config:l(g),queryParam:F},{search:a(()=>[e(D,{layout:"inline"},{default:a(()=>[e(v,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(m,{type:"text",modelValue:F.name,"onUpdate:modelValue":t[0]||(t[0]=n=>F.name=n),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(v,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(V,{modelValue:F.rangePicker,"onUpdate:modelValue":t[1]||(t[1]=n=>F.rangePicker=n),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),i("div",Pe,[e(l(E),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:y},{default:a(()=>[d(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),ze=I(qe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/apply.vue"]]),He=i("option",{value:1},"\u72EC\u7ACB\u57DF\u540D",-1),Re=i("option",{value:2},"\u514D\u8D39\u4E8C\u7EA7",-1),Ne=i("option",{value:"gouwu.rocks"},"gouwu.rocks",-1),We=O({__name:"agent",emits:["ok"],setup(C,{expose:h,emit:u}){const g=N().uploadUrl,s=A({id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0}),F={},f=A({visible:!1,confirmLoading:!1,data:{userCmsAgent:{user_name:""}}}),w=()=>{f.visible=!1},y=H(F,R(s)),B=o=>{f.visible=!0,z(()=>{Object.assign(s,{id:0,url:"",prefix:"",domain_url:"",pid:"",relation_id:"",site_name:"",logo_url:"",type:0});const t=W(o,["id","url","prefix","domain_url","pid","relation_id","site_name","logo_url","type"]);o.domain&&(t.site_name=o.domain.site_name,t.logo_url=o.domain.logo_url,t.url=o.domain.url,t.type=o.domain.type),o.member&&(f.data.userCmsAgent.user_name=o.member.nick_name),Object.assign(s,t)})},c=()=>{if(f.confirmLoading=!0,y.value.$touch(),y.value.$invalid)y.value.$errors,f.confirmLoading=!1;else{const o=l(s);ie(Object.assign(o,{user_name:f.data.userCmsAgent.user_name,domain_type:s.type})).then(t=>{const{code:m}=t||{};m===0?(M.success("\u4FDD\u5B58\u6210\u529F"),u("ok",o),f.visible=!1):M.error(t.message),f.confirmLoading=!1})}},b=o=>{s.logo_url=o.data.item.img};return h({edit:B}),(o,t)=>{const m=_("h-form-item"),v=_("FormSelect"),V=_("h-upload"),D=_("h-form"),T=_("h-spin"),$=_("LoadingIcon"),n=_("h-modal");return L(),j(n,{title:"\u7F16\u8F91",size:"lg",visible:f.visible,"confirm-loading":f.confirmLoading,onCancel:w},{footer:a(()=>[e(l(E),{variant:"primary",class:"mb-2 mr-1 w-24",onClick:t[8]||(t[8]=k=>c())},{default:a(()=>[d(" \u4FDD\u5B58 "),f.confirmLoading?(L(),j($,{key:0,icon:"oval",color:"white",class:"ml-2 h-4 w-4"})):ue("v-if",!0)]),_:1})]),default:a(()=>[e(T,{spinning:f.confirmLoading},{default:a(()=>[e(D,{layout:"small"},{default:a(()=>[e(m,{label:"\u7528\u6237\u540D",content:"",layout:"small"},{default:a(()=>[d(ne(f.data.userCmsAgent.user_name),1)]),_:1}),e(m,{label:"\u5E7F\u544A\u4F4Dpid",content:"",layout:"small"},{default:a(()=>[e(l(p),{type:"text",modelValue:s.pid,"onUpdate:modelValue":t[0]||(t[0]=k=>s.pid=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6E20\u9053id",content:"",layout:"small"},{default:a(()=>[e(l(p),{type:"text",modelValue:s.relation_id,"onUpdate:modelValue":t[1]||(t[1]=k=>s.relation_id=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u7ED1\u5B9A\u57DF\u540D",content:"",layout:"small"},{default:a(()=>[e(v,{modelValue:s.type,"onUpdate:modelValue":t[2]||(t[2]=k=>s.type=k)},{default:a(()=>[He,Re]),_:1},8,["modelValue"])]),_:1}),e(m,{class:x({hidden:s.type==2}),label:"\u72EC\u7ACB\u57DF\u540D",layout:"small"},{default:a(()=>[e(l(r),null,{default:a(()=>[e(l(r).Text,null,{default:a(()=>[d("Http://")]),_:1}),e(l(p),{type:"text",modelValue:s.url,"onUpdate:modelValue":t[3]||(t[3]=k=>s.url=k)},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(m,{class:x({hidden:s.type==1}),label:"\u514D\u8D39\u57DF\u540D",layout:"small"},{default:a(()=>[e(l(r),null,{default:a(()=>[e(l(r).Text,null,{default:a(()=>[d("Http://")]),_:1}),e(l(p),{type:"text",modelValue:s.prefix,"onUpdate:modelValue":t[4]||(t[4]=k=>s.prefix=k)},null,8,["modelValue"]),e(l(r).Text,null,{default:a(()=>[e(v,{modelValue:s.domain_url,"onUpdate:modelValue":t[5]||(t[5]=k=>s.domain_url=k)},{default:a(()=>[Ne]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class"]),e(m,{label:"\u7F51\u5740\u540D\u5B57",content:"",layout:"small"},{default:a(()=>[e(l(p),{type:"text",modelValue:s.site_name,"onUpdate:modelValue":t[6]||(t[6]=k=>s.site_name=k)},null,8,["modelValue"])]),_:1}),e(m,{label:"logo",content:"",layout:"small"},{default:a(()=>[e(l(p),{type:"text",modelValue:s.logo_url,"onUpdate:modelValue":t[7]||(t[7]=k=>s.logo_url=k),placeholder:"\u8BBE\u7F6E\u7F51\u7AD9\u7684logo\uFF0C\u4E0D\u8BBE\u7F6E\u4E0D\u663E\u793A\uFF01"},null,8,["modelValue"]),e(V,{name:"file",multiple:!0,action:l(g),onChange:b},{default:a(()=>[e(l(E),{variant:"outline-success",class:"btn-sm mt-1 mb-2 mr-2 w-32"},{default:a(()=>[e(l(oe),{icon:"Upload",class:"mr-2 h-4 w-4"}),d("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Ge=I(We,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent/agent.vue"]]),Je={class:"mt-2 xl:mt-0"},Ke=O({__name:"agent",setup(C){const h=N(),u=P(()=>`${h.urlPrefix}${h.apiUrl}${q.getItems}`),U=ee({}),g=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u7528\u6237\u540D",field:"member.nick_name",width:150},{title:"\u7ED1\u5B9A\u57DF\u540D",field:"domain.url",formatter(o){return o.getData().domain?Y(`<a target="_blank" href="'http://${o.getData().domain.url}">${o.getData().domain.url}</a>`)[0]:""}},{title:"\u64CD\u4F5C",field:"",formatter(o){const t=Y('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return Y(t).on("click",function(m){b(o.getData())}),t[0]}}],s=A({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),F=S(),f=S(),w=S(),y=S(),B=S(),c=()=>{F.value.reload(!0)},b=o=>{B.value.edit(o)};return(o,t)=>{const m=_("FormInput"),v=_("h-form-item"),V=_("Litepicker"),D=_("h-form"),T=te,$=_("h-card");return L(),j($,{bordered:!1,title:"\u56E2\u957F\u7BA1\u7406"},{header:a(()=>[e(l(E),{variant:"primary",class:"mr-2 shadow-md",onClick:t[0]||(t[0]=n=>f.value.edit({}))},{default:a(()=>[d("\u8FD4\u5229\u8BBE\u7F6E ")]),_:1}),e(l(E),{variant:"primary",class:"mr-2 shadow-md",onClick:t[1]||(t[1]=n=>w.value.edit({}))},{default:a(()=>[d("\u7535\u5546\u5E73\u53F0\u914D\u7F6E ")]),_:1}),e(l(E),{variant:"primary",class:"mr-2 shadow-md",onClick:t[2]||(t[2]=n=>y.value.edit({}))},{default:a(()=>[d("\u4EE3\u7406\u5BA1\u6838 ")]),_:1})]),default:a(()=>[e(T,{ref_key:"tableRef",ref:F,columns:g,ajaxUrl:l(u),config:l(U),queryParam:s},{search:a(()=>[e(D,{layout:"inline"},{default:a(()=>[e(v,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:a(()=>[e(m,{type:"text",modelValue:s.name,"onUpdate:modelValue":t[3]||(t[3]=n=>s.name=n),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(v,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:a(()=>[e(V,{modelValue:s.rangePicker,"onUpdate:modelValue":t[4]||(t[4]=n=>s.rangePicker=n),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),i("div",Je,[e(l(E),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:c},{default:a(()=>[d(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),e(Me,{ref_key:"dataModal",ref:f,onOk:c},null,512),e(Ie,{ref_key:"shopModal",ref:w,onOk:c},null,512),e(ze,{ref_key:"applyModal",ref:y,onOk:c},null,512),e(Ge,{ref_key:"agentModal",ref:B,onOk:c},null,512)]),_:1})}}}),et=I(Ke,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/member/agent.vue"]]);export{et as default};
