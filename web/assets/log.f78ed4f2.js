import{d as D,a7 as T,n as U,a8 as V,s as j,L as Y,y as o,b as v,e as k,w as t,h as e,g as A,u as a,B as I,j as p,aa as E,ab as L,k as F,a as C,a9 as R,T as l,ac as $,R as P}from"./index.64d8c851.js";const M={list:"/api/admin/log/list",list_cms:"/api/admin/log/list_cms",stat:"/api/admin/log/stat"},S={class:"mt-2 xl:mt-0"},z=D({__name:"stat",setup(B){const u=T(),m=U(()=>`${u.urlPrefix}${u.apiUrl}${M.stat}`),d=V({}),n=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"ID",width:100,field:"id"},{title:"\u57DF\u540D",field:"host"},{title:"\u641C\u7D22",width:150,field:"agent"},{title:"\u65E5\u671F",width:150,field:"date"},{title:"\u6D41\u91CF",width:150,field:"views"}],r=j({rangePicker:"",startTime:"",endTime:"",host:""}),c=Y(),_=()=>{r.startTime=E(r.rangePicker)[0],r.endTime=E(r.rangePicker)[0],c.value.reload(!0)};return(s,i)=>{const h=o("FormInput"),f=o("h-form-item"),g=o("Litepicker"),w=o("h-form"),b=L,x=o("h-card");return v(),k(x,{bordered:!1,title:""},{default:t(()=>[e(b,{ref_key:"tableRef",ref:c,columns:n,ajaxUrl:a(m),config:a(d),queryParam:r},{search:t(()=>[e(w,{layout:"inline"},{default:t(()=>[e(f,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:t(()=>[e(h,{modelValue:r.host,"onUpdate:modelValue":i[0]||(i[0]=y=>r.host=y),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:t(()=>[e(g,{modelValue:r.rangePicker,"onUpdate:modelValue":i[1]||(i[1]=y=>r.rangePicker=y),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),A("div",S,[e(a(I),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:_},{default:t(()=>[p(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),W=F(z,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/admin/log/stat.vue"]]),q={class:"mt-2 xl:mt-0"},N=D({__name:"logs",setup(B){const u=T(),m=U(()=>`${u.urlPrefix}${u.apiUrl}${M.list}`),d=V({}),n=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"ID",width:150,field:"id"},{title:"\u57DF\u540D",width:150,field:"host"},{title:"ip",width:130,field:"ip"},{title:"\u4F4D\u7F6E",width:80,field:"country_name",formatter(s){return C(`<span
          >${s.getData().country_name}<span v-if="record.country_code">(${s.getData().country_code})</span></span
        >
        <p v-if="record.region_name">
          ${s.getData().region_name}<span v-if="record.region_code">(${s.getData().region_code})</span>
        </p>
        <p v-if="record.city_name">
          ${s.getData().city_name}<span v-if="record.postal">(${s.getData().postal})</span>
        </p>`)[0]}},{title:"\u7C7B\u578B",width:60,field:"agent"},{title:"\u5730\u5740",width:160,field:"url",formatter(s){return C(`<a target="_blank" href="${s.getData().url}">
          ${s.getData().url}
        </a>`)[0]}},{title:"user_agent",field:"user_agent"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(s){return R(s.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u6267\u884C\u65F6\u95F4",field:"time",width:80},{title:"\u6765\u8DEF",field:"referer",width:100}],r=j({name:"",status:0,startTime:"",endTime:"",host:""}),c=Y(),_=()=>{c.value.reload(!0)};return(s,i)=>{const h=o("FormInput"),f=o("h-form-item"),g=o("h-form"),w=L,b=o("h-card");return v(),k(b,{bordered:!1,title:""},{default:t(()=>[e(w,{ref_key:"tableRef",ref:c,columns:n,ajaxUrl:a(m),config:a(d),queryParam:r},{search:t(()=>[e(g,{layout:"inline"},{default:t(()=>[e(f,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:t(()=>[e(h,{modelValue:r.host,"onUpdate:modelValue":i[0]||(i[0]=x=>r.host=x),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),A("div",q,[e(a(I),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:_},{default:t(()=>[p(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),G=F(N,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/admin/log/logs.vue"]]),H=D({__name:"log",setup(B){return(u,m)=>{const d=o("Tippy");return v(),k(a(l).Group,{class:"mt-5 overflow-hidden post intro-y box"},{default:t(()=>[e(a(l).List,{class:"flex-col bg-slate-200 dark:bg-darkmode-800 sm:flex-row"},{default:t(()=>[e(a(l),{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40"},{default:t(({selected:n})=>[e(a(l).Button,{class:$(["flex w-full items-center justify-center px-0 py-0 text-slate-500 sm:w-40",{"hover:border-transparent hover:bg-transparent hover:text-slate-600 hover:dark:bg-transparent hover:dark:text-slate-300":!n},{"border-transparent text-primary dark:border-x-transparent dark:border-t-transparent dark:bg-darkmode-600 dark:text-white":n}]),as:"button"},{default:t(()=>[e(d,{content:"\u7EDF\u8BA1",class:"flex items-center justify-center w-full py-4 tooltip","aria-controls":"content","aria-selected":"true"},{default:t(()=>[e(a(P),{icon:"FileText",class:"w-4 h-4 mr-2"}),p(" \u7EDF\u8BA1 ")]),_:1})]),_:2},1032,["class"])]),_:1}),e(a(l),{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40"},{default:t(({selected:n})=>[e(a(l).Button,{class:$(["flex w-full items-center justify-center px-0 py-0 text-slate-500 sm:w-40",{"hover:border-transparent hover:bg-transparent hover:text-slate-600 hover:dark:bg-transparent hover:dark:text-slate-300":!n},{"border-transparent text-primary dark:border-x-transparent dark:border-t-transparent dark:bg-darkmode-600 dark:text-white":n}]),as:"button"},{default:t(()=>[e(d,{content:"\u8BBF\u95EE\u660E\u7EC6",class:"flex items-center justify-center w-full py-4 tooltip","aria-selected":"false"},{default:t(()=>[e(a(P),{icon:"FileText",class:"w-4 h-4 mr-2"}),p(" \u8BBF\u95EE\u660E\u7EC6 ")]),_:1})]),_:2},1032,["class"])]),_:1})]),_:1}),e(a(l).Panels,{class:"post__content"},{default:t(()=>[e(a(l).Panel,{class:"p-5"},{default:t(()=>[e(a(W))]),_:1}),e(a(l).Panel,{class:"p-5"},{default:t(()=>[e(a(G))]),_:1})]),_:1})]),_:1})}}}),J=F(H,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/admin/log.vue"]]);export{J as default};
