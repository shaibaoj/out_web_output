import{d as Q,av as X,a2 as Z,C as tt,l as N,I as et,m as ut,t as ot,s as F,aw as lt,n as y,c as p,g as d,h as t,w as l,u as s,f as b,y as E,O as at,aa as c,ab as x,q as D,b as f,L as h,j as _,B as C,S as r,F as v,p as w,M as B,ae as st,k as it}from"./index.a1fd5d56.js";import{g as nt,u as dt,f as mt,a as ct}from"./goods.0f583cac.js";import{g as _t}from"./common.5a449435.js";import{p as A}from"./pick.0100f130.js";const rt={class:"flex flex-col items-center mt-8 intro-y sm:flex-row"},pt=d("h2",{class:"mr-auto text-lg font-medium"},"\u53D1\u5E03\u5546\u54C1",-1),ft={class:"flex w-full mt-4 sm:mt-0 sm:w-auto"},vt={class:"grid grid-cols-12 gap-5 mt-5 pos intro-y"},yt={class:"col-span-12 intro-y lg:col-span-8"},gt={class:"p-5 intro-y box"},bt={class:"sm:flex"},Ft={class:"flex flex-col flex-1 gap-2"},wt={class:"flex gap-1"},Et={class:"flex gap-x-1"},xt={class:"w-auto sm:w-[200px]"},Ct={class:"flex flex-col items-center gap-1 p-3 border-2 border-dashed rounded-md shadow-sm border-slate-200/60 dark:border-darkmode-400"},Vt={class:"relative w-32 h-32 cursor-pointer image-fit zoom-in"},Dt=["src"],ht={key:1},Bt={key:0,class:"py-2"},At=d("p",{class:"text-"},"\u4E3B\u56FE\u53C2\u8003",-1),kt={class:"flex flex-row flex-wrap gap-x-1 gap-y-1"},Ut=["onClick"],qt=["src"],Tt=d("option",{value:0},"--\u9009\u62E9--",-1),Ot=["value"],jt={key:0},Lt=d("p",null,"\u5907\u9009\u6587\u6848",-1),Nt={class:"flex flex-col gap-y-3"},St=["onClick"],It=at('<div class="col-span-12 lg:col-span-4"><div class="p-5 intro-y box"><div><label class="font-medium form-label">\u653E\u5355\u8BF4\u660E</label><div class="leading-8 text-neutral-600"><p>1\uFF1A\u4EA7\u54C1\u63D0\u4EA4\u5BA1\u6838\u4F1A\u6263\u9664\u70B9\u5238\uFF1B</p><p>2:\u5BA1\u6838\u901A\u8FC7\u540E\u4EA7\u54C1\u4F1A\u540C\u6B65\u5C55\u793A\u548C\u540C\u6B65\u653E\u5355\u5E73\u53F0\u548C\u63A5\u53E3\u3001\u7F51\u7AD9\u3001app\u7B49\u6E20\u9053;</p><p>3\uFF1A\u5BA1\u6838\u62D2\u7EDD\u70B9\u5238\u4F1A\u9000\u56DE\u8D26\u6237\uFF0C\u7136\u540E\u53EF\u4EE5\u91CD\u65B0\u63D0\u4EA4\u5BA1\u6838</p><p>4\uFF1A\u4E0D\u80FD\u653EAB\u5355\uFF0C\u53EA\u80FDAA\u5355\uFF1B</p></div></div><div class="mt-3"><label class="font-medium form-label">\u514D\u5355\u6536\u8D39\u6807\u51C6</label><div class="leading-8 text-neutral-600"><p>1\u3001\u653E\u5355\u9700\u8981\u5148\u5145\u503C\u70B9\u5238</p><p>2\u3001\u6BCF\u4E2A\u4EA7\u54C1\u53D1\u5E03\u6263\u966450\u70B9\u5238</p></div></div></div></div>',1),Pt=Q({__name:"goods",setup(Gt){const k=X(),S=st(),U=Z().uploadUrl,V=tt(""),e=N({coupon_url:"",item_url:"",id:0,qq_video_url:"",money:0,goods_sign:"",item_id:"",seller_id:"",ori_price:0,user_type:0,volume:0,condition:0,title:"",d_title:"",pic_url:"",price:0,qq_pic_url:"",comment:"",cid1:0,start_time:"",end_time:"",commission:0,commission_rate:0,coupon_price:0,coupon_time:"",activity_time:"",zs_id:"",activity_start_time:"",activity_end_time:"",rebate_orders:0,rebate_amount:0}),I={},q=["id","cid1","coupon_url","item_url","goods_sign","item_id","platform_type","title","d_title","price","pic_url","seller_id","ori_price","user_type","volume","comment","start_time","end_time","money","condition","activity_start_time","activity_end_time","rebate_orders","rebate_amount","coupon_price","commission","commission_rate","coupon_time","activity_time","zs_id"],m=N({confirmLoading:!1,data:{cats:[],wen_items:[],pic_urls:[]}});et(()=>{P(),k.query.id&&G(k.query.id)});const P=()=>{_t({}).then(i=>{i.data.items&&(m.data.cats=i.data.items)})},T=ut(I,ot(e)),G=i=>{nt({id:i}).then(u=>{if(u.data.goods){let a=u.data.goods;F(()=>{const n=A(a,q);Object.assign(e,n),a.start_time&&(e.start_time=c(a.start_time)),a.end_time&&(e.end_time=c(a.end_time)),a.start_time&&a.end_time&&(e.coupon_time=c(a.start_time)+" - "+c(a.end_time)),a.activity_start_time&&(e.activity_start_time=c(a.activity_start_time)),a.activity_end_time&&(e.activity_end_time=c(a.activity_end_time)),a.activity_start_time&&a.activity_end_time&&(e.activity_time=c(a.activity_start_time)+" - "+c(a.activity_end_time))})}}).catch(u=>{})},O=i=>{if(m.confirmLoading=!0,T.value.$touch(),T.value.$invalid)m.confirmLoading=!1;else{let u=s(e),a={apply_status:i};u.start_time?a=Object.assign(a,{start_time:x(u.start_time)}):a=Object.assign(a,{start_time:0}),u.end_time?a=Object.assign(a,{end_time:x(u.end_time)}):a=Object.assign(a,{end_time:0}),u.activity_start_time&&(a=Object.assign(a,{activity_start_time:x(u.activity_start_time)})),u.activity_end_time&&(a=Object.assign(a,{activity_end_time:x(u.activity_end_time)})),dt(Object.assign({},u,a)).then(n=>{n.code===0?(i===1?D.success("\u63D0\u4EA4\u6210\u529F"):D.success("\u4FDD\u5B58\u6210\u529F"),S.push({name:"business-goods"},!0)):D.error(n.message),m.confirmLoading=!1})}},j=i=>{e.pic_url=i.data.item.img},M=()=>{mt({content:V.value}).then(i=>{i.data.goods&&(F(()=>{Object.assign(e,A(i.data.goods,q)),i.data.goods.start_time&&(e.start_time=c(i.data.goods.start_time)),i.data.goods.end_time&&(e.end_time=c(i.data.goods.end_time)),i.data.goods.start_time&&i.data.goods.end_time&&(e.coupon_time=c(i.data.goods.start_time)+" - "+c(i.data.goods.end_time))}),m.data.wen_items=i.data.goods.wen_items||[],m.data.pic_urls=i.data.goods.pic_urls||[]),m.confirmLoading=!1})},Y=()=>{ct({item_url:e.item_url,coupon_url:e.coupon_url}).then(i=>{i.data.coupon&&F(()=>{const u=A(i.data.coupon,["money","condition"]);Object.assign(e,u),e.start_time=c(i.data.coupon.start_time),e.end_time=c(i.data.coupon.end_time)})})},$=i=>{F(()=>{Object.assign(e,{comment:i.content})})},z=i=>{F(()=>{e.pic_url=i})};return lt(()=>e.coupon_url,(i,u)=>{Y()},{immediate:!0}),(i,u)=>{const a=y("FormTextarea"),n=y("h-form-item"),R=y("Litepicker"),L=y("h-upload"),W=y("FormSelect"),H=y("h-form"),J=y("h-spin");return f(),p(E,null,[d("div",rt,[pt,d("div",ft,[t(s(C),{variant:"primary",type:"button",class:"flex items-center ml-auto mr-2 btn box sm:ml-0",onClick:u[0]||(u[0]=o=>O(0))},{default:l(()=>[t(s(h),{icon:"Eye",class:"w-4 h-4 mr-2"}),_(" \u4FDD\u5B58\u8349\u7A3F ")]),_:1}),t(s(C),{variant:"primary",type:"button",class:"flex items-center ml-auto mr-2 sm:ml-0",onClick:u[1]||(u[1]=o=>O(1))},{default:l(()=>[t(s(h),{icon:"ArrowUpCircle",class:"w-4 h-4 mr-2"}),_(" \u63D0\u4EA4\u5BA1\u6838 ")]),_:1})])]),d("div",vt,[b(" BEGIN: Post Content "),d("div",yt,[d("div",gt,[t(J,{spinning:m.confirmLoading},{default:l(()=>[t(H,{layout:"small"},{default:l(()=>[t(n,{label:"\u5546\u54C1\u94FE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(s(r),{class:"flex-1"},{default:l(()=>[t(a,{modelValue:V.value,"onUpdate:modelValue":u[2]||(u[2]=o=>V.value=o),rows:2,placeholder:"\u8BF7\u5728\u6B64\u7C98\u8D34\u63A8\u5E7F\u6587\u6848,\u5546\u54C1\u94FE\u63A5\uFF0C\u672C\u529F\u80FD\u53EF\u8BC6\u522B\u5927\u591A\u7B26\u5408\u89C4\u5219\u7684\u6587\u6848\u548C\u94FE\u63A5"},null,8,["modelValue"]),t(s(r).Text,null,{default:l(()=>[t(s(C),{variant:"primary",class:"w-24 h-10 whitespace-nowrap",onClick:M},{default:l(()=>[_("\u62C9\u53D6\u5546\u54C1\u4FE1\u606F")]),_:1})]),_:1})]),_:1})]),_:1}),d("div",bt,[d("div",Ft,[t(n,{label:"\u4EF7\u683C",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[d("div",wt,[t(s(r),null,{default:l(()=>[t(s(r).Text,{class:"whitespace-nowrap"},{default:l(()=>[_("\u5238\u540E")]),_:1}),t(s(v),{type:"text",modelValue:e.coupon_price,"onUpdate:modelValue":u[3]||(u[3]=o=>e.coupon_price=o)},null,8,["modelValue"]),t(s(r).Text,null,{default:l(()=>[_("\u5143")]),_:1})]),_:1}),t(s(r),null,{default:l(()=>[t(s(r).Text,{class:"whitespace-nowrap"},{default:l(()=>[_("\u539F")]),_:1}),t(s(v),{type:"text",modelValue:e.price,"onUpdate:modelValue":u[4]||(u[4]=o=>e.price=o)},null,8,["modelValue"]),t(s(r).Text,null,{default:l(()=>[_("\u5143")]),_:1})]),_:1})])]),_:1}),t(n,{label:"\u4F18\u60E0\u5238",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[d("div",Et,[t(s(r),null,{default:l(()=>[t(s(r).Text,{class:"whitespace-nowrap"},{default:l(()=>[_("\u91D1\u989D")]),_:1}),t(s(v),{type:"text",modelValue:e.money,"onUpdate:modelValue":u[5]||(u[5]=o=>e.money=o)},null,8,["modelValue"]),t(s(r).Text,null,{default:l(()=>[_("\u5143")]),_:1})]),_:1}),t(s(r),null,{default:l(()=>[t(s(r).Text,null,{default:l(()=>[_("\u6EE1")]),_:1}),t(s(v),{type:"text",modelValue:e.condition,"onUpdate:modelValue":u[6]||(u[6]=o=>e.condition=o)},null,8,["modelValue"]),t(s(r).Text,null,{default:l(()=>[_("\u5143")]),_:1})]),_:1})])]),_:1}),t(n,{label:"\u4F18\u60E0\u5238\u8FDE\u63A5",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(s(v),{type:"text",modelValue:e.coupon_url,"onUpdate:modelValue":u[7]||(u[7]=o=>e.coupon_url=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"\u4F18\u60E0\u5238\u65F6\u95F4",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(R,{modelValue:e.coupon_time,"onUpdate:modelValue":u[8]||(u[8]=o=>e.coupon_time=o),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u4F63\u91D1\u6BD4\u4F8B",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>{var o;return[_(w((o=e.commission_rate)!=null?o:0)+"%",1)]}),_:1}),t(n,{label:"\u4F63\u91D1\u91D1\u989D",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>{var o;return[_(w((o=e.commission)!=null?o:0)+"\u5143",1)]}),_:1}),t(n,{label:"\u5546\u54C1\u6807\u9898",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(s(v),{type:"text",modelValue:e.title,"onUpdate:modelValue":u[9]||(u[9]=o=>e.title=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"\u77ED \u6807 \u9898",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(s(v),{type:"text",modelValue:e.d_title,"onUpdate:modelValue":u[10]||(u[10]=o=>e.d_title=o)},null,8,["modelValue"])]),_:1})]),d("div",xt,[d("div",Ct,[t(L,{name:"file",multiple:!0,action:s(U),onChange:j},{default:l(()=>[d("div",Vt,[e.pic_url.length>0?(f(),p("img",{key:0,class:"rounded-md",alt:"",src:e.pic_url},null,8,Dt)):(f(),p("div",ht))])]),_:1},8,["action"]),t(L,{name:"file",multiple:!0,action:s(U),onChange:j},{default:l(()=>[t(s(C),{variant:"outline-success",class:"w-20 mt-1 mb-2 mr-2 btn-sm"},{default:l(()=>[t(s(h),{icon:"Upload",class:"w-4 h-4 mr-2"}),_("\u4E0A\u4F20 ")]),_:1})]),_:1},8,["action"]),m.data.pic_urls&&m.data.pic_urls.length>0?(f(),p("div",Bt,[At,d("ul",kt,[(f(!0),p(E,null,B(m.data.pic_urls,(o,g)=>(f(),p("li",{key:g,onClick:K=>z(o),class:"w-10 h-10 p-1 border hover:border-green-600"},[d("img",{src:o},null,8,qt)],8,Ut))),128))])])):b("v-if",!0)])])]),t(n,{label:"\u62DB\u5546\u56E2\u957F",content:"",layout:"inline","label-class":"w-20"},{default:l(()=>[t(s(v),{type:"text",class:"w-36",modelValue:e.zs_id,"onUpdate:modelValue":u[11]||(u[11]=o=>e.zs_id=o),placeholder:"\u62DB\u5546\u56E2\u957FID"},null,8,["modelValue"])]),_:1}),t(n,{label:"\u5206\u7C7B",content:"",layout:"inline","label-class":"items-start w-20"},{default:l(()=>[t(W,{class:"w-36",modelValue:e.cid1,"onUpdate:modelValue":u[12]||(u[12]=o=>e.cid1=o)},{default:l(()=>[Tt,(f(!0),p(E,null,B(m.data.cats,(o,g)=>(f(),p("option",{key:g,value:o.id},w(o.short_name),9,Ot))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"\u5FAE\u4FE1\u7FA4\u4E13\u7528\u56FE",content:"",layout:"small"},{default:l(()=>[t(s(v),{type:"text",modelValue:e.qq_pic_url,"onUpdate:modelValue":u[13]||(u[13]=o=>e.qq_pic_url=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"\u89C6\u9891\u6587\u4EF6",content:"",layout:"small"},{default:l(()=>[t(s(v),{type:"text",modelValue:e.qq_video_url,"onUpdate:modelValue":u[14]||(u[14]=o=>e.qq_video_url=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"\u6587\u6848",content:"",layout:"small"},{default:l(()=>[t(a,{modelValue:e.comment,"onUpdate:modelValue":u[15]||(u[15]=o=>e.comment=o),rows:4,placeholder:"\u8BF7\u8F93\u516520-100\u5B57\u5BFC\u8D2D\u6587\u6848\u4ECB\u7ECD"},null,8,["modelValue"]),m.data.wen_items&&m.data.wen_items.length>0?(f(),p("div",jt,[Lt,d("ul",Nt,[(f(!0),p(E,null,B(m.data.wen_items,(o,g)=>(f(),p("li",{key:g,onClick:K=>$(o)},w(g+1)+"."+w(o.content),9,St))),128))])])):b("v-if",!0)]),_:1})]),_:1})]),_:1},8,["spinning"])])]),b(" END: Post Content "),b(" BEGIN: Post Info "),It,b(" END: Post Info ")])],64)}}}),Wt=it(Pt,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/goods/goods.vue"]]);export{Wt as default};
