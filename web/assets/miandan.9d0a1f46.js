import{h as j,Z as M,G as P,$ as R,j as x,C as v,l as m,a as z,b as V,w as o,q as i,u as D,m as e,a2 as Y,_ as q,o as T,n as r,x as k,a3 as L,y as $,d as l,a5 as U,a0 as N,a9 as O}from"./index.92deb929.js";import{c as W}from"./market.f8e167d1.js";import{a as G,b as H}from"./miandan.9b10419a.js";const I=j({__name:"report",setup(S,{expose:_}){const h=M(),b=P(()=>`${h.urlPrefix}${h.apiUrl}${W.getItems}`),y=R({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u8BA2\u5355\u53F7",field:"goods.price"},{title:"\u4E0B\u5355\u65F6\u95F4",field:"draws",width:160},{title:"\u8BA2\u5355\u72B6\u6001",field:"inventory",width:160},{title:"\u72B6\u6001",field:"",width:160,formatter(d){return d.getData().status===1?"\u4E0A\u67B6":"\u4E0B\u67B6"}},{title:"\u540C\u6B65\u65F6\u95F4",field:"start_time",width:120,hozAlign:"center"}],u=x({type:"vip",rangePicker:"",name:"",status:0,startTime:"",endTime:""}),s=x({visible:!1,confirmLoading:!1}),f=v(),w=()=>{f.value.reload(!0)};v();const g=()=>{s.visible=!1};return _({edit:d=>{s.visible=!0}}),(d,p)=>{const t=m("Litepicker"),a=m("h-form-item"),n=m("h-form"),C=Y,E=m("h-drawer");return z(),V(E,{title:"\u63A8\u5E7F\u62A5\u8868",size:"modal-xl",visible:s.visible,"confirm-loading":s.confirmLoading,onCancel:g},{header:o(()=>[]),default:o(()=>[i(C,{ref_key:"tableRef",ref:f,columns:F,ajaxUrl:D(b),config:D(y),queryParam:u},{search:o(()=>[i(n,{layout:"inline"},{default:o(()=>[i(a,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:o(()=>[i(t,{modelValue:u.rangePicker,"onUpdate:modelValue":p[0]||(p[0]=A=>u.rangePicker=A),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:w}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),Z=q(I,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/report.vue"]]),J={class:"flex p-2 py-5 box"},K={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Q=e("span",null,"\u8D26\u53F7\u4F59\u989D",-1),X={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},tt=e("span",null,"\u9501\u5B9A\u91D1\u989D",-1),et={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},at=e("span",null,"\u5BA1\u6838\u5546\u54C1",-1),st=e("option",{value:""},"\u5168\u90E8",-1),ot={value:"2"},ut={value:"1"},it={value:"0"},nt={value:"-1"},rt={value:"-2"},lt=j({__name:"miandan",setup(S){const _=M(),h=P(()=>`${_.urlPrefix}${_.apiUrl}${H.list}`),b=O(),y=R({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(t){const a=l(`
          <div class="flex items-center">
            <div class="w-9 h-9 image-fit zoom-in">
              <img class="border-white rounded-lg shadow-md w-9 h-9" src="${t.getData().pic_url}" />
            </div>
            <div class="ml-4 ">
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().d_title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().email||""}
              </div>
            </div>
          </div>
          `);return l(a).on("click",function(n){w(t.getData())}),a[0]},download:!0},{title:"\u4EF7\u683C",width:120,field:"price",sorter:!0,formatter(t){return l(`
          <div class="flex flex-col items-start">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5238\u540E\u4EF7:${t.getData().coupon_price}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u91D1:${t.getData().rebate_amount}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5230\u624B\u4EF7:${(t.getData().coupon_price-t.getData().rebate_amount).toFixed(2)}
            </div>
          </div>
          `)[0]}},{title:"\u6D3B\u52A8\u65F6\u95F4",field:"",width:120,formatter(t){return l(`
          <div class="flex flex-col items-center">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
            ${U(t.getData().activity_start_time)}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${U(t.getData().activity_end_time)}
            </div>
          </div>
          `)[0]}},{title:"\u798F\u5229\u91D1",width:90,field:"rebate_amount"},{title:"\u9884\u552E\u91CF",width:90,field:"rebate_orders"},{title:"\u8DD1\u91CF",width:80,field:"promotion_orders"},{title:"\u72B6\u6001",width:90,field:"",sorter:!0,formatter(t){return t.getData().status===0?"\u672A\u63D0\u4EA4":t.getData().status===1?"\u63D0\u4EA4\u5BA1\u6838":t.getData().status===2?"\u63A8\u5E7F\u4E2D":t.getData().status===3?"\u63A8\u5E7F\u5B8C\u6210":t.getData().status===-1?"\u5DF2\u62D2\u7EDD":t.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"updated_at",formatter(t){return N(t.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(t){if(t.getData().status===0){const a=l('<a class="flex items-center" href="javascript:;">\u7F16\u8F91</a>');return l(a).on("click",function(n){g(t.getData())}),a[0]}if(t.getData().status!=0){const a=l('<a class="flex items-center" href="javascript:;">\u62A5\u8868</a>');return l(a).on("click",function(n){w(t.getData())}),a[0]}return""}}],u=x({item_id:"",status:"",url:""}),s=x({report:{status0:0,status1:0,status2:0,status01:0,status02:0},user_data:{money:0,locking_money:0,goods_review:0}});T(()=>{p()});const f=v(),w=t=>{f.value.edit(t)},g=t=>{var a;b.push({name:"miandan-miandan-goods",query:{id:(a=t.id)!=null?a:""}},!0)},B=v(),d=t=>{B.value.reload(t),p()},p=()=>{G({}).then(t=>{t.data.item&&(s.report.status0=t.data.item[0]?t.data.item[0]:0,s.report.status1=t.data.item[1]?t.data.item[1]:0,s.report.status2=t.data.item[2]?t.data.item[2]:0,s.report.status01=t.data.item[-1]?t.data.item[-1]:0,s.report.status02=t.data.item[-2]?t.data.item[-2]:0)})};return(t,a)=>{const n=m("h-form-item"),C=m("h-form"),E=Y,A=m("h-card");return z(),V(A,{bordered:!1,title:"\u514D\u5355\u5546\u54C1"},{header:o(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:a[0]||(a[0]=c=>g({}))},"\u53D1\u5E03\u514D\u5355\u5546\u54C1 ")]),extra:o(()=>[e("div",J,[e("div",K,[Q,e("span",null,r(s.user_data.money),1)]),e("div",X,[tt,e("span",null,r(s.user_data.locking_money),1)]),e("div",et,[at,e("span",null,r(s.user_data.goods_review),1)])])]),default:o(()=>[i(E,{ref_key:"tableRef",ref:B,columns:F,ajaxUrl:D(h),config:D(y),queryParam:u},{search:o(()=>[i(C,{layout:"inline"},{default:o(()=>[i(n,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:o(()=>[k(e("select",{"onUpdate:modelValue":a[1]||(a[1]=c=>u.status=c),class:"w-full mt-2 form-select sm:mt-0 sm:w-auto",onChange:d},[st,e("option",ot,"\u901A\u8FC7 ("+r(s.report.status2)+")",1),e("option",ut,"\u5BA1\u6838\u4E2D ("+r(s.report.status1)+")",1),e("option",it,"\u8349\u7A3F ("+r(s.report.status0)+")",1),e("option",nt,"\u62D2\u7EDD ("+r(s.report.status01)+")",1),e("option",rt,"\u4E0B\u67B6 ("+r(s.report.status02)+")",1)],544),[[L,u.status]])]),_:1}),i(n,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:o(()=>[k(e("input",{"onUpdate:modelValue":a[2]||(a[2]=c=>u.item_id=c),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[$,u.item_id]])]),_:1}),i(n,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:o(()=>[k(e("input",{"onUpdate:modelValue":a[3]||(a[3]=c=>u.url=c),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[$,u.url]])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:d}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),i(Z,{ref_key:"reportModal",ref:f,onOk:d},null,512)]),_:1})}}}),ft=q(lt,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan.vue"]]);export{ft as default};
