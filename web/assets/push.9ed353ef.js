import{h as U,Y as P,j as w,E as G,k as z,t as O,a as A,b as C,w as n,l as e,n as M,e as j,p as o,x as F,y as x,u as B,v as H,am as Z,q as L,s as r,o as J,an as K,a2 as Y,ao as Q,D as N,Z as R,C as D,af as q,$ as I,a1 as T}from"./index.64e15f73.js";import{p as X}from"./pick.57748f43.js";const tt={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},et=U({__name:"push",emits:["ok"],setup(V,{expose:h,emit:l}){const p=P().uploadUrl,m=w({title:"",content:"",pic_url:""}),b={},a=w({visible:!1,confirmLoading:!1});G(()=>{});const _=()=>{a.visible=!1},g=s=>{m.pic_url=s.data.item.img},c=z(b,O(m)),d=()=>{a.visible=!0,H(()=>{Object.assign(m,{title:"",content:"",pic_url:""})})},t=s=>{if(a.confirmLoading=!0,c.value.$touch(),c.value.$invalid)c.value.$errors,a.confirmLoading=!1;else{const u=B(m);Z(Object.assign(u,{task:s})).then(f=>{f.code===0&&(L.success("\u63D0\u4EA4\u6210\u529F"),l("ok",u),a.visible=!1),a.confirmLoading=!1})}};return h({edit:d}),(s,u)=>{const f=r("h-form-item"),k=r("UploadIcon"),i=r("h-upload"),v=r("h-form"),$=r("h-spin"),S=r("LoadingIcon"),W=r("h-modal");return A(),C(W,{title:"\u53D1\u5E03\u6D88\u606F",size:"modal-lg",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:_},{footer:n(()=>[e("button",{class:"w-full mb-2 mr-1 btn btn-primary",onClick:u[3]||(u[3]=y=>t(0))},[M(" \u7ACB\u5373\u63A8\u9001 "),a.confirmLoading?(A(),C(S,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):j("",!0)]),e("button",{class:"w-full mb-2 mr-1 btn btn-primary",onClick:u[4]||(u[4]=y=>t(1))},[M(" \u6DFB\u52A0\u5230\u63A8\u9001\u5E93 "),a.confirmLoading?(A(),C(S,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):j("",!0)])]),default:n(()=>[o($,{spinning:a.confirmLoading},{default:n(()=>[o(v,{layout:"small"},{default:n(()=>[o(f,{label:"\u6807\u9898",content:"",layout:"small"},{default:n(()=>[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[0]||(u[0]=y=>m.title=y),placeholder:"\u6807\u9898"},null,512),[[x,m.title]])]),_:1}),o(f,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:n(()=>[F(e("textarea",{class:"form-control","onUpdate:modelValue":u[1]||(u[1]=y=>m.content=y),rows:4,placeholder:"\u6587\u6848\uFF0C\u7CBE\u7F8E\u7B80\u6D01\u7684\u6587\u6848\uFF0C\u6709\u5229\u4E8E\u5BA2\u6237\u6210\u4EA4"},null,512),[[x,m.content]])]),_:1}),o(f,{label:"\u56FE\u7247",content:"",layout:"small"},{default:n(()=>[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[2]||(u[2]=y=>m.pic_url=y),placeholder:""},null,512),[[x,m.pic_url]]),o(i,{name:"file",multiple:!0,action:B(p),onChange:g},{default:n(()=>[e("button",tt,[o(k,{class:"w-4 h-4 mr-2"}),M("\u4E0A\u4F20 ")])]),_:1},8,["action"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ot={class:"input-group"},nt=e("div",{class:"input-group-text"},"\u6709\u65B0\u7528\u6237\u5B89\u5353app\uFF0C\u7ED9\u7528\u6237\u53D1\u9001\u7684\u6D88\u606F\u63D0\u9192",-1),lt=e("option",{value:0},"\u5173\u95ED",-1),ut=e("option",{value:1},"\u5F00\u901A",-1),at=[lt,ut],st=e("option",{value:0},"\u5173\u95ED",-1),it=e("option",{value:1},"\u5F00\u901A",-1),rt=[st,it],mt=e("option",{value:0},"\u5173\u95ED",-1),ct=e("option",{value:1},"\u5F00\u901A",-1),dt=[mt,ct],_t={class:"input-group"},ft=e("div",{class:"input-group-text"},"\u5EFA\u8BAE\u8BBE\u7F6E2\u5C0F\u65F6(7200)\u4EE5\u4E0A,\u7FA4\u63A8\u4EFB\u52A1\u5EFA\u8BAE\u6BCF\u592910\u4E2A\u4EE5\u5185",-1),pt=U({__name:"data",setup(V,{expose:h}){const l=w({task_day_start_time:"",task_day_end_time:"",notice_install:"",push_igetui:"",push_umeng:"",push_xg:"",task_times:0}),E={},p=w({visible:!1,confirmLoading:!1});J(()=>{m()});const m=()=>{a()},b=()=>{p.visible=!0},a=()=>{K({}).then(d=>{d.data.app_detail&&H(()=>{const t=X(d.data.app_detail,["notice_install","push_igetui","push_umeng","push_xg","task_times","task_day_start_time","task_day_end_time"]);Object.assign(l,t)})})},_=z(E,O(l)),g=d=>{if(d.preventDefault(),_.value.$touch(),_.value.$invalid)_.value.$errors;else{const t=B(l);Q(t).then(s=>{const{code:u}=s||{};u===0?L.success("\u4FDD\u5B58\u6210\u529F"):L.error(s.message)})}},c=()=>{p.visible=!1};return h({edit:b}),(d,t)=>{const s=r("h-form-item"),u=r("Litepicker"),f=r("h-form"),k=r("h-drawer");return A(),C(k,{title:"\u8BBE\u7F6E",visible:p.visible,"confirm-loading":p.confirmLoading,onCancel:c},{footer:n(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:g},"\u4FDD\u5B58")]),default:n(()=>[o(f,{layout:"small"},{default:n(()=>[o(s,{label:"\u65B0\u7528\u6237\u63D0\u9192",content:"",layout:"small"},{default:n(()=>[e("div",ot,[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=i=>l.notice_install=i)},null,512),[[x,l.notice_install]]),nt])]),_:1}),o(s,{label:"\u4E2A\u63A8\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[F(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=i=>l.push_igetui=i)},at,512),[[Y,l.push_igetui]])]),_:1}),o(s,{label:"\u53CB\u76DF\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[F(e("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=i=>l.push_umeng=i)},rt,512),[[Y,l.push_umeng]])]),_:1}),o(s,{label:"\u4FE1\u9E3D\u63A8\u9001\u901A\u9053",content:"",layout:"small"},{default:n(()=>[F(e("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=i=>l.push_xg=i)},dt,512),[[Y,l.push_xg]])]),_:1}),o(s,{label:"\u4EFB\u52A1\u95F4\u9694\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[e("div",_t,[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=i=>l.task_times=i)},null,512),[[x,l.task_times]]),ft])]),_:1}),o(s,{label:"\u4EFB\u52A1\u6BCF\u5929\u5F00\u59CB\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[o(u,{modelValue:l.task_day_start_time,"onUpdate:modelValue":t[5]||(t[5]=i=>l.task_day_start_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"HH:mm:ss",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 mx-auto form-control"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u4EFB\u52A1\u6BCF\u5929\u7ED3\u675F\u65F6\u95F4",content:"",layout:"small"},{default:n(()=>[o(u,{modelValue:l.task_day_end_time,"onUpdate:modelValue":t[6]||(t[6]=i=>l.task_day_end_time=i),options:{autoApply:!1,showWeekNumbers:!0,format:"HH:mm:ss",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-56 mx-auto form-control"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),bt=U({__name:"task",setup(V,{expose:h}){const l=P(),E=N(()=>`${l.urlPrefix}${l.apiUrl}${q.taskItems}`),p=R({}),m=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",width:150},{title:"\u5185\u5BB9",field:"content"},{title:"\u72B6\u6001",field:"status_name",width:80},{title:"\u65F6\u95F4",hozAlign:"center",field:"created_at",formatter(t){return I(t.getData().created_at,"YY-MM-DD HH:mm")},width:140},{title:"\u64CD\u4F5C",field:"action",width:50,hozAlign:"center"}],b=w({rangePicker:""}),a=w({visible:!1,confirmLoading:!1}),_=D(),g=()=>{_.value.reload(!0)},c=()=>{a.visible=!0},d=()=>{a.visible=!1};return h({show:c}),(t,s)=>{const u=r("Litepicker"),f=r("h-form-item"),k=r("h-form"),i=T,v=r("h-drawer");return A(),C(v,{size:"modal-xl",title:"\u4EFB\u52A1\u8BB0\u5F55",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:d},{default:n(()=>[o(i,{ref_key:"tableRef",ref:_,columns:m,ajaxUrl:B(E),config:B(p),queryParam:b},{search:n(()=>[o(k,{layout:"inline"},{default:n(()=>[o(f,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[o(u,{modelValue:b.rangePicker,"onUpdate:modelValue":s[0]||(s[0]=$=>b.rangePicker=$),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:g}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),vt=U({__name:"push",setup(V){const h=P(),l=N(()=>`${h.urlPrefix}${h.apiUrl}${q.pushItems}`),E=R({}),p=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u65F6\u95F4",hozAlign:"center",field:"created_at",formatter(d){return I(d.getData().created_at,"YY-MM-DD HH:mm")},width:140},{title:"\u6807\u9898",field:"title",width:150},{title:"\u5185\u5BB9",field:"content"},{title:"\u72B6\u6001",field:"status_name",width:80},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(){return""}}],m=w({rangePicker:""}),b=D(),a=D(),_=D(),g=D(),c=()=>{b.value.reload(!0)};return(d,t)=>{const s=r("Litepicker"),u=r("h-form-item"),f=r("h-form"),k=T,i=r("h-card");return A(),C(i,{title:"\u63A8\u9001\u6D88\u606F",bordered:!1},{header:n(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:t[0]||(t[0]=v=>a.value.edit({}))},"\u53D1\u5E03\u63A8\u9001\u6D88\u606F "),e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:t[1]||(t[1]=v=>_.value.edit({}))},"\u8BBE\u7F6E "),e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:t[2]||(t[2]=v=>g.value.show({}))},"\u4EFB\u52A1\u8BB0\u5F55 ")]),default:n(()=>[o(k,{ref_key:"tableRef",ref:b,columns:p,ajaxUrl:B(l),config:B(E),queryParam:m},{search:n(()=>[o(f,{layout:"inline"},{default:n(()=>[o(u,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[o(s,{modelValue:m.rangePicker,"onUpdate:modelValue":t[3]||(t[3]=v=>m.rangePicker=v),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),o(et,{ref_key:"pushModal",ref:a,onOk:c},null,512),o(pt,{ref_key:"dataModal",ref:_,onOk:c},null,512),o(bt,{ref_key:"taskModal",ref:g,onOk:c},null,512)]),_:1})}}});export{vt as default};
