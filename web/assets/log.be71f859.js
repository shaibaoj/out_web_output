import{d as k,a6 as T,p as P,a7 as V,x as j,K as U,b as D,e as v,w as t,h as e,g as Y,u as a,k as A,j as p,a9 as $,A as o,aa as M,a as E,a8 as R,T as l,ab as C,Q as B}from"./index.778e50f1.js";const z={list:"/api/admin/log/list",list_cms:"/api/admin/log/list_cms",stat:"/api/admin/log/stat"},S={class:"mt-2 xl:mt-0"},W=k({__name:"stat",setup(F){const u=T(),m=P(()=>`${u.urlPrefix}${u.apiUrl}${z.list}`),d=V({}),s=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",field:"host"},{title:"\u641C\u7D22",width:100,field:"agent"},{title:"\u65E5\u671F",width:100,field:"date"},{title:"\u6D41\u91CF",width:100,field:"views"}],r=j({rangePicker:"",startTime:"",endTime:"",host:""}),c=U(),_=()=>{r.startTime=$(r.rangePicker)[0],r.endTime=$(r.rangePicker)[0],c.value.reload(!0)};return(n,i)=>{const h=o("FormInput"),f=o("h-form-item"),g=o("Litepicker"),x=o("h-form"),b=M,w=o("h-card");return D(),v(w,{bordered:!1,title:""},{default:t(()=>[e(b,{ref_key:"tableRef",ref:c,columns:s,ajaxUrl:a(m),config:a(d),queryParam:r},{search:t(()=>[e(x,{layout:"inline"},{default:t(()=>[e(f,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:t(()=>[e(h,{modelValue:r.host,"onUpdate:modelValue":i[0]||(i[0]=y=>r.host=y),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),e(f,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:t(()=>[e(g,{modelValue:r.rangePicker,"onUpdate:modelValue":i[1]||(i[1]=y=>r.rangePicker=y),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),Y("div",S,[e(a(A),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:_},{default:t(()=>[p(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),q={class:"mt-2 xl:mt-0"},I=k({__name:"logs",setup(F){const u=T(),m=P(()=>`${u.urlPrefix}${u.apiUrl}${z.list}`),d=V({}),s=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",width:150,field:"host"},{title:"ip",width:130,field:"ip"},{title:"\u4F4D\u7F6E",width:80,field:"country_name",formatter(n){return E(`<span
          >${n.getData().country_name}<span v-if="record.country_code">(${n.getData().country_code})</span></span
        >
        <p v-if="record.region_name">
          ${n.getData().region_name}<span v-if="record.region_code">(${n.getData().region_code})</span>
        </p>
        <p v-if="record.city_name">
          ${n.getData().city_name}<span v-if="record.postal">(${n.getData().postal})</span>
        </p>`)[0]}},{title:"\u7C7B\u578B",width:60,field:"agent"},{title:"\u5730\u5740",width:160,field:"url",formatter(n){return E(`<a target="_blank" href="${n.getData().url}">
          ${n.getData().url}
        </a>`)[0]}},{title:"user_agent",field:"user_agent"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(n){return R(n.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u6267\u884C\u65F6\u95F4",field:"time",width:80},{title:"\u6765\u8DEF",field:"referer",width:100}],r=j({name:"",status:0,startTime:"",endTime:"",host:""}),c=U(),_=()=>{c.value.reload(!0)};return(n,i)=>{const h=o("FormInput"),f=o("h-form-item"),g=o("h-form"),x=M,b=o("h-card");return D(),v(b,{bordered:!1,title:""},{default:t(()=>[e(x,{ref_key:"tableRef",ref:c,columns:s,ajaxUrl:a(m),config:a(d),queryParam:r},{search:t(()=>[e(g,{layout:"inline"},{default:t(()=>[e(f,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:t(()=>[e(h,{modelValue:r.host,"onUpdate:modelValue":i[0]||(i[0]=w=>r.host=w),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),Y("div",q,[e(a(A),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:_},{default:t(()=>[p(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),L=k({__name:"log",setup(F){return(u,m)=>{const d=o("Tippy");return D(),v(a(l).Group,{class:"mt-5 overflow-hidden post intro-y box"},{default:t(()=>[e(a(l).List,{class:"flex-col bg-slate-200 dark:bg-darkmode-800 sm:flex-row"},{default:t(()=>[e(a(l),{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40"},{default:t(({selected:s})=>[e(a(l).Button,{class:C(["flex w-full items-center justify-center px-0 py-0 text-slate-500 sm:w-40",{"hover:border-transparent hover:bg-transparent hover:text-slate-600 hover:dark:bg-transparent hover:dark:text-slate-300":!s},{"border-transparent text-primary dark:border-x-transparent dark:border-t-transparent dark:bg-darkmode-600 dark:text-white":s}]),as:"button"},{default:t(()=>[e(d,{content:"\u7EDF\u8BA1",class:"flex items-center justify-center w-full py-4 tooltip","aria-controls":"content","aria-selected":"true"},{default:t(()=>[e(a(B),{icon:"FileText",class:"w-4 h-4 mr-2"}),p(" \u7EDF\u8BA1 ")]),_:1})]),_:2},1032,["class"])]),_:1}),e(a(l),{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40"},{default:t(({selected:s})=>[e(a(l).Button,{class:C(["flex w-full items-center justify-center px-0 py-0 text-slate-500 sm:w-40",{"hover:border-transparent hover:bg-transparent hover:text-slate-600 hover:dark:bg-transparent hover:dark:text-slate-300":!s},{"border-transparent text-primary dark:border-x-transparent dark:border-t-transparent dark:bg-darkmode-600 dark:text-white":s}]),as:"button"},{default:t(()=>[e(d,{content:"\u8BBF\u95EE\u660E\u7EC6",class:"flex items-center justify-center w-full py-4 tooltip","aria-selected":"false"},{default:t(()=>[e(a(B),{icon:"FileText",class:"w-4 h-4 mr-2"}),p(" \u8BBF\u95EE\u660E\u7EC6 ")]),_:1})]),_:2},1032,["class"])]),_:1})]),_:1}),e(a(l).Panels,{class:"post__content"},{default:t(()=>[e(a(l).Panel,{class:"p-5"},{default:t(()=>[e(a(W))]),_:1}),e(a(l).Panel,{class:"p-5"},{default:t(()=>[e(a(I))]),_:1})]),_:1})]),_:1})}}});export{L as default};
