import{r as k,h as v,Y as A,D as E,Z as P,j as T,C as Y,b as M,w as u,s as r,a as q,p as l,x as f,y as U,l as s,a2 as V,u as p,$ as j,d as _,q as $,a0 as h,a1 as S}from"./index.ae8c907f.js";const w={list:"/api/admin/apply/list",update:"/api/admin/apply/update"};function N(m){return k({url:w.update,method:"post",data:m})}const R=s("option",{value:"all"},"\u5168\u90E8",-1),z=s("option",{value:"1"},"\u5BA1\u6838\u4E2D",-1),H=[R,z],O=v({__name:"apply",setup(m){const d=A(),g=E(()=>`${d.urlPrefix}${d.apiUrl}${w.list}`),b=P({}),y=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u5E10\u53F7",width:150,field:"user.user_name"},{title:"\u540D\u79F0",width:100,field:"name"},{title:"\u7C7B\u578B",width:80,field:"type"},{title:"\u6708\u6536\u5165",width:80,field:"income"},{title:"\u62E5\u6709\u8F6C\u64AD\u7FA4",width:80,field:"relay_qun"},{title:"\u8054\u7CFBQQ",width:120,field:"qq",sorter:!0},{title:"\u8054\u7CFB\u624B\u673A",width:150,field:"mobile"},{title:"\u81EA\u6709\u6E20\u9053",width:80,field:"channel"},{title:"\u7533\u8BF7\u7406\u7531",field:"reason"},{title:"\u7533\u8BF7\u65F6\u95F4",width:150,field:"created_at",formatter(a){return j(a.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(a){if(a.getData().status===0){const t=_('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return _(t).on("click",function(o){B(a.getData())}),t[0]}return""}}],e=T({rangePicker:"",username:"",status:0,startTime:"",endTime:""}),i=Y(),B=a=>{N({id:a.id,status:1}).then(t=>{$.success(t.message),i.value.reload()})},c=()=>{e.startTime=h(e.rangePicker)[0],e.endTime=h(e.rangePicker)[0],i.value.reload(!0)};return(a,t)=>{const o=r("h-form-item"),C=r("Litepicker"),D=r("h-form"),F=S,x=r("h-card");return q(),M(x,{bordered:!1,title:"\u7533\u8BF7\u5BA1\u6838"},{default:u(()=>[l(F,{ref_key:"tableRef",ref:i,columns:y,ajaxUrl:p(g),config:p(b),queryParam:e},{search:u(()=>[l(D,{layout:"inline"},{default:u(()=>[l(o,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:u(()=>[f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.username=n),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[U,e.username]])]),_:1}),l(o,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:u(()=>[f(s("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.status=n),class:"form-select mt-2 w-full sm:mt-0 sm:w-auto",onChange:c},H,544),[[V,e.status]])]),_:1}),l(o,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:u(()=>[l(C,{modelValue:e.rangePicker,"onUpdate:modelValue":t[2]||(t[2]=n=>e.rangePicker=n),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),s("div",{class:"mt-2 xl:mt-0"},[s("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}});export{O as default};
