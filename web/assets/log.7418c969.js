import{h as y,Y as k,D as C,Z as $,j as P,C as B,a as x,b as D,w as e,p as t,x as U,y as j,l as m,u as f,s as o,d as F,n as v}from"./index.9c437169.js";import{s as E,f as V}from"./dateUtil.cd140771.js";const Y={list:"/api/admin/log/list",list_cms:"/api/admin/log/list_cms",stat:"/api/admin/log/stat"},M=y({__name:"stat",setup(T){const r=k(),d=C(()=>`${r.urlPrefix}${r.apiUrl}${Y.list}`),i=$({}),u=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",field:"host"},{title:"\u641C\u7D22",width:100,field:"agent"},{title:"\u65E5\u671F",width:100,field:"date"},{title:"\u6D41\u91CF",width:100,field:"views"}],a=P({rangePicker:"",startTime:"",endTime:"",host:""}),s=B(),c=()=>{a.startTime=E(a.rangePicker)[0],a.endTime=E(a.rangePicker)[0],s.value.reload(!0)};return(n,l)=>{const p=o("h-form-item"),_=o("Litepicker"),g=o("h-form"),h=o("Tablepage"),b=o("h-card");return x(),D(b,{bordered:!1,title:""},{default:e(()=>[t(h,{ref_key:"tableRef",ref:s,columns:u,ajaxUrl:f(d),config:f(i),queryParam:a},{search:e(()=>[t(g,{layout:"inline"},{default:e(()=>[t(p,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:e(()=>[U(m("input",{"onUpdate:modelValue":l[0]||(l[0]=w=>a.host=w),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[j,a.host]])]),_:1}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:e(()=>[t(_,{modelValue:a.rangePicker,"onUpdate:modelValue":l[1]||(l[1]=w=>a.rangePicker=w),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),m("div",{class:"mt-2 xl:mt-0"},[m("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),A=y({__name:"logs",setup(T){const r=k(),d=C(()=>`${r.urlPrefix}${r.apiUrl}${Y.list}`),i=$({}),u=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",width:150,field:"host"},{title:"ip",width:130,field:"ip"},{title:"\u4F4D\u7F6E",width:80,field:"country_name",formatter(n){return F(`<span
          >${n.getData().country_name}<span v-if="record.country_code">(${n.getData().country_code})</span></span
        >
        <p v-if="record.region_name">
          ${n.getData().region_name}<span v-if="record.region_code">(${n.getData().region_code})</span>
        </p>
        <p v-if="record.city_name">
          ${n.getData().city_name}<span v-if="record.postal">(${n.getData().postal})</span>
        </p>`)[0]}},{title:"\u7C7B\u578B",width:60,field:"agent"},{title:"\u5730\u5740",width:160,field:"url",formatter(n){return F(`<a target="_blank" href="${n.getData().url}">
          ${n.getData().url}
        </a>`)[0]}},{title:"user_agent",field:"user_agent"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(n){return V(n.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u6267\u884C\u65F6\u95F4",field:"time",width:80},{title:"\u6765\u8DEF",field:"referer",width:100}],a=P({username:"",status:0,startTime:"",endTime:"",host:""}),s=B(),c=()=>{s.value.reload(!0)};return(n,l)=>{const p=o("h-form-item"),_=o("h-form"),g=o("Tablepage"),h=o("h-card");return x(),D(h,{bordered:!1,title:""},{default:e(()=>[t(g,{ref_key:"tableRef",ref:s,columns:u,ajaxUrl:f(d),config:f(i),queryParam:a},{search:e(()=>[t(_,{layout:"inline"},{default:e(()=>[t(p,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:e(()=>[U(m("input",{"onUpdate:modelValue":l[0]||(l[0]=b=>a.host=b),type:"text",class:"form-control mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[j,a.host]])]),_:1}),m("div",{class:"mt-2 xl:mt-0"},[m("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:c}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),W=y({__name:"log",setup(T){return(r,d)=>{const i=o("FileTextIcon"),u=o("Tippy"),a=o("Tab"),s=o("TabList"),c=o("TabPanel"),n=o("TabPanels"),l=o("TabGroup");return x(),D(l,{class:"mt-5 overflow-hidden post intro-y box"},{default:e(()=>[t(s,{class:"flex-col post__tabs nav-tabs bg-slate-200 dark:bg-darkmode-800 sm:flex-row"},{default:e(()=>[t(a,{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40",tag:"button"},{default:e(()=>[t(u,{content:"\u7EDF\u8BA1",class:"flex items-center justify-center w-full py-4 tooltip","aria-controls":"content","aria-selected":"true"},{default:e(()=>[t(i,{class:"w-4 h-4 mr-2"}),v(" \u7EDF\u8BA1 ")]),_:1})]),_:1}),t(a,{fullWidth:!1,class:"w-full px-0 py-0 sm:w-40",tag:"button"},{default:e(()=>[t(u,{content:"\u8BBF\u95EE\u660E\u7EC6",class:"flex items-center justify-center w-full py-4 tooltip","aria-selected":"false"},{default:e(()=>[t(i,{class:"w-4 h-4 mr-2"}),v(" \u8BBF\u95EE\u660E\u7EC6 ")]),_:1})]),_:1})]),_:1}),t(n,{class:"post__content"},{default:e(()=>[t(c,{class:"p-5"},{default:e(()=>[t(f(M))]),_:1}),t(c,{class:"p-5"},{default:e(()=>[t(f(A))]),_:1})]),_:1})]),_:1})}}});export{W as default};
