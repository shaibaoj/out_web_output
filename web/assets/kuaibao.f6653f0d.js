import{r as w,d as j,a7 as E,G as A,a8 as P,l as V,C as U,n as l,e as T,w as s,b as Y,h as o,g as c,u as p,B as S,j as q,a as u,aa as g,q as h,ab as M,k as N}from"./index.1c6d5825.js";const _={list:"/api/admin/kuaibao/list",view:"/api/admin/kuaibao/view",pass:"/api/admin/kuaibao/pass",reject:"/api/admin/kuaibao/reject"};function R(m){return w({url:_.pass,method:"post",data:m})}function z(m){return w({url:_.reject,method:"post",data:m})}const G=c("option",{value:""},"\u5168\u90E8",-1),L=c("option",{value:"1"},"\u901A\u8FC7",-1),O=c("option",{value:"0"},"\u672A\u786E\u8BA4",-1),W=c("option",{value:"-1"},"\u62D2\u7EDD",-1),H={class:"mt-2 xl:mt-0"},I=j({__name:"kuaibao",setup(m){const b=E(),D=A(()=>`${b.urlPrefix}${b.apiUrl}${_.list}`),v=P({}),x=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u540D\u79F0",width:150,field:"kuaibao.title"},{title:"\u5185\u5BB9",field:"content",formatter(e){var t,n,r;return u(`<ul>
            ${((r=(n=(t=e.getData().kuaibao)==null?void 0:t.items)==null?void 0:n.array)==null?void 0:r.forEach(i=>`<li v-for="(item, index) in record.kuaibao.items" :key="index">
            <span>{{ item.text }}</span>
            <a target="_blank" href="${i.click_url}">${i.click_url}</a>
            <a target="_blank" href="${i.pic_view}">
              <img src="${i.pic_view}" />
            </a>
          </li>`))||""}
          </ul>`)[0]}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"kuaibao.updated_at"},{title:"\u6D88\u606F\u72B6\u6001",field:"message",width:200,formatter(e){return u(`<ul>
          <li>
            <p>${e.getData().kuaibao.message_status}</p>
            <p>${e.getData().kuaibao.message_title}</p>
            <p>${e.getData().kuaibao.message_content}</p>
          </li>
        </ul>`)[0]}},{title:"\u6765\u8DEF",field:"url",width:200,formatter(e){return u(`<a target="_blank" href="${e.getData().url}">
          ${e.getData().url||""}
        </a>`)[0]}},{title:"\u72B6\u6001",field:"kuaibao.status",width:80},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(e){if(e.getData().kuaibao.status!==1){const t=u('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return u(t).on("click",function(n){F(e.getData())}),t[0]}else if(e.getData().kuaibao.status!==-1){const t=u('<a class="flex items-center" href="javascript:;">\u62D2\u7EDD</a>');return u(t).on("click",function(n){B(e.getData())}),t[0]}return""}}],a=V({rangePicker:"",status:"",startTime:"",endTime:""}),d=U(),k=()=>{a.startTime=g(a.rangePicker)[0],a.endTime=g(a.rangePicker)[0],d.value.reload(!0)},B=e=>{z({id:e.kuaibao.id}).then(()=>{h.success("\u5DF2\u62D2\u7EDD"),d.value.reload()})},F=e=>{R({id:e.kuaibao.id}).then(t=>{h.success(t.message),d.value.reload()})};return(e,t)=>{const n=l("FormSelect"),r=l("h-form-item"),i=l("Litepicker"),C=l("h-form"),$=M,y=l("h-card");return Y(),T(y,{bordered:!1,title:"\u7EBF\u62A5\u7BA1\u7406"},{default:s(()=>[o($,{ref_key:"tableRef",ref:d,columns:x,ajaxUrl:p(D),config:p(v),queryParam:a},{search:s(()=>[o(C,{layout:"inline"},{default:s(()=>[o(r,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:s(()=>[o(n,{modelValue:a.status,"onUpdate:modelValue":t[0]||(t[0]=f=>a.status=f),class:"mt-2 w-full sm:mt-0 sm:w-auto",onChange:k},{default:s(()=>[G,L,O,W]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[o(i,{modelValue:a.rangePicker,"onUpdate:modelValue":t[1]||(t[1]=f=>a.rangePicker=f),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),c("div",H,[o(p(S),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:k},{default:s(()=>[q(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}}),K=N(I,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/kuaibao.vue"]]);export{K as default};
