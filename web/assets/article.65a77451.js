import{r as R,d as L,s as y,v as N,x as O,y as s,b as C,e as D,w as a,h as t,u as d,B as U,j as A,f as q,F as z,ae as M,g as r,E as V,A as B,k as j,a7 as H,n as Y,a8 as G,L as T,a as k,a9 as W,aa as $,ab as J}from"./index.3c51e404.js";import{p as K}from"./pick.b254cdaf.js";const E={list:"/api/admin/article/list",view:"/api/admin/article/view",update:"/api/admin/article/update"};function Q(v){return R({url:E.update,method:"post",data:v})}const X=r("option",{value:0},"\u9ED8\u8BA4",-1),Z=r("option",{value:1},"cms",-1),ee=r("option",{value:2},"\u5C0F\u7A0B\u5E8F",-1),te=r("option",{value:3},"App",-1),ae=r("option",{value:4},"\u516C\u4F17\u53F7",-1),oe=r("option",{value:5},"\u8BA2\u5355",-1),ne=r("option",{value:6},"\u4F1A\u5458",-1),le=r("option",{value:7},"\u8425\u9500",-1),se=L({__name:"edit",emits:["ok"],setup(v,{expose:f,emit:h}){const o=y({id:0,title:"",cid1:0,content:""}),b={},e=y({visible:!1,confirmLoading:!1,data:{content:""}}),p=()=>{e.visible=!1},_=N(b,O(o)),g=l=>{e.visible=!0,V(()=>{Object.assign(o,{id:0,title:"",cid1:0,content:""}),Object.assign(o,K(l,["id","title","content","cid1"])),e.data.content=(l||{}).content||""})},i=()=>{if(e.confirmLoading=!0,_.value.$touch(),_.value.$invalid)_.value.$errors,e.confirmLoading=!1;else{const l=d(o);Q(l).then(n=>{const{code:c}=n||{};c===0?B.success("\u4FDD\u5B58\u6210\u529F"):B.error(n.message),e.confirmLoading=!1,h("ok",l),e.visible=!1,e.data.content=""})}},u=l=>{e.data.content=l,V(()=>{Object.assign(o,{content:e.data.content})})};return f({edit:g}),(l,n)=>{const c=s("h-form-item"),w=s("FormTextarea"),F=s("wang-editor"),x=s("h-form"),P=s("h-spin"),S=s("LoadingIcon"),I=s("h-modal");return C(),D(I,{title:"\u7F16\u8F91",size:"xl",visible:e.visible,"confirm-loading":e.confirmLoading,onCancel:p},{footer:a(()=>[t(d(U),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:n[3]||(n[3]=m=>i())},{default:a(()=>[A(" \u4FDD\u5B58 "),e.confirmLoading?(C(),D(S,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):q("v-if",!0)]),_:1})]),default:a(()=>[t(P,{spinning:e.confirmLoading},{default:a(()=>[t(x,{layout:"small"},{default:a(()=>[t(c,{label:"\u6807\u9898",content:"",layout:"small"},{default:a(()=>[t(d(z),{type:"text",modelValue:o.title,"onUpdate:modelValue":n[0]||(n[0]=m=>o.title=m)},null,8,["modelValue"])]),_:1}),t(c,{label:"\u5927\u5206\u7C7B",content:"",layout:"small"},{default:a(()=>[t(d(M),{modelValue:o.cid1,"onUpdate:modelValue":n[1]||(n[1]=m=>o.cid1=m)},{default:a(()=>[X,Z,ee,te,ae,oe,ne,le]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:a(()=>[t(w,{class:"hidden",modelValue:o.content,"onUpdate:modelValue":n[2]||(n[2]=m=>o.content=m)},null,8,["modelValue"])]),_:1}),t(F,{ref:"editor",value:e.data.content,onChange:u},null,8,["value"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ie=j(se,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/admin/article/edit.vue"]]),re={class:"mt-2 xl:mt-0"},ue=L({__name:"article",setup(v){const f=H(),h=Y(()=>`${f.urlPrefix}${f.apiUrl}${E.list}`),o=G({}),b=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",formatter(i){return k(`<a target="_blank" href="/article/${i.getData().id}">
          ${i.getData().title}
        </a>`)[0]}},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(i){return W(i.getData().created_at,"YY-MM-DD HH:mm")}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(i){if(i.getData().status===0){const u=k('<a class="flex items-center" href="javascript:;">\u5C4F\u853D</a>');return k(u).on("click",function(l){}),u[0]}return""}}],e=y({rangePicker:"",name:"",status:0,startTime:"",endTime:"",title:""}),p=T(),_=T(),g=()=>{e.startTime=$(e.rangePicker)[0],e.endTime=$(e.rangePicker)[0],p.value.reload(!0)};return(i,u)=>{const l=s("FormInput"),n=s("h-form-item"),c=s("h-form"),w=J,F=s("h-card");return C(),D(F,{bordered:!1,title:"\u6587\u7AE0\u7BA1\u7406"},{default:a(()=>[t(w,{ref_key:"tableRef",ref:p,columns:b,ajaxUrl:d(h),config:d(o),queryParam:e},{search:a(()=>[t(c,{layout:"inline"},{default:a(()=>[t(n,{label:"\u6807\u9898",content:"",layout:"inline"},{default:a(()=>[t(l,{modelValue:e.title,"onUpdate:modelValue":u[0]||(u[0]=x=>e.title=x),type:"text",class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),r("div",re,[t(d(U),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:g},{default:a(()=>[A(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),t(ie,{ref_key:"modal",ref:_,onOk:g},null,512)]),_:1})}}}),me=j(ue,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/admin/article.vue"]]);export{me as default};
