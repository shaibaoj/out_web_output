import{h as A,Y as E,D as $,Z as j,j as _,o as q,G as T,C as M,b as U,w as r,s as n,a as z,l as t,m as i,p as d,x as Y,y as k,u as f,d as H,O as S,$ as y,a1 as N}from"./index.664fed4d.js";import{g as P,a as h}from"./report.90fb97c7.js";const V={list:"/api/user/order/order/list"},G={class:"flex p-2 py-5 box"},R={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},O=t("span",null,"\u4ECA\u65E5\u9884\u4F30",-1),W={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},Z=t("span",null,"\u6628\u65E5\u9884\u4F30",-1),I={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},J=t("span",null,"\u7D2F\u79EF\u9884\u4F30",-1),X=A({__name:"common",setup(K){const l=E(),g=$(()=>`${l.urlPrefix}${l.apiUrl}${V.list}`),b=j({sharedColumnNames:{created:"created_at",updated:"created_at"}}),x=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(e){return H(`
        <div class="flex items-center">
          <div class="w-9 h-9 zoom-in">
            <img class="border-white rounded-lg shadow-md w-9 h-9" src="${S(e.getData().prod_img)?"/@/assets/images/notfound.png":e.getData().prod_img}" />
          </div>
          <div class="ml-4">
            <a href="" class="font-medium whitespace-nowrap">${e.getData().order_no}</a>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${e.getData().prod_name}
            </div>
          </div>
        </div>
        `)[0]},download:!0},{title:"\u72B6\u6001",hozAlign:"center",field:"status",width:80},{title:"\u8BA2\u5355\u7C7B\u578B",field:"order_type",width:120},{title:"\u4ED8\u6B3E\u91D1\u989D",field:"am",width:120},{title:"\u9884\u4F30\u6536\u76CA",field:"commision",width:120},{title:"\u5E7F\u544A\u4F4D",field:"",width:80,formatter(e){return`${e.getData().pid||""}${e.getData().zone_name||""}`}},{title:"\u8BA2\u5355\u65F6\u95F4",field:"order_time",formatter(e){return y(e.getData().order_time,"YY-MM-DD HH:mm")},width:150},{title:"\u540C\u6B65\u65F6\u95F4",field:"created_at",formatter(e){return y(e.getData().created_at,"YY-MM-DD HH:mm")},width:150}],o=_({order_no:""}),a=_({query:!1,data:{report:{app:{all:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0},today:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0},yesterday:{action_goods:0,members:0,action_members:0,orders:0,trades:0,money:0,member_order:0,member_money:0,payment:0}}}}});q(()=>{w()}),T(()=>{a.query=!1});const w=()=>{u()},m=M(),u=()=>{a.query=!0,m.value.reload(!0),p()};let s;const p=()=>{!a.query||(s&&window.clearTimeout(s),P({}).then(e=>{e.data.report&&(a.data.report.app.all=e.data.report),s=setTimeout(()=>{p()},1e3*60)}),h({}).then(e=>{e.data.report&&(a.data.report.app.today=e.data.report)}),h({yesterday:1}).then(e=>{e.data.report&&(a.data.report.app.yesterday=e.data.report)}))};return(e,c)=>{const D=n("h-form-item"),v=n("h-form"),B=N,F=n("h-card");return z(),U(F,{bordered:!1,title:"\u8BA2\u5355"},{extra:r(()=>[t("div",G,[t("div",R,[O,t("span",null,i(a.data.report.app.today.money),1)]),t("div",W,[Z,t("span",null,i(a.data.report.app.yesterday.money),1)]),t("div",I,[J,t("span",null,i(a.data.report.app.all.money),1)])])]),default:r(()=>[d(B,{ref_key:"tableRef",ref:m,columns:x,ajaxUrl:f(g),config:f(b),queryParam:o},{search:r(()=>[d(v,{layout:"inline"},{default:r(()=>[d(D,{label:"\u8BA2\u5355\u53F7",content:"",layout:"inline"},{default:r(()=>[Y(t("input",{"onUpdate:modelValue":c[0]||(c[0]=C=>o.order_no=C),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[k,o.order_no]])]),_:1}),t("div",{class:"mt-2 xl:mt-0"},[t("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:u}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}});export{X as default};
