import{r as M,d as E,l as D,m as O,t as P,n as i,b as x,e as Y,w as s,h as o,u as d,B as C,j as V,f as N,s as R,ae as B,ah as L,q as S,k as T,a7 as q,G as I,a8 as W,C as $,c as z,y as G,g as H,a as b,aa as U,ab as J}from"./index.980215a1.js";import{p as K}from"./pick.3ae150c5.js";const j={list:"/api/admin/activity/list",adds:"/api/admin/activity/adds",update:"/api/admin/activity/update"};function Q(w){return M({timeout:6e4,url:j.adds,method:"post",data:w})}const X=E({__name:"edit",emits:["ok"],setup(w,{expose:_,emit:v}){const l=D({start_time:"",end_time:"",content:""}),h={},a=D({visible:!1,confirmLoading:!1}),p=()=>{a.visible=!1},r=O(h,P(l)),g=e=>{a.visible=!0,R(()=>{Object.assign(l,{start_time:"",end_time:"",content:""}),Object.assign(l,K(e,["content"])),l.start_time=B(e.start_time),l.end_time=B(e.end_time)})},n=e=>{if(a.confirmLoading=!0,r.value.$touch(),r.value.$invalid)r.value.$errors,a.confirmLoading=!1;else{let t=d(l);t.start_time&&(t=Object.assign(t,{start_time:L(t.start_time)})),t.end_time&&(t=Object.assign(t,{end_time:L(t.end_time)})),Q(Object.assign(t,{plan:e})).then(()=>{S.success("\u53D1\u5E03\u6210\u529F"),a.confirmLoading=!1,v("ok",t),a.visible=!1})}};return _({edit:g}),(e,t)=>{const c=i("Litepicker"),f=i("h-form-item"),k=i("FormTextarea"),y=i("h-form"),F=i("h-spin"),u=i("LoadingIcon"),A=i("h-modal");return x(),Y(A,{title:"\u6D3B\u52A8\u5546\u54C1",size:"xl",visible:a.visible,"confirm-loading":a.confirmLoading,onCancel:p},{footer:s(()=>[o(d(C),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:t[3]||(t[3]=m=>n(11))},{default:s(()=>[V(" \u6279\u91CF\u6DFB\u52A0 "),a.confirmLoading?(x(),Y(u,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):N("v-if",!0)]),_:1})]),default:s(()=>[o(F,{spinning:a.confirmLoading},{default:s(()=>[o(y,{layout:"small"},{default:s(()=>[o(f,{label:"\u5F00\u59CB\u65F6\u95F4",content:"",layout:"small"},{default:s(()=>[o(c,{modelValue:l.start_time,"onUpdate:modelValue":t[0]||(t[0]=m=>l.start_time=m),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-full mx-auto"},null,8,["modelValue"])]),_:1}),o(f,{label:"\u7ED3\u675F\u65F6\u95F4",content:"",layout:"small"},{default:s(()=>[o(c,{modelValue:l.end_time,"onUpdate:modelValue":t[1]||(t[1]=m=>l.end_time=m),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"block w-full mx-auto"},null,8,["modelValue"])]),_:1}),o(f,{label:"\u5185\u5BB9",content:"",layout:"small"},{default:s(()=>[o(k,{modelValue:l.content,"onUpdate:modelValue":t[2]||(t[2]=m=>l.content=m),rows:8},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Z=T(X,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/activity/edit.vue"]]),ee={class:"mt-2 xl:mt-0"},te=E({__name:"activity",setup(w){const _=q(),v=I(()=>`${_.urlPrefix}${_.apiUrl}${j.list}`),l=W({}),h=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u56FE\u7247",width:60,field:"pic_url",formatter(n){var e;return b(`<a target="_blank" href="${n.getData().item_url}">
          <img src="${(e=n.getData().goods)==null?void 0:e.pic_url}" />
        </a>`)[0]}},{title:"\u6807\u9898",field:"title",formatter(n){var e;return b(`<a target="_blank" href="${n.getData().item_url}">
          ${(e=n.getData().goods)==null?void 0:e.title}
        </a>`)[0]}},{title:"\u4EF7\u683C",width:150,field:"",formatter(n){return n.getData().price}},{title:"\u9500\u91CF",width:80,field:"",formatter(n){var e;return(e=n.getData().goods)==null?void 0:e.volume}},{title:"\u65E5\u9500\u91CF",width:100,field:"",formatter(n){var e;return(e=n.getData().goods_data)==null?void 0:e.day_sales}},{title:"2\u5C0F\u65F6\u9500\u91CF",width:100,field:"",formatter(n){var e;return(e=n.getData().goods_data)==null?void 0:e.sales2h}},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(n){if(n.getData().status===0){const e=b('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return b(e).on("click",function(t){}),e[0]}return""}}],a=D({rangePicker:"",name:"",status:0,startTime:"",endTime:""}),p=$(),r=$(),g=()=>{a.startTime=U(a.rangePicker)[0],a.endTime=U(a.rangePicker)[0],p.value.reload(!0)};return(n,e)=>{const t=i("FormInput"),c=i("h-form-item"),f=i("Litepicker"),k=i("h-form"),y=J,F=i("h-card");return x(),z(G,null,[o(F,{bordered:!1,title:"\u6D3B\u52A8"},{header:s(()=>[o(d(C),{variant:"primary",class:"mr-2 shadow-md",onClick:e[0]||(e[0]=u=>r.value.edit({}))},{default:s(()=>[V("\u65B0\u5EFA ")]),_:1})]),default:s(()=>[o(y,{ref_key:"tableRef",ref:p,columns:h,ajaxUrl:d(v),config:d(l),queryParam:a},{search:s(()=>[o(k,{layout:"inline"},{default:s(()=>[o(c,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:s(()=>[o(t,{type:"text",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=u=>a.name=u),class:"mt-2 sm:mt-0 sm:w-40 2xl:w-full"},null,8,["modelValue"])]),_:1}),o(c,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[o(f,{modelValue:a.rangePicker,"onUpdate:modelValue":e[2]||(e[2]=u=>a.rangePicker=u),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),H("div",ee,[o(d(C),{variant:"primary",type:"button",class:"w-full sm:w-16",onClick:g},{default:s(()=>[V(" \u67E5\u8BE2 ")]),_:1})])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),o(Z,{ref_key:"modal",ref:r,onOk:g},null,512)],64)}}}),ne=T(te,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/admin/activity.vue"]]);export{ne as default};
