import{r as z,h as M,j as $,l as n,a as h,b as E,w as u,m as e,p as f,e as I,_ as q,Z as G,k as Y,t as ee,q as t,x as v,y as k,a3 as te,u as A,v as ue,O as oe,s as L,G as P,C as T,$ as ne,c as se,F as le,d as R,a2 as ae,a4 as ie}from"./index.a0d57e21.js";import{c as re}from"./index.cf01fc89.js";import{p as ce}from"./pick.cc2bde22.js";const V={getDomainGenerate:"/api/user/cms/domain/generate",getDomainItems:"/api/user/cms/domain/list",updateDomain:"/api/user/cms/domain/update",delDomainItems:"/api/user/cms/domain/delete",downloadCms:"/api/user/cms/domain/download"};function de(F){return z({url:V.updateDomain,method:"post",data:F})}function me(F){return z({url:V.delDomainItems,method:"post",data:F})}function pe(F){return z({url:V.getDomainGenerate,method:"post",data:F})}function fe(F){return z({url:V.downloadCms,method:"post",data:F,responseType:"blob"})}const _e={class:"flex flex-col w-full gap-y-2"},Fe=e("p",null," \u514D\u8D39\u63D0\u4F9B\u7684\u4E00\u7CFB\u5217\u8F6F\u4EF6\u7A0B\u5E8F\uFF0C\u65E8\u5728\u4E0E\u5E2E\u52A9\u7528\u6237\u9AD8\u6548\u7684\u8FDB\u884C\u5BFC\u8D2D\u4E1A\u52A1\u8FD0\u8425\u3002\u4F7F\u7528\u8005\u52A1\u5FC5\u9075\u5FAA\u56FD\u5BB6\u6CD5\u5F8B\u6CD5\u89C4\u8FDB\u884C\u63A8\u5E7F\uFF0C\u4E0D\u80FD\u6709\u4EFB\u4F55\u8FDD\u53CD\u56FD\u5BB6\u6CD5\u5F8B\u6CD5\u89C4\u7684\u884C\u4E3A\uFF01\u540C\u6837\u8BF7\u9075\u5B88\u7535\u5546\u5546\u52A1\u6CD5\u89C4\u3001\u5E7F\u544A\u6CD5\u3001\u5546\u5BB6\u5E73\u53F0\u89C4\u5219\uFF0C\u4E0D\u5F97\u6709\u4EFB\u4F55\u8FDD\u89C4\u884C\u4E3A\uFF01 ",-1),ge=M({__name:"download",setup(F,{expose:B}){const y=$({domain_url:"",url:""}),_=$({visible:!1,confirmLoading:!1}),D=()=>{_.visible=!1},o=s=>{_.visible=!0,Object.assign(y,s)},C=()=>{fe({}).then(s=>{if(!s)return;let c=window.URL.createObjectURL(new Blob([s])),d=document.createElement("a");d.style.display="none",d.href=c,d.setAttribute("download","index.php"),document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(d.href),document.body.removeChild(d)}).catch(s=>{re.log(s)})};return B({edit:o}),(s,c)=>{const d=n("LoadingIcon"),x=n("h-modal");return h(),E(x,{title:"\u72EC\u7ACB\u57DF\u540D\u6E90\u7801\u6587\u4EF6\u4E0B\u8F7D",size:"modal-lg",visible:_.visible,"confirm-loading":_.confirmLoading,onCancel:D},{footer:u(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:c[1]||(c[1]=b=>D())},[f(" \u5173\u95ED "),_.confirmLoading?(h(),E(d,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):I("v-if",!0)])]),default:u(()=>[e("div",_e,[Fe,e("button",{class:"w-32 mb-2 mr-1 btn btn-primary",onClick:c[0]||(c[0]=b=>C())},[f(" \u4E0B\u8F7D\u6E90\u7801\u6587\u4EF6 "),_.confirmLoading?(h(),E(d,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):I("v-if",!0)])])]),_:1},8,["visible","confirm-loading"])}}}),De=q(ge,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/cms/modal/download.vue"]]),be={class:"flex flex-col gap-y-2"},we={class:"input-group"},he=e("div",{class:"input-group-text"},"Http://",-1),Ce={class:"input-group"},Ee=e("div",{class:"input-group-text"},"Http://",-1),ve={class:"input-group-text w-96"},Ae=e("option",{value:"gouwu.rocks"},"gouwu.rocks",-1),Be=[Ae],ye={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},xe=M({__name:"edit",emits:["ok"],setup(F,{expose:B,emit:y}){const D=G().uploadUrl,o=$({id:0,url:"",prefix:"",domain_url:"",tao_pid:"",site_name:"",logo_url:"",js:"",type:0}),C={},s=$({visible:!1,confirmLoading:!1}),c=Y(C,ee(o)),d=m=>{s.visible=!0,ue(()=>{Object.assign(o,{id:0,url:"",prefix:"",domain_url:"",tao_pid:"",site_name:"",logo_url:"",js:"",type:0}),Object.assign(o,ce(m,["id","url","tao_pid","domain_url","site_name","logo_url","js","prefix","type"]))})},x=()=>{if(s.confirmLoading=!0,c.value.$touch(),c.value.$invalid)c.value.$errors,s.confirmLoading=!1;else{const m=A(o);oe(m.domain_url)||Object.assign(m,{url:m.prefix+"."+m.domain_url}),de(m).then(l=>{const{code:p}=l||{};p===0?L.success("\u4FDD\u5B58\u6210\u529F"):L.error(l.message),s.confirmLoading=!1,y("ok",m),s.visible=!1})}},b=()=>{s.visible=!1},g=m=>{Object.assign(o,{logo_url:m.data.item.img})};return B({edit:d}),(m,l)=>{const p=n("h-form-item"),j=n("UploadIcon"),a=n("h-upload"),i=n("h-form"),w=n("h-spin"),O=n("LoadingIcon"),U=n("h-modal");return h(),E(U,{title:"\u57DF\u540D\u7F16\u8F91",size:"modal-lg",visible:s.visible,"confirm-loading":s.confirmLoading,onCancel:b},{footer:u(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:l[7]||(l[7]=r=>x())},[f(" \u4FDD\u5B58 "),s.confirmLoading?(h(),E(O,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):I("v-if",!0)])]),default:u(()=>[t(w,{spinning:s.confirmLoading},{default:u(()=>[t(i,{border:!1},{default:u(()=>[e("div",be,[o.type==1?(h(),E(p,{key:0,label:"\u57DF\u540D",content:"",layout:"small"},{default:u(()=>[e("div",we,[he,v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=r=>o.url=r)},null,512),[[k,o.url]])])]),_:1})):I("v-if",!0),o.type==2?(h(),E(p,{key:1,label:"\u57DF\u540D",content:"",layout:"small"},{default:u(()=>[e("div",Ce,[Ee,v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=r=>o.prefix=r)},null,512),[[k,o.prefix]]),e("div",ve,[v(e("select",{class:"form-select","onUpdate:modelValue":l[2]||(l[2]=r=>o.domain_url=r)},Be,512),[[te,o.domain_url]])])])]),_:1})):I("v-if",!0),t(p,{label:"\u5E7F\u544A\u4F4D",content:"",layout:"small"},{default:u(()=>[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=r=>o.tao_pid=r)},null,512),[[k,o.tao_pid]])]),_:1}),t(p,{label:"\u7F51\u7AD9\u540D\u5B57",content:"",layout:"small"},{default:u(()=>[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[4]||(l[4]=r=>o.site_name=r)},null,512),[[k,o.site_name]])]),_:1}),t(p,{label:"\u7F51\u7AD9logo",content:"",layout:"small"},{default:u(()=>[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=r=>o.logo_url=r)},null,512),[[k,o.logo_url]]),t(a,{name:"file",action:A(D),onChange:g},{default:u(()=>[e("button",ye,[t(j,{class:"w-4 h-4 mr-2"}),f("\u4E0A\u4F20 ")])]),_:1},8,["action"])]),_:1}),t(p,{label:"js\u4EE3\u7801",content:"",layout:"small"},{default:u(()=>[v(e("textarea",{class:"form-control","onUpdate:modelValue":l[6]||(l[6]=r=>o.js=r),placeholder:"\u9700\u8981\u7ED9\u5355\u72EC\u57DF\u540D\u8BBE\u7F6E\u4EE3\u7801\u4F7F\u7528\uFF0C\u4E0D\u9700\u8981\u60C5\u51B5\u8BEF\u586B"},null,512),[[k,o.js]])]),_:1})])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),ke=q(xe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/cms/modal/edit.vue"]]),$e=e("span",null,[f(" 1\u3001\u4E0A\u4F20\u9A8C\u8BC1\u6587\u4EF6\u4EC5\u4EC5\u9488\u5BF9\u4F7F\u7528\u597D\u7269\u8054\u76DF\u7A7A\u95F4\u6216\u8005\u514D\u8D39\u4E8C\u7EA7\u57DF\u540D\u7684\u60C5\u51B5"),e("br"),f(" 2\u3001\u5982\u679C\u4F60\u4F7F\u7528\u7684\u81EA\u5DF1\u7A7A\u95F4\u6216\u72EC\u7ACB\u670D\u52A1\u5668\uFF0C\u8BF7\u76F4\u63A5\u4E0B\u8F7D\u9A8C\u8BC1\u6587\u4EF6\u5230\u4F60\u670D\u52A1\u5668\uFF0C\u65E0\u6CD5\u901A\u8FC7\u6B64\u5904\u4E0A\u4F20\u9A8C\u8BC1\u6587\u4EF6 ")],-1),je={class:"flex flex-col gap-y-2"},Ue={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},Ie={class:"w-32 mt-1 mb-2 mr-2 btn btn-outline-success btn-sm"},Le=M({__name:"data",setup(F,{expose:B}){const _=G().uploadUrl,D=$({id:0,url:""}),o=$({visible:!1,confirmLoading:!1}),C=P(()=>D.url),s=()=>{o.visible=!1},c=b=>{o.visible=!0,Object.assign(D,b)},d=b=>{L.success("\u4E0A\u4F20\u6210\u529F,\u53BB\u9A8C\u8BC1\u5427")},x=b=>{L.success("\u4E0A\u4F20\u6210\u529F,\u53BB\u9A8C\u8BC1\u5427")};return B({edit:c}),(b,g)=>{const m=n("AlertCircleIcon"),l=n("Alert"),p=n("UploadIcon"),j=n("h-upload"),a=n("h-form-item"),i=n("h-form"),w=n("h-spin"),O=n("LoadingIcon"),U=n("h-modal");return h(),E(U,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",size:"modal-lg",visible:o.visible,"confirm-loading":o.confirmLoading,onCancel:s},{footer:u(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:g[0]||(g[0]=r=>s())},[f(" \u5173\u95ED "),o.confirmLoading?(h(),E(O,{key:0,icon:"oval",color:"white",class:"w-4 h-4 ml-2"})):I("v-if",!0)])]),default:u(()=>[t(l,{class:"flex items-center mb-2 alert-outline-primary"},{default:u(()=>[t(m,{class:"w-6 h-6 mr-2"}),$e]),_:1}),t(w,{spinning:o.confirmLoading},{default:u(()=>[t(i,{border:!1},{default:u(()=>[e("div",je,[t(a,{label:"\u9A8C\u8BC1\u6587\u4EF6",content:"",layout:"small"},{default:u(()=>[t(j,{name:"file",action:A(_),data:{url:A(C),action:"root"},fileType:[".txt",".jpg",".png",".jpeg",".gif"],onChange:d},{default:u(()=>[e("button",Ue,[t(p,{class:"w-4 h-4 mr-2"}),f("\u4E0A\u4F20 ")])]),_:1},8,["action","data","fileType"])]),_:1}),t(a,{label:"\u5176\u4ED6\u9A8C\u8BC1\u6587\u4EF6",content:"",layout:"small"},{default:u(()=>[t(j,{name:"file",action:A(_),data:{url:A(C),action:"other"},fileType:[".txt",".jpg",".png",".jpeg",".gif"],onChange:x},{default:u(()=>[e("button",Ie,[t(p,{class:"w-4 h-4 mr-2"}),f("\u4E0A\u4F20 ")])]),_:1},8,["action","data","fileType"])]),_:1})])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible","confirm-loading"])}}}),Oe=q(Le,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/cms/modal/data.vue"]]),Re={class:"flex items-center justify-center w-5 h-5"},Ve={class:"sticky top-0 mt-5 box"},Se={class:"p-5"},Te={class:"flex items-center font-medium text-primary",target:"_blank",rel:"noopener noreferrer",href:"https://www.haowulm.com/article/7"},ze=e("h2",{class:"text-lg font-medium"},"\u63D0\u793A",-1),Me=e("div",null,[f(" 1\u3001\u5982\u679C\u4F60\u6709\u57DF\u540D\uFF0C\u6CA1\u6709\u7A7A\u95F4\uFF0C\u53EF\u4EE5\u57DF\u540D\u89E3\u6790\u5230cname\u89E3\u6790\u5230:cms.youdanhui.cn\uFF0C\u4F7F\u7528\u597D\u7269\u8054\u76DF\u63D0\u4F9B\u7684\u7A7A\u95F4\u5373\u53EF\uFF0C\u76EE\u524D\u7A7A\u95F4\u514D\u8D39\u4F7F\u7528 "),e("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.haowulm.com/article/7"}," \u89E3\u6790\u6559\u7A0B>>> ")],-1),qe=M({__name:"domain",setup(F){const{proxy:B}=ie(),y=G(),_=P(()=>`${y.urlPrefix}${y.apiUrl}${V.getDomainItems}`),D=T(),o=T(),C=T(),s=T(),c=$({url:""}),d=ne({}),x=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u57DF\u540D",minWidth:200,responsive:0,field:"url",vertAlign:"middle",print:!0,download:!0,headerSort:!1,formatter(a){return`<div>
                <div class="font-medium whitespace-nowrap"><a target="_blank" href="http://${a.getData().url}">${a.getData().url}</a></div>
              </div>`}},{title:"\u5E7F\u544A\u4F4D",minWidth:200,field:"tao_pid",hozAlign:"center",vertAlign:"middle",print:!0,download:!0},{title:"\u8BBE\u7F6E",minWidth:200,field:"tao_pid",hozAlign:"center",vertAlign:"middle",print:!1,download:!1,formatter(a){const i=R(`    <div class="flex items-center lg:justify-center">
          <a class="flex items-center mr-3" href="javascript:;">
                   \u6587\u4EF6\u9A8C\u8BC1
                </a>
                </div>`);return R(i).on("click",function(w){l(a.getData())}),i[0]}},{title:"\u64CD\u4F5C",minWidth:200,field:"actions",responsive:1,hozAlign:"center",vertAlign:"middle",print:!1,download:!1,formatter(a){const i=R(`    <div class="flex items-center lg:justify-center">
          <a class="flex items-center mr-3" href="javascript:;">
                  <i data-lucide="check-square" class="w-4 h-4 mr-1"></i> \u4FEE\u6539
                </a>
                <a class="flex items-center text-danger" href="javascript:;">
                  <i data-lucide="trash-2" class="w-4 h-4 mr-1"></i> \u5220\u9664
                </a>
                </div>`);return R(i).find("a:first-child").on("click",function(w){w.target,p(a.getData())}),R(i).find("a:nth-child(2)").on("click",function(){j(a.getData())}),i[0]}}],b=()=>{pe({domain_url:"gouwu.rocks"}).then(a=>{L.success(a.message),g()})},g=()=>{o.value.reload(!0)},m=()=>{C.value.edit({})},l=a=>{s.value.edit(a)},p=a=>{D.value.edit(a)},j=a=>{const i=B.$confirm;i({title:"\u63D0\u793A",content:"\u771F\u7684\u8981\u5220\u9664\u4E48 ?",onOk:()=>{me({id:a.id}).then(w=>{L.success(w.message),g()})},onCancel(){}})};return(a,i)=>{const w=n("PlusIcon"),O=n("DropdownToggle"),U=n("FileIcon"),r=n("DropdownItem"),W=n("DropdownContent"),N=n("DropdownMenu"),H=n("Dropdown"),Z=n("h-form-item"),J=n("h-form"),K=ae,Q=n("ActivityIcon"),X=n("h-card");return h(),se(le,null,[t(X,{title:"\u57DF\u540D\u7BA1\u7406",bordered:!1},{header:u(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:i[0]||(i[0]=S=>b())}," \u4E00\u952E\u7533\u8BF7\u514D\u8D39\u57DF\u540D "),e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:m}," \u6E90\u7801\u4E0B\u8F7D "),t(H,{class:"ml-auto pos-dropdown sm:ml-0"},{default:u(()=>[t(O,{class:"px-2 btn box"},{default:u(()=>[e("span",Re,[t(w,{class:"w-4 h-4"})])]),_:1}),t(N,{class:"w-40"},{default:u(()=>[t(W,null,{default:u(()=>[t(r,{onClick:i[1]||(i[1]=S=>p({type:1}))},{default:u(()=>[t(U,{class:"w-4 h-4 mr-2"}),f(" \u7ED1\u5B9A\u81EA\u5B9A\u4E49\u57DF\u540D ")]),_:1}),t(r,{onClick:i[2]||(i[2]=S=>p({type:2}))},{default:u(()=>[t(U,{class:"w-4 h-4 mr-2"}),f(" \u7ED1\u5B9A\u514D\u8D39\u57DF\u540D ")]),_:1})]),_:1})]),_:1})]),_:1})]),menu:u(()=>[e("div",Ve,[e("div",Se,[e("a",Te,[t(Q,{class:"w-4 h-4 mr-2"}),f(" \u89E3\u6790\u6559\u7A0B>>> ")])])]),e("div",{class:"sticky top-0"},[e("div",{class:"relative p-5 mt-10 border rounded-md border-warning bg-warning/20 dark:border-0 dark:bg-darkmode-600"},[ze,e("div",{class:"mt-2 text-xs leading-relaxed text-slate-600 dark:text-slate-500"},[Me,e("div",{class:"mt-2"},[f(" 2\u3001\u5982\u679C\u4F60\u6709\u57DF\u540D\uFF0C\u6709\u72EC\u7ACB\u7A7A\u95F4\u6216\u8005\u670D\u52A1\u5668\uFF0C\u8BF7\u4E0B\u8F7D\u6E90\u7801\u5230\u81EA\u5DF1\u7A7A\u95F4\u5C31\u53EF\u4EE5\u4E86\uFF0C\u6E90\u7801\u6587\u4EF6\u4E0B\u8F7D\u5730\u5740: "),e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",icon:"download",onClick:m},"\u4E0B\u8F7D\u6E90\u7801")])])])])]),default:u(()=>[t(K,{ref_key:"tableRef",ref:o,columns:x,ajaxUrl:A(_),config:A(d),queryParam:c},{search:u(()=>[t(J,{layout:"inline"},{default:u(()=>[t(Z,{label:"\u57DF\u540D",content:"",layout:"inline"},{default:u(()=>[v(e("input",{"onUpdate:modelValue":i[3]||(i[3]=S=>c.url=S),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[k,c.url]])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:g}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),t(ke,{ref_key:"editRef",ref:D,onOk:g},null,512),t(De,{ref_key:"downloadRef",ref:C,onOk:g},null,512),t(Oe,{ref_key:"dataRef",ref:s,onOk:g},null,512)],64)}}}),Ne=q(qe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/cms/domain.vue"]]);export{Ne as default};
