import{r as D,h as y,Y as j,D as E,Z as A,j as P,C as Y,b as T,w as n,s as d,a as U,p as r,x as V,a2 as M,l as u,u as b,d as o,a0 as g,q as k,a1 as q}from"./index.68db354d.js";const p={list:"/api/admin/kuaibao/list",view:"/api/admin/kuaibao/view",pass:"/api/admin/kuaibao/pass",reject:"/api/admin/kuaibao/reject"};function R(l){return D({url:p.pass,method:"post",data:l})}function S(l){return D({url:p.reject,method:"post",data:l})}const N=u("option",{value:""},"\u5168\u90E8",-1),z=u("option",{value:"1"},"\u901A\u8FC7",-1),L=u("option",{value:"0"},"\u672A\u786E\u8BA4",-1),O=u("option",{value:"-1"},"\u62D2\u7EDD",-1),W=[N,z,L,O],Z=y({__name:"kuaibao",setup(l){const _=j(),w=E(()=>`${_.urlPrefix}${_.apiUrl}${p.list}`),v=A({}),x=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u540D\u79F0",width:150,field:"kuaibao.title"},{title:"\u5185\u5BB9",field:"content",formatter(e){var t,s,m;return o(`<ul>
            ${((m=(s=(t=e.getData().kuaibao)==null?void 0:t.items)==null?void 0:s.array)==null?void 0:m.forEach(i=>`<li v-for="(item, index) in record.kuaibao.items" :key="index">
            <span>{{ item.text }}</span>
            <a target="_blank" href="${i.click_url}">${i.click_url}</a>
            <a target="_blank" href="${i.pic_view}">
              <img src="${i.pic_view}" />
            </a>
          </li>`))||""}
          </ul>`)[0]}},{title:"\u66F4\u65B0\u65F6\u95F4",width:160,field:"kuaibao.updated_at"},{title:"\u6D88\u606F\u72B6\u6001",field:"message",width:200,formatter(e){return o(`<ul>
          <li>
            <p>${e.getData().kuaibao.message_status}</p>
            <p>${e.getData().kuaibao.message_title}</p>
            <p>${e.getData().kuaibao.message_content}</p>
          </li>
        </ul>`)[0]}},{title:"\u6765\u8DEF",field:"url",width:200,formatter(e){return o(`<a target="_blank" href="${e.getData().url}">
          ${e.getData().url||""}
        </a>`)[0]}},{title:"\u72B6\u6001",field:"kuaibao.status",width:80},{title:"\u64CD\u4F5C",field:"action",width:120,formatter(e){if(e.getData().kuaibao.status!==1){const t=o('<a class="flex items-center" href="javascript:;">\u901A\u8FC7</a>');return o(t).on("click",function(s){F(e.getData())}),t[0]}else if(e.getData().kuaibao.status!==-1){const t=o('<a class="flex items-center" href="javascript:;">\u62D2\u7EDD</a>');return o(t).on("click",function(s){B(e.getData())}),t[0]}return""}}],a=P({rangePicker:"",status:"",startTime:"",endTime:""}),c=Y(),h=()=>{a.startTime=g(a.rangePicker)[0],a.endTime=g(a.rangePicker)[0],c.value.reload(!0)},B=e=>{S({id:e.kuaibao.id}).then(()=>{k.success("\u5DF2\u62D2\u7EDD"),c.value.reload()})},F=e=>{R({id:e.kuaibao.id}).then(t=>{k.success(t.message),c.value.reload()})};return(e,t)=>{const s=d("h-form-item"),m=d("Litepicker"),i=d("h-form"),$=q,C=d("h-card");return U(),T(C,{bordered:!1,title:"\u7EBF\u62A5\u7BA1\u7406"},{default:n(()=>[r($,{ref_key:"tableRef",ref:c,columns:x,ajaxUrl:b(w),config:b(v),queryParam:a},{search:n(()=>[r(i,{layout:"inline"},{default:n(()=>[r(s,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:n(()=>[V(u("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>a.status=f),class:"form-select mt-2 w-full sm:mt-0 sm:w-auto",onChange:h},W,544),[[M,a.status]])]),_:1}),r(s,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:n(()=>[r(m,{modelValue:a.rangePicker,"onUpdate:modelValue":t[1]||(t[1]=f=>a.rangePicker=f),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control mt-2 sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),u("div",{class:"mt-2 xl:mt-0"},[u("button",{type:"button",class:"btn btn-primary w-full sm:w-16",onClick:h}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1})}}});export{Z as default};
