import{h as j,Z as z,G as M,$ as P,j as x,C as v,l as c,a as R,b as V,w as o,q as u,u as D,m as e,a2 as q,_ as S,o as T,n as r,x as k,a3 as L,y as $,d as l,a5 as U,a9 as N}from"./index.435376f8.js";import{c as O}from"./market.e951e1d3.js";import{a as W,b as G}from"./miandan.ee971ac1.js";const I=j({__name:"report",setup(Y,{expose:_}){const h=z(),b=M(()=>`${h.urlPrefix}${h.apiUrl}${O.getItems}`),y=P({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u8BA2\u5355\u53F7",field:"goods.price"},{title:"\u4E0B\u5355\u65F6\u95F4",field:"draws",width:160},{title:"\u8BA2\u5355\u72B6\u6001",field:"inventory",width:160},{title:"\u72B6\u6001",field:"",width:160,formatter(d){return d.getData().status===1?"\u4E0A\u67B6":"\u4E0B\u67B6"}},{title:"\u540C\u6B65\u65F6\u95F4",field:"start_time",width:120,hozAlign:"center"}],n=x({type:"vip",rangePicker:"",name:"",status:0,startTime:"",endTime:""}),s=x({visible:!1,confirmLoading:!1}),f=v(),w=()=>{f.value.reload(!0)};v();const g=()=>{s.visible=!1};return _({edit:d=>{s.visible=!0}}),(d,p)=>{const t=c("Litepicker"),a=c("h-form-item"),i=c("h-form"),C=q,E=c("h-drawer");return R(),V(E,{title:"\u63A8\u5E7F\u62A5\u8868",size:"modal-xl",visible:s.visible,"confirm-loading":s.confirmLoading,onCancel:g},{header:o(()=>[]),default:o(()=>[u(C,{ref_key:"tableRef",ref:f,columns:F,ajaxUrl:D(b),config:D(y),queryParam:n},{search:o(()=>[u(i,{layout:"inline"},{default:o(()=>[u(a,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:o(()=>[u(t,{modelValue:n.rangePicker,"onUpdate:modelValue":p[0]||(p[0]=A=>n.rangePicker=A),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:w}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1},8,["visible","confirm-loading"])}}}),Z=S(I,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan/report.vue"]]),H={class:"flex p-2 py-5 box"},J={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},K=e("span",null,"\u8D26\u53F7\u4F59\u989D",-1),Q={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},X=e("span",null,"\u9501\u5B9A\u91D1\u989D",-1),tt={class:"flex flex-col items-center justify-center flex-1 gap-y-2"},et=e("span",null,"\u5BA1\u6838\u5546\u54C1",-1),at=e("option",{value:""},"\u5168\u90E8",-1),st={value:"2"},ot={value:"1"},nt={value:"0"},ut={value:"-1"},it={value:"-2"},rt=j({__name:"miandan",setup(Y){const _=z(),h=M(()=>`${_.urlPrefix}${_.apiUrl}${G.list}`),b=N(),y=P({}),F=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"",field:"title",formatter(t){const a=l(`
          <div class="flex items-center">
            <div class="w-9 h-9 image-fit zoom-in">
              <img class="border-white rounded-lg shadow-md w-9 h-9" src="${t.getData().pic_url}" />
            </div>
            <div class="ml-4 ">
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().d_title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().title||""}
              </div>
              <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                ${t.getData().email||""}
              </div>
            </div>
          </div>
          `);return l(a).on("click",function(i){w(t.getData())}),a[0]},download:!0},{title:"\u4EF7\u683C",width:120,field:"price",sorter:!0,formatter(t){return l(`
          <div class="flex flex-col items-start">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5238\u540E\u4EF7:${t.getData().coupon_price}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u798F\u5229\u91D1:${t.getData().rebate_amount}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              \u5230\u624B\u4EF7:${(t.getData().coupon_price-t.getData().rebate_amount).toFixed(2)}
            </div>
          </div>
          `)[0]}},{title:"\u6D3B\u52A8\u65F6\u95F4",field:"",width:120,formatter(t){return l(`
          <div class="flex flex-col items-center">
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
            ${U(t.getData().activity_start_time)}
            </div>
            <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
              ${U(t.getData().activity_end_time)}
            </div>
          </div>
          `)[0]}},{title:"\u8FD4\u91D1\u989D",hozAlign:"center",width:90,field:"rebate_amount"},{title:"\u653E\u5355\u91CF",hozAlign:"center",width:90,field:"rebate_orders"},{title:"\u8DD1\u91CF",hozAlign:"center",width:80,field:"promotion_orders"},{title:"\u72B6\u6001",width:90,field:"",sorter:!0,formatter(t){return t.getData().status===0?"\u8349\u7A3F":t.getData().status===1?"\u5BA1\u6838\u4E2D":t.getData().status===2?"\u63A8\u5E7F\u4E2D":t.getData().status===3?"\u63A8\u5E7F\u5B8C\u6210":t.getData().status===-1?"\u5DF2\u62D2\u7EDD":t.getData().status===-2?"\u5DF2\u4E0B\u67B6":""}},{title:"\u64CD\u4F5C",field:"action",width:120,hozAlign:"center",formatter(t){if(t.getData().status===0){const a=l('<a class="flex items-center hover:text-rose-600" href="javascript:;">\u7F16\u8F91</a>');return l(a).on("click",function(i){g(t.getData())}),a[0]}if(t.getData().status!=0){const a=l('<a class="flex items-center hover:text-rose-600" href="javascript:;">\u62A5\u8868</a>');return l(a).on("click",function(i){w(t.getData())}),a[0]}return""}}],n=x({item_id:"",status:"",url:""}),s=x({report:{status0:0,status1:0,status2:0,status01:0,status02:0},user_data:{money:0,locking_money:0,goods_review:0}});T(()=>{p()});const f=v(),w=t=>{f.value.edit(t)},g=t=>{var a;b.push({name:"miandan-miandan-goods",query:{id:(a=t.id)!=null?a:""}},!0)},B=v(),d=t=>{B.value.reload(t),p()},p=()=>{W({}).then(t=>{t.data.item&&(s.report.status0=t.data.item[0]?t.data.item[0]:0,s.report.status1=t.data.item[1]?t.data.item[1]:0,s.report.status2=t.data.item[2]?t.data.item[2]:0,s.report.status01=t.data.item[-1]?t.data.item[-1]:0,s.report.status02=t.data.item[-2]?t.data.item[-2]:0)})};return(t,a)=>{const i=c("h-form-item"),C=c("h-form"),E=q,A=c("h-card");return R(),V(A,{bordered:!1,title:"\u514D\u5355\u5546\u54C1"},{header:o(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:a[0]||(a[0]=m=>g({}))},"\u53D1\u5E03\u514D\u5355\u5546\u54C1 ")]),extra:o(()=>[e("div",H,[e("div",J,[K,e("span",null,r(s.user_data.money),1)]),e("div",Q,[X,e("span",null,r(s.user_data.locking_money),1)]),e("div",tt,[et,e("span",null,r(s.user_data.goods_review),1)])])]),default:o(()=>[u(E,{ref_key:"tableRef",ref:B,columns:F,ajaxUrl:D(h),config:D(y),queryParam:n},{search:o(()=>[u(C,{layout:"inline"},{default:o(()=>[u(i,{label:"\u72B6\u6001",content:"",layout:"inline"},{default:o(()=>[k(e("select",{"onUpdate:modelValue":a[1]||(a[1]=m=>n.status=m),class:"w-full mt-2 form-select sm:mt-0 sm:w-auto",onChange:d},[at,e("option",st,"\u901A\u8FC7 ("+r(s.report.status2)+")",1),e("option",ot,"\u5BA1\u6838\u4E2D ("+r(s.report.status1)+")",1),e("option",nt,"\u8349\u7A3F ("+r(s.report.status0)+")",1),e("option",ut,"\u62D2\u7EDD ("+r(s.report.status01)+")",1),e("option",it,"\u4E0B\u67B6 ("+r(s.report.status02)+")",1)],544),[[L,n.status]])]),_:1}),u(i,{label:"\u5546\u54C1\u7F16\u53F7",content:"",layout:"inline"},{default:o(()=>[k(e("input",{"onUpdate:modelValue":a[2]||(a[2]=m=>n.item_id=m),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[$,n.item_id]])]),_:1}),u(i,{label:"\u5546\u54C1\u5730\u5740",content:"",layout:"inline"},{default:o(()=>[k(e("input",{"onUpdate:modelValue":a[3]||(a[3]=m=>n.url=m),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[$,n.url]])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:d}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"]),u(Z,{ref_key:"reportModal",ref:f,onOk:d},null,512)]),_:1})}}}),mt=S(rt,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/business/miandan.vue"]]);export{mt as default};
