import{d as U,a7 as y,s as f,o as C,v as D,x as E,E as S,y as i,e as j,w as a,b as p,h as e,g as d,z as A,u as n,c as N,f as O,B as b,R,j as v,F as _,A as g,k as $}from"./index.7ba71575.js";import{g as Q,u as T}from"./user.a532db6b.js";import{p as z}from"./pick.000ca15c.js";const G={class:"relative"},I={class:"flex-none w-24 h-24 mr-1 image-fit"},L=["src"],M=U({__name:"base",setup(H){const h=y().uploadUrl,t=f({email:"",avatar_url:"",mobile:"",qq:""}),V={},u=f({uploading:!0,nick_name:"",avatar_url:""});C(()=>{k()});const m=D(V,E(t)),k=()=>{F()},F=()=>{Q({}).then(l=>{l.data.user&&S(()=>{Object.assign(t,z(l.data.user,["avatar_url","email","mobile","qq"])),u.nick_name=l.data.user.nick_name,u.avatar_url=l.data.user.avatar_url})})},w=l=>{if(l.preventDefault(),m.value.$touch(),m.value.$invalid)m.value.$errors;else{const s=n(t);T(Object.assign(s,{})).then(o=>{const{code:c}=o||{};c===0?g.success("\u4FDD\u5B58\u6210\u529F"):g.error(o.message)})}},x=l=>{Object.assign(t,{avatar_url:l.data.item.img}),u.avatar_url=l.data.item.img};return(l,s)=>{const o=i("h-form-item"),c=i("h-upload"),B=i("h-form"),q=i("h-card");return p(),j(q,{bordered:!1,title:"\u57FA\u7840\u8BBE\u7F6E"},{default:a(()=>[e(B,{label:"",border:!0},{default:a(()=>[e(o,{label:"\u7528\u6237\u540D",content:""},{default:a(()=>[d("span",null,A(u.nick_name),1)]),_:1}),e(o,{label:"\u5934\u50CF",content:""},{default:a(()=>[e(c,{name:"file",multiple:!0,action:n(h),onChange:x},{default:a(()=>[d("div",G,[d("div",I,[u.avatar_url?(p(),N("img",{key:0,src:u.avatar_url,alt:"",class:"rounded-full"},null,8,L)):O("v-if",!0)]),e(n(b),{variant:"outline-success",class:"w-32 mt-1 mb-2 mr-2 btn-sm"},{default:a(()=>[e(n(R),{icon:"Upload",class:"w-4 h-4 mr-2"}),v("\u56FE\u6807\u4E0A\u4F20 ")]),_:1})])]),_:1},8,["action"])]),_:1}),e(o,{label:"email",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.email,"onUpdate:modelValue":s[0]||(s[0]=r=>t.email=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"\u624B\u673A\u53F7\u7801",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.mobile,"onUpdate:modelValue":s[1]||(s[1]=r=>t.mobile=r)},null,8,["modelValue"])]),_:1}),e(o,{label:"QQ\u53F7\u7801",content:""},{default:a(()=>[e(n(_),{type:"text",modelValue:t.qq,"onUpdate:modelValue":s[2]||(s[2]=r=>t.qq=r)},null,8,["modelValue"])]),_:1}),e(o,null,{default:a(()=>[e(n(b),{variant:"primary",class:"w-24 mb-2 mr-1",onClick:w},{default:a(()=>[v("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})}}}),X=$(M,[["__file","/Users/wu./Documents/os/web/web/web/src/views/user/info/base.vue"]]);export{X as default};
