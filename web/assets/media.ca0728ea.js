import{r as q,h as z,Y as N,D as R,Z as M,j as f,C as O,k as P,t as Y,b as A,w as i,s as l,a as h,l as n,p as s,u as p,n as H,e as G,x as r,y as c,$ as W,d as v,q as Z,v as J,a1 as K}from"./index.68db354d.js";import{p as Q}from"./pick.3bd8489a.js";const B={getItems:"/api/user/info/media/list",getView:"/api/user/info/media/view",updateItem:"/api/user/info/media/update",getItemsAcceptance:"/api/user/info/acceptance/list",getViewAcceptance:"/api/user/info/acceptance/view",updateItemAcceptance:"/api/user/info/acceptance/update"};function X(F){return q({url:B.updateItem,method:"post",data:F})}const ee={class:"input-group"},te=n("div",{class:"input-group-text"},"\u8BF7\u8F93\u5165\u6296\u97F3\u8D26\u53F7\u3010\u975E\u6296\u97F3\u6635\u79F0\u3011",-1),ue={class:"input-group"},ae=n("div",{class:"input-group-text"},"\u5FAE\u4FE1\u8D26\u53F7\uFF1A\u5FC5\u987B\u586B\u5199\u81EA\u5DF1\u771F\u5B9E\u5728\u7528\u7684\u5FAE\u4FE1\u8D26\u53F7",-1),ie=z({__name:"media",setup(F){const g=N(),w=R(()=>`${g.urlPrefix}${g.apiUrl}${B.getItems}`),x=M({}),E=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6296\u97F3\u8D26\u53F7",field:"account",width:150},{title:"\u6296\u97F3\u4FE1\u606F",field:"url"},{title:"\u76F8\u5173\u5FAE\u4FE1\u53F7",field:"weixin",width:150},{title:"\u521B\u5EFA\u65F6\u95F4",field:"created_at",formatter(u){return W(u.getData().created_at,"YY-MM-DD HH:mm")},width:160},{title:"\u72B6\u6001",field:"status",width:150,formatter(u){return u.getData().status===1?"\u901A\u8FC7":"\u5F85\u5BA1\u6838"}},{title:"\u72B6\u6001",field:"\u64CD\u4F5C",width:150,hozAlign:"center",formatter(u){if(u.getData().status===0){const e=v('<a class="flex items-center" href="javascript:;">\u4FEE\u6539</a>');return v(e).on("click",function(b){I(u.getData())}),e[0]}return""}}],t=f({id:0,account:"",url:"",weixin:""}),D={},C=f({}),a=f({media:{visible:!1,confirmLoading:!1}}),_=O(),d=P(D,Y(t)),y=()=>{_.value.reload(!0)},V=u=>{a.media.visible=!0,Object.assign(t,{id:0,account:"",url:"",weixin:""})},k=()=>{if(a.media.confirmLoading=!0,d.value.$touch(),d.value.$invalid)d.value.$errors,a.media.confirmLoading=!1;else{const u=p(t);X(u).then(()=>{Z.success("\u63D0\u4EA4\u6210\u529F"),a.media.confirmLoading=!1,a.media.visible=!1,Object.assign(t,{id:0,account:"",url:"",weixin:""}),y()})}},$=()=>{a.media.visible=!1},I=u=>{a.media.visible=!0,J(()=>{const e=Q(u,["id","account","url","weixin"]);Object.assign(t,e)})};return(u,e)=>{const b=K,m=l("h-form-item"),U=l("h-form"),j=l("h-spin"),L=l("LoadingIcon"),T=l("h-modal"),S=l("h-card");return h(),A(S,{bordered:!1,title:"\u6296\u97F3\u8BA4\u8BC1"},{header:i(()=>[n("button",{class:"btn btn-primary mr-2 shadow-md",onClick:e[0]||(e[0]=o=>V())}," \u6DFB\u52A0\u8BA4\u8BC1 ")]),default:i(()=>[s(b,{ref_key:"tableRef",ref:_,columns:E,ajaxUrl:p(w),config:p(x),queryParam:C},null,8,["ajaxUrl","config","queryParam"]),s(T,{title:"\u6DFB\u52A0\u6296\u97F3\u8BA4\u8BC1",size:"modal-lg",visible:a.media.visible,onCancel:$},{footer:i(()=>[n("button",{class:"btn btn-primary mb-2 mr-1 w-24",onClick:e[5]||(e[5]=o=>k())},[H(" \u63D0\u4EA4\u5BA1\u6838 "),a.media.confirmLoading?(h(),A(L,{key:0,icon:"oval",color:"white",class:"ml-2 h-4 w-4"})):G("",!0)])]),default:i(()=>[s(j,{spinning:a.media.confirmLoading},{default:i(()=>[s(U,{border:!1},{default:i(()=>[r(n("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.id=o),type:"hidden"},null,512),[[c,t.id]]),s(m,{label:"\u6296\u97F3\u53F7",content:"",layout:"small"},{default:i(()=>[n("div",ee,[r(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=o=>t.account=o)},null,512),[[c,t.account]]),te])]),_:1}),s(m,{label:"\u4E2A\u4EBA\u540D\u7247\u94FE\u63A5",content:"",layout:"small"},{default:i(()=>[r(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>t.url=o),placeholder:"\u3010\u6B65\u9AA4\u3011\u6296\u97F3\u754C\u9762\u3010\u6211\u3011-\u3010\u2261\u3011-\u3010\u4E2A\u4EBA\u540D\u7247\u3011-\u70B9\u5206\u4EAB\u590D\u5236\u94FE\u63A5"},null,512),[[c,t.url]])]),_:1}),s(m,{label:"\u5173\u8054\u5FAE\u4FE1\u53F7",content:"",layout:"small"},{default:i(()=>[n("div",ue,[r(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=o=>t.weixin=o)},null,512),[[c,t.weixin]]),ae])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible"])]),_:1})}}});export{ie as default};
