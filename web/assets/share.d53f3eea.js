import{h as x,j as y,o as M,k as $,t as S,v as T,l as _,a as A,b as Y,w as s,m as e,q as o,x as c,z as j,a3 as L,y as f,n as w,u as E,s as D,_ as U,Z as P,G as O,$ as q,C,c as R,F as W,d as k,a0 as z,a2 as N}from"./index.5d26a5f4.js";import{g as G,u as H,b as I}from"./market.81803f47.js";import{p as Z}from"./pick.2d58b9d0.js";const J={class:"form-check form-switch"},K=e("option",{value:0},"\u670B\u53CB\u5708\u5206\u4EAB\u5956\u52B1",-1),Q=e("option",{value:1},"\u5FAE\u4FE1\u7FA4\u5206\u4EAB\u5956\u52B1",-1),X=e("option",{value:3},"\u670B\u53CB\u5708\u3001\u5FAE\u4FE1\u7FA4\u5206\u4EAB\u5956\u52B1",-1),ee=[K,Q,X],te={class:"input-group"},ue=e("div",{class:"input-group-text"},"\u5143",-1),ae={class:"input-group"},se=e("div",{class:"input-group-text"},"\u4E2A",-1),oe={class:"input-group"},ne=e("div",{class:"input-group-text"},"\u6B21",-1),le={class:"form-help"},re={class:"input-group"},ie=e("div",{class:"input-group-text"},"\u6B21",-1),me={class:"form-help"},ce=e("div",{class:"form-help"},"\u4E0D\u586B\u5199\u4F7F\u7528\u5B98\u65B9\u9ED8\u8BA4\uFF0C\u5982\u679C\u586B\u5199\u57DF\u540D\u9700\u8981\u5148cname\u89E3\u6790\u5230 share.youdanhui.cn",-1),de=x({__name:"data",setup(V,{expose:B}){const u=y({share_range:0,money:0,point:0,views:0,day_times:0,invite_url:""}),g={},l=y({visible:!1,confirmLoading:!1,share:{share_status:!1}});M(()=>{d()});const d=()=>{v()},p=$(g,S(u)),v=()=>{G({market_code:"share"}).then(i=>{i.data.item&&T(()=>{const t=Z(i.data.item,["share_range","money","point","views","day_times","invite_url"]);Object.assign(u,t),l.share.share_status=i.data.item.share_status===1})})},b=i=>{if(i.preventDefault(),p.value.$touch(),p.value.$invalid)p.value.$errors;else{const t=E(u);H(Object.assign(t,{market_code:"share",share_status:l.share.share_status})).then(n=>{const{code:h}=n||{};h===0?D.success("\u4FDD\u5B58\u6210\u529F"):D.error(n.message)})}},r=()=>{l.visible=!1};return B({edit:()=>{l.visible=!0}}),(i,t)=>{const n=_("h-form-item"),h=_("h-form"),F=_("h-drawer");return A(),Y(F,{title:"\u8BBE\u7F6E",visible:l.visible,"confirm-loading":l.confirmLoading,onCancel:r},{footer:s(()=>[e("button",{class:"w-24 mb-2 mr-1 btn btn-primary",onClick:b},"\u4FDD\u5B58")]),default:s(()=>[o(h,{layout:"small"},{default:s(()=>[o(n,{label:"\u5206\u4EAB\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",J,[c(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>l.share.share_status=a)},null,512),[[j,l.share.share_status]])])]),_:1}),o(n,{label:"\u5956\u52B1\u8303\u56F4",content:"",layout:"small"},{default:s(()=>[c(e("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=a=>u.share_range=a)},ee,512),[[L,u.share_range]])]),_:1}),o(n,{label:"\u73B0\u91D1\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",te,[c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=a=>u.money=a)},null,512),[[f,u.money]]),ue])]),_:1}),o(n,{label:"\u79EF\u5206\u5956\u52B1",content:"",layout:"small"},{default:s(()=>[e("div",ae,[c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=a=>u.point=a)},null,512),[[f,u.point]]),se])]),_:1}),o(n,{label:"\u5956\u52B1\u6D4F\u89C8\u6761\u4EF6",content:"",layout:"small"},{default:s(()=>[e("div",oe,[c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=a=>u.views=a)},null,512),[[f,u.views]]),ne]),e("div",le,"(\u6BCF\u4E2A\u7528\u6237\u6BCF\u5929\u5206\u4EAB\u80FD\u5F97"+w(u.day_times)+"\u6B21\u5956\u52B1\uFF0C\u8D85\u8FC7\u540E\u5206\u4EAB\u6CA1\u6709\u5956\u52B1\u4E86)",1)]),_:1}),o(n,{label:"\u6BCF\u65E5\u5956\u52B1\u9650\u5236",content:"",layout:"small"},{default:s(()=>[e("div",re,[c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=a=>u.day_times=a)},null,512),[[f,u.day_times]]),ie]),e("div",me,"(\u6BCF\u4E2A\u7528\u6237\u6BCF\u5929\u5206\u4EAB\u80FD\u5F97"+w(u.day_times)+"\u6B21\u5956\u52B1\uFF0C\u8D85\u8FC7\u540E\u5206\u4EAB\u6CA1\u6709\u5956\u52B1\u4E86)",1)]),_:1}),o(n,{label:"\u5206\u4EAB\u72EC\u7ACB\u57DF\u540D",content:"",layout:"small"},{default:s(()=>[c(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=a=>u.invite_url=a),placeholder:"share.youdanhui.cn"},null,512),[[f,u.invite_url]]),ce]),_:1})]),_:1})]),_:1},8,["visible","confirm-loading"])}}}),_e=U(de,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/market/share/data.vue"]]),pe=x({__name:"share",setup(V){const B=P(),u=O(()=>`${B.urlPrefix}${B.apiUrl}${I.getList}`),g=q({}),l=[{formatter:"responsiveCollapse",width:40,minWidth:30,hozAlign:"center",resizable:!0,headerSort:!1},{title:"\u6807\u9898",field:"title",formatter(r){return k(`<a target="_blank" href="${r.getData().url}">
          ${r.getData().title}
        </a>`)[0]}},{title:"\u5E73\u53F0",width:150,field:"platform",formatter(r){return k(`${r.getData().platform=="WechatTimeLine"?"<span>\u670B\u53CB\u5708</span>":""}
        ${r.getData().platform=="WechatSession"?"<span>\u7FA4\u597D\u53CB</span>":""}`)[0]}},{title:"\u5206\u4EAB\u4EBA",width:100,field:"member.user_name"},{title:"\u65F6\u95F4",width:140,field:"created_at",formatter(r){return z(r.getData().created_at,"YY-MM-DD HH:mm")}}],d=y({market_code:"share",rangePicker:"",name:"",status:0,startTime:"",endTime:""}),p=C(),v=C(),b=()=>{p.value.reload(!0)};return(r,m)=>{const i=_("h-form-item"),t=_("Litepicker"),n=_("h-form"),h=N,F=_("h-card");return A(),R(W,null,[o(F,{bordered:!1,title:"\u5206\u4EAB\u660E\u7EC6"},{header:s(()=>[e("button",{class:"mr-2 shadow-md btn btn-primary",onClick:m[0]||(m[0]=a=>v.value.edit({}))},"\u8BBE\u7F6E ")]),default:s(()=>[o(h,{ref_key:"tableRef",ref:p,columns:l,ajaxUrl:E(u),config:E(g),queryParam:d},{search:s(()=>[o(n,{layout:"inline"},{default:s(()=>[o(i,{label:"\u7528\u6237\u540D",content:"",layout:"inline"},{default:s(()=>[c(e("input",{"onUpdate:modelValue":m[1]||(m[1]=a=>d.name=a),type:"text",class:"mt-2 form-control sm:mt-0 sm:w-40 2xl:w-full"},null,512),[[f,d.name]])]),_:1}),o(i,{label:"\u521B\u5EFA\u65F6\u95F4",content:"",layout:"inline"},{default:s(()=>[o(t,{modelValue:d.rangePicker,"onUpdate:modelValue":m[2]||(m[2]=a=>d.rangePicker=a),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"mt-2 form-control sm:mt-0 sm:w-56 2xl:w-full"},null,8,["modelValue"])]),_:1}),e("div",{class:"mt-2 xl:mt-0"},[e("button",{type:"button",class:"w-full btn btn-primary sm:w-16",onClick:b}," \u67E5\u8BE2 ")])]),_:1})]),_:1},8,["ajaxUrl","config","queryParam"])]),_:1}),o(_e,{ref_key:"dataModal",ref:v,onOk:b},null,512)],64)}}}),ve=U(pe,[["__file","/Users/wu./Documents/os/web/www/web/src/views/user/market/share.vue"]]);export{ve as default};
